<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>16 å¤šçº¿ç¨‹ | HatidaBlog</title>
  <meta name="keywords" content=" java , å¤šçº¿ç¨‹ ">
  <meta name="description" content="16 å¤šçº¿ç¨‹ | HatidaBlog">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="ç¬¬4ç«  æ£€ç´¢æ•°æ®4.5 æ£€ç´¢ä¸åŒçš„è¡ŒDISTINCTå…³é”®å­—ï¼šæ­¤å…³é”®å­—æŒ‡ç¤ºMySQLåªè¿”å›ä¸åŒçš„å€¼ã€‚  ä¸èƒ½éƒ¨åˆ†ä½¿ç”¨DISTINCT DISTINCTå…³é”®å­—åº”ç”¨äºæ‰€æœ‰åˆ—è€Œä¸ä»…æ˜¯å‰ç½®å®ƒçš„åˆ—ã€‚å¦‚æœç»™å‡ºSELECT DISTINCT vend_id,prod_priceï¼Œé™¤éæŒ‡å®šçš„ä¸¤ä¸ªåˆ—éƒ½ä¸åŒï¼Œå¦åˆ™æ‰€æœ‰è¡Œéƒ½å°†è¢«æ£€ç´¢å‡ºæ¥ã€‚ ç›¸å½“äºå°†distinctåé¢çš„åˆ—æ”¾åœ¨ä¸€èµ·ä½œä¸ºæ¡ä»¶  4.6 é™åˆ¶ç»“æœ-limitå…³é”®">
<meta property="og:type" content="article">
<meta property="og:title" content="mysqlå¿…çŸ¥å¿…ä¼š">
<meta property="og:url" content="http://example.com/2024/02/05/mysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/mysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/index.html">
<meta property="og:site_name" content="HatidaBlog">
<meta property="og:description" content="ç¬¬4ç«  æ£€ç´¢æ•°æ®4.5 æ£€ç´¢ä¸åŒçš„è¡ŒDISTINCTå…³é”®å­—ï¼šæ­¤å…³é”®å­—æŒ‡ç¤ºMySQLåªè¿”å›ä¸åŒçš„å€¼ã€‚  ä¸èƒ½éƒ¨åˆ†ä½¿ç”¨DISTINCT DISTINCTå…³é”®å­—åº”ç”¨äºæ‰€æœ‰åˆ—è€Œä¸ä»…æ˜¯å‰ç½®å®ƒçš„åˆ—ã€‚å¦‚æœç»™å‡ºSELECT DISTINCT vend_id,prod_priceï¼Œé™¤éæŒ‡å®šçš„ä¸¤ä¸ªåˆ—éƒ½ä¸åŒï¼Œå¦åˆ™æ‰€æœ‰è¡Œéƒ½å°†è¢«æ£€ç´¢å‡ºæ¥ã€‚ ç›¸å½“äºå°†distinctåé¢çš„åˆ—æ”¾åœ¨ä¸€èµ·ä½œä¸ºæ¡ä»¶  4.6 é™åˆ¶ç»“æœ-limitå…³é”®">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://gitee.com/kilomi/pic-bed/raw/master/img/202402050101323.png">
<meta property="article:published_time" content="2024-02-04T17:00:28.000Z">
<meta property="article:modified_time" content="2024-02-04T17:01:13.136Z">
<meta property="article:author" content="hatida">
<meta property="article:tag" content="mysql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/kilomi/pic-bed/raw/master/img/202402050101323.png">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/darcula.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 7.1.1"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>hatida</span>
</div>

<div class="icon">
    
        
            <a title="github"
               href="https://github.com/hatida"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
</div>





<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(19)</small>
            
        </div>
    </li>
    
        
            
                
    <li>
        <div data-rel="æ•°æ®åº“">
            
            æ•°æ®åº“
            <small>(2)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="ç¼–ç¨‹è¯­è¨€">
            <i class="fold iconfont icon-right"></i>
            ç¼–ç¨‹è¯­è¨€
            <small>(17)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="ç¼–ç¨‹è¯­è¨€&lt;---&gt;java">
            
            java
            <small>(17)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">About</a>
        
        <a style="width: 50%"
                
                                           class="friends">Friends</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="19">
<input type="hidden" id="yelog_site_word_count" value="137.6k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">å¶è½é˜</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="æœç´¢ å¿«æ·é”® i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="åˆ‡æ¢åˆ°å¤§çº²è§†å›¾ å¿«æ·é”® w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="è¿”å›"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="å¤§å°å†™æ•æ„Ÿ"></i>
            <i class="iconfont icon-tag" data-title="æ ‡ç­¾"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">å¤§çº²</div>
            <i class="iconfont icon-list" data-title="åˆ‡æ¢åˆ°æ–‡ç« åˆ—è¡¨"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æŸ¥æ‰¾</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å¤šçº¿ç¨‹</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>åå°„</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>é›†åˆ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ç±»</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æšä¸¾</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>é¢å‘å¯¹è±¡</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ’åº</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ•°æ®åº“</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ•°ç»„</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ç½‘ç»œ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>é¡¹ç›®</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å¼‚å¸¸</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ­£åˆ™è¡¨è¾¾å¼</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ³¨è§£</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å­—ç¬¦ä¸²</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>GUI</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>IO</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>java</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jdbc</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jvm</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mysql</a>
            </li>
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        
        <a  class="All æ•°æ®åº“ "
           href="/2024/02/05/mysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/mysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/"
           data-tag="mysql"
           data-author="" >
            <span class="post-title" title="mysqlå¿…çŸ¥å¿…ä¼š">mysqlå¿…çŸ¥å¿…ä¼š</span>
            <span class="post-date" title="2024-02-05 01:00:28">2024/02/05</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/10%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3/"
           data-tag="java,æšä¸¾,æ³¨è§£"
           data-author="" >
            <span class="post-title" title="10 æšä¸¾å’Œæ³¨è§£">10 æšä¸¾å’Œæ³¨è§£</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/11%20%E5%BC%82%E5%B8%B8%EF%BC%88Exception%EF%BC%89/"
           data-tag="java,å¼‚å¸¸"
           data-author="" >
            <span class="post-title" title="11 å¼‚å¸¸ï¼ˆExceptionï¼‰">11 å¼‚å¸¸ï¼ˆExceptionï¼‰</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/21%20%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6/"
           data-tag="java,åå°„"
           data-author="" >
            <span class="post-title" title="21 åå°„">21 åå°„</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/25%20%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
           data-tag="java,æ­£åˆ™è¡¨è¾¾å¼"
           data-author="" >
            <span class="post-title" title="25 æ­£åˆ™è¡¨è¾¾å¼">25 æ­£åˆ™è¡¨è¾¾å¼</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/5%20%E6%95%B0%E7%BB%84/"
           data-tag="java,æ•°ç»„,æ’åº,æŸ¥æ‰¾"
           data-author="" >
            <span class="post-title" title="5 æ•°ç»„ã€æ’åºå’ŒæŸ¥æ‰¾">5 æ•°ç»„ã€æ’åºå’ŒæŸ¥æ‰¾</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3String/"
           data-tag="java,å­—ç¬¦ä¸²,jvm"
           data-author="" >
            <span class="post-title" title="Stringæ·±å…¥ç†è§£">Stringæ·±å…¥ç†è§£</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/17%20IO%E6%B5%81/"
           data-tag="java,IO"
           data-author="" >
            <span class="post-title" title="17 IOæµ">17 IOæµ</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/19%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"
           data-tag="java,ç½‘ç»œ"
           data-author="" >
            <span class="post-title" title="19 ç½‘ç»œç¼–ç¨‹">19 ç½‘ç»œç¼–ç¨‹</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/7%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B(%E4%B8%AD%E7%BA%A7)/"
           data-tag="java,é¢å‘å¯¹è±¡"
           data-author="" >
            <span class="post-title" title="7 é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆä¸­çº§ï¼‰">7 é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆä¸­çº§ï¼‰</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/9%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B(%E9%AB%98%E7%BA%A7)/"
           data-tag="java,ç±»"
           data-author="" >
            <span class="post-title" title="9.1 ç±»å˜é‡å’Œç±»æ–¹æ³•">9.1 ç±»å˜é‡å’Œç±»æ–¹æ³•</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/12%20%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%92%8C%E6%B3%9B%E5%9E%8B/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="12 å¸¸ç”¨ç±»">12 å¸¸ç”¨ç±»</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/16%20%E5%A4%9A%E7%BA%BF%E7%A8%8B/"
           data-tag="java,å¤šçº¿ç¨‹"
           data-author="" >
            <span class="post-title" title="16 å¤šçº¿ç¨‹">16 å¤šçº¿ç¨‹</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/23%20JDBC/"
           data-tag="java,jdbc,æ•°æ®åº“"
           data-author="" >
            <span class="post-title" title="23 JDBC å’Œæ•°æ®åº“è¿æ¥æ± ">23 JDBC å’Œæ•°æ®åº“è¿æ¥æ± </span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/6%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B(%E5%9F%BA%E7%A1%80)/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="6.é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆåŸºç¡€ï¼‰">6.é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆåŸºç¡€ï¼‰</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/15%20%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1/"
           data-tag="java,GUI"
           data-author="" >
            <span class="post-title" title="15 å›¾å½¢ç•Œé¢è®¾è®¡">15 å›¾å½¢ç•Œé¢è®¾è®¡</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/13%20java%E9%9B%86%E5%90%88/"
           data-tag="java,é›†åˆ"
           data-author="" >
            <span class="post-title" title="13 Java æ•°æ®ç»“æ„">13 Java æ•°æ®ç»“æ„</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/24%20%E6%BB%A1%E6%B1%89%E6%A5%BC%E9%A1%B9%E7%9B%AE/"
           data-tag="java,é¡¹ç›®"
           data-author="" >
            <span class="post-title" title="24 é¡¹ç›®ï¼šæ»¡æ±‰æ¥¼">24 é¡¹ç›®ï¼šæ»¡æ±‰æ¥¼</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All æ•°æ®åº“ "
           href="/2024/02/04/mysql/mysql/"
           data-tag="mysql"
           data-author="" >
            <span class="post-title" title="mysql">mysql</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-JavaåŸºç¡€/16 å¤šçº¿ç¨‹" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">16 å¤šçº¿ç¨‹</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="ç¼–ç¨‹è¯­è¨€">ç¼–ç¨‹è¯­è¨€</a> > 
            
            <a  data-rel="ç¼–ç¨‹è¯­è¨€&lt;---&gt;java">java</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color5">java</a>
            
            <a class="color4">å¤šçº¿ç¨‹</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2024-02-05 01:20:52'>2024-02-04 16:17</time>
        
    </div>
    <div class="article-meta">
        
        <span>Count:7.3k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views ğŸ‘€ :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">16 å¤šçº¿ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">16.1 çº¿ç¨‹çš„æ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">16.1.1 çº¿ç¨‹çš„ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">16.1.2 çº¿ç¨‹çš„çŠ¶æ€</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">16.2 çº¿ç¨‹çš„ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">16.2.1 ç»§æ‰¿ Thread ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">16.2.2 å®ç° Runable æ¥å£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">16.2.3 ç»§æ‰¿ Thread å’Œ å®ç° Runable çš„åŒºåˆ«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">16.2.4 çº¿ç¨‹ä¸­æ­¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">16.2.5 çº¿ç¨‹å¸¸ç”¨æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-text">&#x3D;&#x3D;Javaä¸­æ–­çº¿ç¨‹ï¼ˆinterruptï¼‰&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-text">æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-text">ç›¸å…³å‡½æ•°ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-text">ç¤ºä¾‹è§£é‡Š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">16.2.6 ç”¨æˆ·çº¿ç¨‹å’Œ&#x3D;&#x3D;å®ˆæŠ¤çº¿ç¨‹&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">&#x3D;&#x3D;16.2.7 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">&#x3D;&#x3D;16.3 çº¿ç¨‹çš„äº’æ–¥&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">16.3.1 äº’æ–¥é”</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-text">å”®ç¥¨ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">16.3.2 çº¿ç¨‹æ­»é”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">16.4 çº¿ç¨‹çš„åŒæ­¥</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">é¡¹ç›®-å¦å…‹å¤§æˆ˜</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-6 i,
    .toc-level-6 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1><span id="16-å¤šçº¿ç¨‹">16 å¤šçº¿ç¨‹</span></h1><h2><span id="161-çº¿ç¨‹çš„æ¦‚å¿µ">16.1 çº¿ç¨‹çš„æ¦‚å¿µ</span></h2><blockquote>
<p>å¯¹äºä¸€èˆ¬ç¨‹åºè€Œè¨€ï¼Œå…¶ç»“æ„å¤§éƒ½å¯ä»¥åˆ†ä¸ºä¸€ä¸ªå…¥å£ã€ä¸€ä¸ªå‡ºå£ã€ä¸€ä¸ªé¡ºæ¬¡æ‰§è¡Œçš„è¯­å¥åºåˆ—ã€‚è¿™æ ·çš„è¯­å¥ç»“æ„ç§°ä¸ºè¿›ç¨‹ï¼Œå®ƒæ˜¯ç¨‹åºçš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œï¼Œå¯¹åº”äº†ä»£ç åŠ è½½ã€æ‰§è¡Œè‡³å®Œæ¯•çš„å…¨è¿‡ç¨‹ã€‚</p>
<p>è¿›ç¨‹å³æ˜¯ç¨‹åºåœ¨å¤„ç†æœºä¸­çš„ä¸€æ¬¡è¿è¡Œã€‚åœ¨è¿™æ ·ä¸€ä¸ªç»“æ„ä¸­ä¸ä»…åŒ…å«ç¨‹åºä»£ç ï¼Œä¹ŸåŒ…æ‹¬äº†ç³»ç»Ÿèµ„æºçš„æ¦‚å¿µã€‚</p>
<p>åœ¨å• CPU è®¡ç®—æœºå†…éƒ¨ï¼Œå¾®è§‚ä¸Šè®²ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿è¡Œã€‚å®ç°å¤šçº¿ç¨‹å³ä»å®è§‚ä¸Šä½¿å¤šä¸ªä½œä¸šåŒæ—¶æ‰§è¡Œã€‚</p>
</blockquote>
<p><img src="https://gitee.com/kilomi/pic-bed/raw/master/img/202310112105312.png" alt="image-20231011210512208"></p>
<p><strong>ç¨‹åº</strong>ï¼šä¸ºå®Œæˆç‰¹å®šä»»åŠ¡ï¼Œç”¨æŸç§è¯­è¨€ç¼–å†™çš„ä¸€ç»„æŒ‡ä»¤çš„é›†åˆã€‚</p>
<p><strong>è¿›ç¨‹</strong>ï¼šè¿è¡Œä¸­çš„ç¨‹åºã€‚å½“ä½ è¿è¡Œä¸€ä¸ªç¨‹åºï¼Œç³»ç»Ÿå°±ä¼šä¸ºè¯¥è¿›ç¨‹åˆ†é…ç©ºé—´ã€‚è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ã€‚æ˜¯ä¸€ä¸ªåŠ¨æ€è¿‡ç¨‹ï¼šæœ‰å…¶è‡ªèº«äº§ç”Ÿã€å­˜åœ¨ã€æ¶ˆäº¡çš„è¿‡ç¨‹ã€‚</p>
<p><strong>çº¿ç¨‹</strong>ï¼šç”±è¿›ç¨‹åˆ›å»ºçš„ï¼Œè¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ã€‚æ¯”å¦‚åœ¨ç™¾åº¦ç½‘ç›˜é‡Œé‡Œæœ‰å¤šä¸ªä¸‹è½½ä»»åŠ¡ï¼Œæ¯ä¸€ä¸ªä»»åŠ¡å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<p><strong>å•çº¿ç¨‹</strong>ï¼šåŒä¸€æ—¶åˆ»ï¼Œåªå…è®¸æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<p><strong>å¤šçº¿ç¨‹</strong>ï¼šåŒä¸€æ—¶åˆ»ï¼Œå¯ä»¥æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ã€‚æ¯”å¦‚QQèŠå¤©çª—å£ã€è¿…é›·ä¸‹è½½ã€‚</p>
<p><strong>å¹¶å‘</strong>ï¼šåŒä¸€æ—¶åˆ»ï¼Œå¤šä¸ªä»»åŠ¡<strong>äº¤æ›¿æ‰§è¡Œ</strong>ï¼Œé€ æˆä¸€ç§è²Œä¼¼å¹¶è¡Œçš„çŠ¶æ€ã€‚å•æ ¸ CPU å®ç°çš„å¤šä»»åŠ¡å°±æ˜¯å¹¶å‘ã€‚</p>
<p><strong>å¹¶è¡Œ</strong>ï¼šåŒä¸€æ—¶åˆ»ï¼Œå¤šä¸ªä»»åŠ¡<strong>åŒæ—¶è¿›è¡Œ</strong>ã€‚å¤šæ ¸ CPU å¯ä»¥å®ç°å¹¶è¡Œã€‚</p>
<p>&#x3D;&#x3D;tips:å¹¶å‘å’Œå¹¶è¡Œå¯ä»¥åŒæ—¶è¿›è¡Œã€‚&#x3D;&#x3D;</p>
<h3><span id="1611-çº¿ç¨‹çš„ç»“æ„">16.1.1 çº¿ç¨‹çš„ç»“æ„</span></h3><p>åœ¨ Java ä¸­ï¼Œçº¿ç¨‹ç”±ä»¥ä¸‹ 3 éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li>è™šæ‹Ÿ CPUï¼šå°è£…åœ¨ java.lang.Thread ç±»ä¸­ï¼Œæ§åˆ¶ç€æ•´ä¸ªçº¿ç¨‹çš„è¿è¡Œ</li>
<li>æ‰§è¡Œçš„ä»£ç ï¼šä¼ é€’ç»™ Thread ç±»ï¼Œç”±å…¶æ§åˆ¶æŒ‰åºæ‰§è¡Œ</li>
<li>å¤„ç†çš„æ•°æ®ï¼šä¼ é€’ç»™ Thread ç±»ï¼Œæ˜¯åœ¨ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦å¤„ç†çš„æ•°æ®</li>
</ul>
<h3><span id="1612-çº¿ç¨‹çš„çŠ¶æ€">16.1.2 çº¿ç¨‹çš„çŠ¶æ€</span></h3><blockquote>
<p>Java çš„çº¿ç¨‹æ˜¯é€šè¿‡åŒ… java.lang ä¸­å®šä¹‰çš„ç±» Thread æ¥å®ç°çš„ã€‚å½“ç”Ÿæˆäº†ä¸€ä¸ª Thread ç±»åå°±äº§ç”Ÿäº†ä¸€ä¸ªçº¿ç¨‹ã€‚é€šè¿‡è¯¥å¯¹è±¡å®ä¾‹ï¼Œå¯ä»¥å¯åŠ¨çº¿ç¨‹ã€ç»ˆæ­¢çº¿ç¨‹ï¼Œæˆ–æš‚æ—¶æŒ‚èµ·çº¿ç¨‹</p>
<p>miançº¿ç¨‹å’ŒThread-0ã€â€¦å­çº¿ç¨‹ï¼Œ&#x3D;&#x3D;ä¸»çº¿ç¨‹ç»“æŸä¸ä¸€å®šæ„å‘³æ•´ä¸ªè¿›ç¨‹ç»“æŸ&#x3D;&#x3D;ï¼Œæ­¤æ—¶å­çº¿ç¨‹å¯èƒ½è¿˜åœ¨è¿è¡Œä¸­ï¼Œè€Œåº”ç”¨ç¨‹åºè¿˜åœ¨è¿è¡Œä¸­ï¼Œåœ¨ä¸»çº¿ç¨‹ç»“æŸçš„åŸºç¡€ä¸Šå½“æ‰€æœ‰çš„å­çº¿ç¨‹ä¹Ÿç»“æŸæ‰æ„å‘³ç€æ•´ä¸ªè¿›ç¨‹ç»“æŸã€‚</p>
</blockquote>
<p>çº¿ç¨‹å…±æœ‰ 4 ç§çŠ¶æ€ï¼šæ–°å»ºï¼ˆNewï¼‰ã€å¯è¿è¡Œï¼ˆRunnableï¼‰ã€æ­»äº¡ï¼ˆDeadï¼‰ã€é˜»å¡ï¼ˆBlockedï¼‰</p>
<ul>
<li><p><strong>æ–°å»ºï¼ˆNewï¼‰ï¼š</strong></p>
<p>  çº¿ç¨‹å¯¹è±¡åˆšåˆšåˆ›å»ºï¼Œè¿˜æœªå¯åŠ¨ï¼ˆNewï¼‰ã€‚æ­¤æ—¶è¿˜å¤„äºä¸å¯è¿è¡ŒçŠ¶æ€ï¼Œä½†å·²æœ‰äº†ç›¸åº”å†…å­˜ç©ºé—´åŠå…¶ä»–èµ„æº</p>
</li>
<li><p><strong>å¯è¿è¡Œï¼ˆRunnableï¼‰ï¼š</strong>ï¼ˆç»†åŒ–ä¸ºä¸¤ä¸ªçŠ¶æ€ï¼‰</p>
<p>  æ­¤æ—¶çº¿ç¨‹å·²ç»å¯åŠ¨ï¼Œå¤„äºçº¿ç¨‹çš„ <code>run()</code> æ–¹æ³•ä¸­ã€‚è¿™ç§æƒ…å†µä¸‹çº¿ç¨‹å¯èƒ½æ­£åœ¨è¿è¡Œï¼›ä¹Ÿå¯èƒ½æ²¡æœ‰è¿è¡Œï¼Œä½†åªè¦ CPU ç©ºé—²å°±ä¼šç«‹åˆ»è¿è¡Œã€‚</p>
<p>  å¯ä»¥è¿è¡Œä½†æ²¡åœ¨è¿è¡Œçš„çº¿ç¨‹éƒ½æ’åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œè¿™ä¸ªé˜Ÿåˆ—ç§°ä¸º<strong>å°±ç»ªé˜Ÿåˆ—</strong>ã€‚</p>
<p>  å¯è¿è¡ŒçŠ¶æ€ä¸‹ï¼Œè¿è¡Œä¸­çš„çº¿ç¨‹å¤„äº<strong>è¿è¡ŒçŠ¶æ€ï¼ˆRunningï¼‰</strong>ï¼Œæœªè¿è¡Œçº¿ç¨‹å¤„äº<strong>å°±ç»ªçŠ¶æ€ï¼ˆReadyï¼‰</strong>ã€‚</p>
<p>  è°ƒç”¨ <code>start()</code> æ–¹æ³•å¯ä»¥è®©çº¿ç¨‹è¿›å…¥å¯è¿è¡ŒçŠ¶æ€ã€‚</p>
</li>
<li><p><strong>æ­»äº¡ï¼ˆDeadï¼‰ï¼š</strong></p>
<p>  <strong>çº¿ç¨‹æ­»äº¡ï¼ˆTerminatedï¼‰</strong>çš„åŸå› æœ‰ä¸¤ä¸ªï¼šä¸€æ˜¯ <code>run()</code> æ–¹æ³•æœ€åä¸€ä¸ªè¯­å¥æ‰§è¡Œå®Œæ¯•ï¼ŒäºŒæ˜¯çº¿ç¨‹é‡åˆ°å¼‚å¸¸é€€å‡º</p>
</li>
<li><p><strong>é˜»å¡ï¼ˆBlockedï¼‰ï¼š</strong></p>
<p>  ä¸€ä¸ªæ­£å¸¸è¿è¡Œçš„çº¿ç¨‹å› ä¸ºç‰¹æ®ŠåŸå› è¢«æš‚åœæ‰§è¡Œï¼Œå°±è¿›å…¥é˜»å¡çŠ¶æ€ï¼ˆBlockedï¼‰ã€‚</p>
<p>  é˜»å¡æ—¶çº¿ç¨‹ä¸èƒ½è¿›å…¥å°±ç»ªå¯¹æµæ’é˜Ÿï¼Œå¿…é¡»ç­‰åˆ°å¼•èµ·é˜»å¡çš„åŸå› æ¶ˆé™¤ï¼Œæ‰èƒ½é‡æ–°è¿›å…¥é˜Ÿåˆ—æ’é˜Ÿã€‚</p>
<p>  å¼•èµ·é˜»å¡çš„æ–¹æ³•å¾ˆå¤šï¼Œ<code>sleep()</code> å’Œ <code>wait()</code> æ˜¯ä¸¤ä¸ªå¸¸ç”¨çš„é˜»å¡æ–¹æ³•</p>
</li>
<li><p><strong>ä¸­æ–­çº¿ç¨‹ï¼š</strong></p>
<ul>
<li><p><code>void interrupt()</code>ï¼šå‘ä¸€ä¸ªçº¿ç¨‹å‘é€ä¸€ä¸ªä¸­æ–­è¯·æ±‚ï¼Œå¹¶æŠŠè¯¥çº¿ç¨‹çš„ interruptd çŠ¶æ€å˜ä¸º trueã€‚</p>
<p>  ä¸­æ–­é˜»å¡çº¿ç¨‹çš„åœºåˆï¼Œä¼šæŠ›å‡º InterruptException å¼‚å¸¸</p>
</li>
<li><p><code>static boolean interrupted()</code>ï¼šæ£€æµ‹å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼Œå¹¶é‡ç½®çŠ¶æ€ interrupted çš„å€¼ã€‚</p>
<p>  è¿ç»­è°ƒç”¨è¯¥æ–¹æ³•çš„åœºåˆï¼Œç¬¬äºŒæ¬¡è°ƒç”¨ä¼šè¿”å› false</p>
</li>
<li><p><code>boolean isInterrupted()</code>ï¼šæ£€æµ‹å½“å‰çº¿ç¨‹æ˜¯å¦ä¸­æ–­ã€‚ä¸æ”¹å˜ interrupted çš„å€¼</p>
</li>
</ul>
</li>
</ul>
<h2><span id="162-çº¿ç¨‹çš„ä½¿ç”¨">16.2 çº¿ç¨‹çš„ä½¿ç”¨</span></h2><p>åœ¨ Java ä¸­çº¿ç¨‹ä½¿ç”¨æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<ol>
<li><p>ç»§æ‰¿ <code>Thread</code> ç±»ï¼Œé‡å†™ <code>run</code> æ–¹æ³•</p>
<blockquote>
<pre><code class="java">public class Thread implements Runnable		//å¯è§ Thread ä¹Ÿæ˜¯å®ç°äº† Runable æ¥å£
</code></pre>
</blockquote>
</li>
<li><p>å®ç° <code>Runable</code> æ¥å£ï¼Œé‡å†™ <code>run</code> æ–¹æ³•</p>
</li>
</ol>
<h3><span id="1621-ç»§æ‰¿-thread-ç±»">16.2.1 ç»§æ‰¿ Thread ç±»</span></h3><blockquote>
<p>Thread ç±»æ˜¯ Java ç”¨äºè¡¨ç¤ºçº¿ç¨‹çš„ç±»ã€‚é‚£ä¹ˆï¼Œä¸€ä¸ªç±»è¢«å®šä¹‰ä¸ºå…¶å­ç±»ï¼Œåˆ™è¯¥ç±»ä¹Ÿèƒ½ç”¨æ¥è¡¨ç¤ºçº¿ç¨‹</p>
</blockquote>
<pre><code class="java">public static void main(String[] args) &#123;
 Type type = new Type();
 type.start();								//å¼€å§‹çº¿ç¨‹
                                             //å¦‚æœç”¨ run æ–¹æ³•ï¼Œåˆ™è¿˜æ˜¯åœç•™åœ¨ä¸»çº¿ç¨‹
                                             //  é‚£æ ·ï¼Œç›¸å½“äº ä¸²è¡Œã€‚æ‰§è¡Œå®Œæ¯•æ‰ç»§ç»­
&#125;
class Type extends Thread &#123;						//å…ˆç»§æ‰¿ Thread ç±»
 int i = 0;
 @Override
 public void run() &#123;
     while (true) &#123;
         System.out.println(i);
         try &#123;
             Thread.sleep(100);				//ä¼‘çœ  100 æ¯«ç§’
         &#125; catch (InterruptedException e) &#123;
             e.printStackTrace();
         &#125;
         if (i++ == 10) &#123;					//i = 10 æ—¶åœæ­¢å¾ªç¯
             break;
         &#125;
     &#125;
 &#125;
&#125;
</code></pre>
<p><strong>å…³äº <code>start()</code> æ–¹æ³•</strong></p>
<pre><code class="java">public synchronized void start() &#123;
    ...
    start0();
&#125;

private native void start0();					//start0 æ˜¯ nativeã€‚å³ï¼Œåº•å±‚æ–¹æ³•
</code></pre>
<ol>
<li><code>start()</code> æ–¹æ³•è°ƒç”¨äº†ä¸€ä¸ª <code>start0()</code> åº•å±‚æ–¹æ³•</li>
<li><code>start0()</code> æ˜¯æœ¬åœ°æ–¹æ³•ï¼Œ<u>ç”± JVM è°ƒç”¨</u>ï¼Œåº•å±‚æ˜¯ c&#x2F;c++ å®ç°</li>
<li>çœŸæ­£çš„å¤šçº¿ç¨‹æ•ˆæœï¼Œæ˜¯ <code>start0()</code>ï¼Œè€Œä¸æ˜¯ <code>run()</code></li>
<li><code>start()</code> æ–¹æ³•è°ƒç”¨ <code>start0()</code> æ–¹æ³•åï¼Œè¯¥çº¿ç¨‹ä¸ä¸€å®šä¼šç«‹åˆ»æ‰§è¡Œï¼Œåªæ˜¯å°†çº¿ç¨‹å˜æˆäº†å¯è¿è¡ŒçŠ¶æ€ã€‚å…·ä½“ä½•æ—¶è¿è¡Œï¼Œç”± CPU ç»Ÿä¸€è°ƒåº¦</li>
</ol>
<h3><span id="1622-å®ç°-runable-æ¥å£">16.2.2 å®ç° Runable æ¥å£</span></h3><blockquote>
<p>Runnable æ˜¯ Java ç”¨ä»¥å®ç°çº¿ç¨‹çš„æ¥å£ã€‚ä»æ ¹æœ¬ä¸Šå°†ï¼Œä»»ä½•å®ç°çº¿ç¨‹çš„ç±»éƒ½å¿…é¡»å®ç°è¯¥æ¥å£ã€‚</p>
</blockquote>
<pre><code class="java">public static void main(String[] args) &#123;
 Runnable type = new Type();					//Runable æ²¡æœ‰ start()æ–¹æ³•
 Thread thread = new Thread(type);				//æ‰€ä»¥ï¼Œè¿™é‡Œä½¿ç”¨äº† é™æ€ä»£ç†
 thread.start();								//ä¼ å…¥Thread
&#125;JAVA
class Type implements Runnable &#123;				//è¿™éƒ¨åˆ†å’Œ Thread ç›¸ä¼¼
 @Override
 public void run() &#123;
     int i = 0;
     while (true)&#123;
         System.out.println(i &lt;&lt; i);
         try &#123;
             Thread.sleep(100);
         &#125; catch (InterruptedException e) &#123;
             e.printStackTrace();
         &#125;
         if (++i &gt; 15)&#123;
             break;
         &#125;
     &#125;
 &#125;
&#125;
</code></pre>
<p><strong>å…³äº &#x3D;&#x3D;é™æ€ä»£ç†&#x3D;&#x3D;</strong></p>
<blockquote>
<pre><code class="java">//Threadæºä»£ç 
class Thread implements Runable &#123;&#125;
    ...	
    private Runnable target;  
    ...
 public Thread(Runnable target) &#123;	//æ„é€ å™¨
     init(null, target, &quot;Thread-&quot; + nextThreadNum(), 0);
                                     //è¿™å¥è¯å¯ä»¥å…ˆç†è§£ä¸º this.target = target;
 &#125;
    ...
 public void run() &#123;
     if (target != null) &#123;	
         target.run();		//åœ¨è¿™é‡Œè°ƒç”¨runæ–¹æ³•ï¼Œè¿›è¡ŒåŠ¨æ€ç»‘å®šï¼Œå®é™…çš„è¿è¡Œç±»å‹æ˜¯ä¼ å…¥ä»£ç†çš„ç±»å‹ï¼Œè°ƒç”¨çš„æ˜¯å®ƒå®ç°çš„runæ–¹æ³•ã€‚
     &#125;
 &#125;
    public void start()&#123;
        start0();			//è¿™ä¸ªæ–¹æ³•æ˜¯åº•å±‚JVMå®Œæˆçš„,çœŸæ­£å®ç°å¤šçº¿ç¨‹çš„æ–¹æ³•ã€‚
    &#125;
    public void start0()&#123;
        run();				//è°ƒç”¨run    
    &#125;
    ...
&#125;
</code></pre>
<p>ç›¸å½“äºï¼Œå…ˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œç„¶ååœ¨æ–°çº¿ç¨‹ä¸­è°ƒç”¨ run æ–¹æ³•</p>
</blockquote>
<h3><span id="1623-ç»§æ‰¿-thread-å’Œ-å®ç°-runable-çš„åŒºåˆ«">16.2.3 ç»§æ‰¿ Thread å’Œ å®ç° Runable çš„åŒºåˆ«</span></h3><ol>
<li><p>ä» Java è®¾è®¡æ¥çœ‹ï¼Œä¸¤è€…æœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«ã€‚&#x3D;&#x3D;<code>Thread</code> ç±»æœ¬èº«å°±å®ç°äº† <code>Runable</code> æ¥å£&#x3D;&#x3D;,æ‰€ä»¥åœ¨ç»§æ‰¿çš„æ—¶å€™Threadçš„æ—¶å€™ä¹Ÿè¦å®ç°</p>
</li>
<li><p>&#x3D;&#x3D;å®ç° <code>Runable</code> æ¥å£çš„æ–¹å¼æ›´åŠ é€‚åˆå¤šä¸ªçº¿ç¨‹å…±äº«ä¸€ä¸ªèµ„æºçš„æƒ…å†µï¼Œ&#x3D;&#x3D;ä¸”&#x3D;&#x3D;é¿å…äº†å•ç»§æ‰¿çš„é™åˆ¶&#x3D;&#x3D;ã€‚&#x3D;&#x3D;å»ºè®®ä½¿ç”¨ã€‚&#x3D;&#x3D;</p>
</li>
</ol>
<pre><code class="java">T t1 = new T(&quot;hello&quot;);
Thread thread01 = new Thread(t1);
Thread thread02 = new Thread(t2);//ä¸¤ä¸ªçº¿ç¨‹å…±äº«t1
thread01.start();
thread02.start();
</code></pre>
<pre><code class="java">//ä¸‹é¢è¿™ç§æƒ…å†µä¼šå¯¼è‡´Aæ— æ³•ç»§æ‰¿Treadä½œä¸ºè¿›ç¨‹ä½¿ç”¨ï¼Œå› ä¸ºjavaçš„å•ç»§æ‰¿æœºåˆ¶ï¼Œä½†å¯ä»¥å®ç°Runableæ¥å£æ¥ä½œä¸ºè¿›ç¨‹ä½¿ç”¨
class A extend B implements Runable&#123;&#125;
</code></pre>
<h3><span id="1624-çº¿ç¨‹ä¸­æ­¢">16.2.4 çº¿ç¨‹ä¸­æ­¢</span></h3><ol>
<li><p>å½“çº¿ç¨‹ç»“æŸåï¼Œä¼šè‡ªåŠ¨é€€å‡º</p>
</li>
<li><p>&#x3D;&#x3D;è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨å˜é‡æ¥æ§åˆ¶ <code>run</code> æ–¹æ³•é€€å‡ºçš„æ–¹å¼æ¥åœæ­¢çº¿ç¨‹ï¼Œå³ <strong>é€šçŸ¥æ–¹å¼ã€‚</strong>&#x3D;&#x3D;</p>
<blockquote>
<pre><code class="java">//Aç±»çº¿ç¨‹
public void run() &#123;
while (loop) &#123;					//è¿™ä¸ªåœºåˆï¼Œåªè¦å¤–éƒ¨æ§åˆ¶loop å³å¯
  try &#123;
      Thread.sleep(1);
  &#125; catch (InterruptedException e) &#123;
      e.printStackTrace();
  &#125;
  move();
&#125;
    //æä¾›ä¸€ä¸ªsetLoop
    public void setLoop(boolean loop)&#123;this.loop = loop;&#125;
&#125;
</code></pre>
<pre><code class="java">//å¤–éƒ¨ï¼š
public static void main(Stirng[] args)&#123;
    Thread.sleep(10000);//ä¼‘çœ 10ç§’ç„¶åé€šè¿‡æ§åˆ¶çº¿ç¨‹å†…éƒ¨å˜é‡ç»ˆæ­¢è¿›ç¨‹
      a.setLoop(false);//è®©å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¸­æ­¢  
&#125;
</code></pre>
<p>å¦å¤–è¿™ç§æ–¹æ³•è¿˜å¯ä»¥åœ¨å…¶ä»–çš„çº¿ç¨‹ä¸­ä½¿ç”¨è€Œä¸ä»…ä»…å±€é™äºä¸»çº¿ç¨‹(mainæ–¹æ³•å†…)ï¼Œæ¯”å¦‚çº¿ç¨‹bè¦è®©çº¿ç¨‹aä¸­æ­¢å°±å¯ä»¥ç”¨è¿™ç§æ–¹æ³•ï¼Œ</p>
</blockquote>
</li>
</ol>
<h3><span id="1625-çº¿ç¨‹å¸¸ç”¨æ–¹æ³•">16.2.5 çº¿ç¨‹å¸¸ç”¨æ–¹æ³•</span></h3><ul>
<li><p>&#x3D;&#x3D;<code>setName(name)</code>ï¼šè®¾ç½®çº¿ç¨‹åç§°ï¼Œä½¿ä¹‹ä¸å‚æ•° name ç›¸&#x3D;&#x3D;åŒ</p>
</li>
<li><p><code>getName()</code>ï¼šè¿”å›çº¿ç¨‹åç§°</p>
</li>
<li><p>&#x3D;&#x3D;<code>start()</code>ï¼šçº¿ç¨‹å¼€å§‹æ‰§è¡Œã€‚JVM è°ƒç”¨ <code>start0</code> æ–¹æ³•&#x3D;&#x3D;</p>
<p>  è¯¥æ–¹æ³•ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œæ–°çº¿ç¨‹è°ƒç”¨ <code>run</code>ã€‚</p>
</li>
<li><p><code>run()</code>ï¼šåˆ°ä¸‹é¢ç©è·‘æ­¥</p>
<p>  å°±æ˜¯ç®€å•çš„æ–¹æ³•è°ƒç”¨ï¼Œä¸ä¼šäº§ç”Ÿæ–°çº¿ç¨‹ã€‚</p>
</li>
<li><p><code>setPriority(int priority)</code>ï¼šæ›´æ”¹çº¿ç¨‹ä¼˜å…ˆçº§</p>
<p>  <code>getPriority()</code>ï¼šè·å–<strong>çº¿ç¨‹ä¼˜å…ˆçº§</strong></p>
<p>  priority èŒƒå›´ï¼š</p>
<ul>
<li>MAX_PRIORITYï¼šæœ€é«˜ä¼˜å…ˆçº§ï¼ˆ10ï¼‰</li>
<li>MIN_PRIORITYï¼šæœ€ä½ä¼˜å…ˆçº§ï¼ˆ1ï¼‰</li>
<li>NORM_PRIORITYï¼šä¸é«˜ä¸ä½ï¼ŒçœŸæ˜¯å¥½æäº†çš„ä¼˜å…ˆçº§ï¼ˆ5ï¼‰</li>
</ul>
<p>  æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ª<strong>ä¼˜å…ˆçº§</strong>ã€‚Java çº¿ç¨‹è°ƒåº¦é‡‡ç”¨å¦‚ä¸‹ä¼˜å…ˆçº§ç­–ç•¥ï¼š</p>
<ul>
<li>ä¼˜å…ˆçº§é«˜çš„å…ˆæ‰§è¡Œï¼Œä¼˜å…ˆçº§ä½çš„åæ‰§è¡Œ</li>
<li>æ¯ä¸ªçº¿ç¨‹åˆ›å»ºæ—¶ä¼šè¢«è‡ªåŠ¨åˆ†é…ä¸€ä¸ªä¼˜å…ˆçº§ã€‚é»˜è®¤çš„åœºåˆï¼Œç»§æ‰¿çˆ¶ç±»ä¼˜å…ˆçº§</li>
<li>ä»»åŠ¡ç´§æ€¥çš„çº¿ç¨‹ï¼Œä¼˜å…ˆçº§è¾ƒé«˜</li>
<li>åŒä¼˜å…ˆçº§çº¿ç¨‹æŒ‰ â€œ<strong>å…ˆè¿›å…ˆå‡º</strong>â€ åŸåˆ™è°ƒåº¦</li>
</ul>
</li>
<li><p><code>sleep(int millsecond)</code>ï¼šè®©çº¿ç¨‹ä¼‘çœ æŒ‡å®šçš„æ—¶é—´</p>
<p>  è¯¥æ–¹æ³•æ˜¯ Thread ç±»çš„é™æ€æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨</p>
</li>
<li><p>&#x3D;&#x3D;<code>interrupt()</code>ï¼šä¸­æ–­çº¿ç¨‹ï¼ˆä¸æ˜¯ ä¸­æ­¢ï¼‰&#x3D;&#x3D;</p>
</li>
</ul>
<h4><span id="x3dx3djavaä¸­æ–­çº¿ç¨‹interruptx3dx3d">&#x3D;&#x3D;Javaä¸­æ–­çº¿ç¨‹ï¼ˆinterruptï¼‰&#x3D;&#x3D;</span></h4><h4><span id="æ¦‚å¿µ">æ¦‚å¿µ</span></h4><blockquote>
<p>å½“ <code>A</code> çº¿ç¨‹æƒ³è®© <code>B</code> çº¿ç¨‹ç»ˆæ­¢è¿è¡Œï¼Œåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿåœ¨Javaä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥åˆ©ç”¨ <code>stop</code> æ–¹æ³•æ¥ä½¿ä¸€ä¸ªçº¿ç¨‹ç»ˆæ­¢ï¼Œä½†æ˜¯è¯¥æ–¹æ³•å·²ç»è¢«åºŸå¼ƒäº†ï¼Œä¸è¦è¿™ä¹ˆç”¨ã€‚</p>
<p>ç°åœ¨å¯ä»¥åœ¨ <code>A</code> çº¿ç¨‹ä¸­è°ƒç”¨ <code>B</code> çº¿ç¨‹çš„ <code>interrupt()</code> æ–¹æ³•ï¼Œæ¥ä½¿ <code>B</code> çº¿ç¨‹çŸ¥é“æœ‰çº¿ç¨‹æƒ³è¦ä½¿è‡ªå·±ç»ˆæ­¢ï¼Œ&#x3D;&#x3D;ä½†æ˜¯æ˜¯å¦ç»ˆæ­¢å–å†³äº <code>B</code> çº¿ç¨‹è‡ªå·±ï¼Œ<code>B</code> å®Œå…¨å¯ä»¥ä¸ç†ä¼šè¿™ä¸ªç»ˆæ­¢è¯·æ±‚ã€‚&#x3D;&#x3D;ï¼ˆ&#x3D;&#x3D;å½“ç„¶æœ€å¥½ä¸è¦è¿™ä¹ˆåš&#x3D;&#x3D;ï¼‰ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ç»†èŠ‚ã€‚</p>
</blockquote>
<h4><span id="ç›¸å…³å‡½æ•°ä»‹ç»">ç›¸å…³å‡½æ•°ä»‹ç»</span></h4><blockquote>
<ul>
<li><code>void interrupt()</code></li>
</ul>
<p>ä¸­æ–­è¿™ä¸ªçº¿ç¨‹ã€‚</p>
<ul>
<li><code>boolean isInterrupted()</code></li>
</ul>
<p>æ£€æŸ¥è¿™ä¸ªçº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ã€‚</p>
<ul>
<li><p><code>static boolean interrupted()</code></p>
<p>æ£€æŸ¥<strong>å½“å‰çº¿ç¨‹</strong>æ˜¯å¦è¢«ä¸­æ–­ï¼Œè¯¥æ–¹æ³•åœ¨è°ƒç”¨åè¿˜ä¼šæ¸…é™¤è¯¥çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ã€‚</p>
</li>
</ul>
</blockquote>
<h4><span id="ç¤ºä¾‹è§£é‡Š">ç¤ºä¾‹è§£é‡Š</span></h4><blockquote>
<ul>
<li><p><code>boolean isInterrupted()</code> æ–¹æ³•å’Œ <code>static boolean interrupted()</code> æ–¹æ³•åŒºåˆ«</p>
<p>å¦‚ä¸‹ä»£ç é¦–å…ˆæµ‹è¯• <code>boolean isInterrupted()</code> æ–¹æ³•ã€‚</p>
<pre><code class="java">public static void main(String[] args) &#123;
    Thread.currentThread().interrupt();
    System.out.println(Thread.currentThread().isInterrupted()); // true
    System.out.println(Thread.currentThread().isInterrupted()); // true
&#125;
</code></pre>
</li>
</ul>
<pre><code class="java">ä¼šå‘ç°ä¸¤æ¬¡è¾“å‡ºéƒ½æ˜¯ `true` ã€‚

æ¥ç€æµ‹è¯• `static boolean interrupted()` æ–¹æ³•ã€‚

    public static void main(String[] args) &#123;
        Thread.currentThread().interrupt();
        System.out.println(Thread.interrupted());  // true
        System.out.println(Thread.interrupted());  // false
    &#125;
</code></pre>
<p>æµ‹è¯•å‘ç°ç¬¬ä¸€æ¬¡è¾“å‡ºæ˜¯ true ï¼Œè€Œç¬¬äºŒæ¬¡è¾“å‡ºæ˜¯ false ï¼Œè¯´æ˜&#x3D;&#x3D;è¿™ä¸ªæ–¹æ³•åœ¨è°ƒç”¨åä¼šæ¸…é™¤çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€&#x3D;&#x3D;ã€‚</p>
<ul>
<li><p>ä¸­æ–­ä¸”ä¸ç†ä¼š</p>
<p>è¿™é‡Œæˆ‘ä»¬è®©ä¸»çº¿ç¨‹ä¸­æ–­çº¿ç¨‹ <code>aThread</code> ï¼Œ<u>ä½†æ˜¯ <code>aThread</code> çº¿ç¨‹<strong>ä¸ç†ä¼š</strong></u>(æœ€å¥½ä¸è¦æ€ä¹ˆåš)ï¼Œçœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="java">public static void main(String[] args)&#123;
    // create and start aThread
    Runnable r = () -&gt; &#123;			//ä¸€ä¸ªlamdaè¡¨è¾¾å¼ï¼Œè¡¨ç¤ºçš„æ˜¯å®ç°Runableæ¥å£çš„ä¸€ä¸ªå¯¹è±¡ï¼ŒRunableæ˜¯å‡½æ•°å¼æ¥å£ï¼Œåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•runã€‚
        while (true) &#123;
            System.out.println(&quot;I&#39;m alive&quot;);
        &#125;
    &#125;;
    Thread aThread = new Thread(r);
    aThread.start();
                
    // interrupt aThread
    aThread.interrupt();
&#125;
</code></pre>
</li>
</ul>
<p>æµ‹è¯•å‘ç° <code>aThread</code> çº¿ç¨‹çš„è¿è¡Œæ²¡æœ‰ä»»ä½•å½±å“ï¼Œè¿˜æ˜¯ä¸€ç›´è¾“å‡º <code>I&#39;m alive</code> ã€‚</p>
<ul>
<li><p>ä¸€èˆ¬ç”¨æ³•</p>
<p>æ—¢ç„¶å¦‚æœä¸­æ–­ä¸è¢«å¤„ç†çš„è¯ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœï¼ŒæŒ‰åº”è¯¥æ€ä¹ˆå“åº”ä¸­æ–­å‘¢ï¼Ÿåº”è¯¥åœ¨çº¿ç¨‹ä¸­ä¸€ç›´åˆ¤æ–­çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼Œå¦‚æœçº¿ç¨‹è¢«ä¸­æ–­ï¼Œåº”è¯¥æ ¹æ®å½“å‰ä»»åŠ¡çš„è¦æ±‚é€‰æ‹©æ¥ä¸‹æ¥çš„å·¥ä½œï¼Œåœ¨ç»“æŸçº¿ç¨‹å‰å…³é—­å¿…è¦çš„èµ„æºã€‚çœ‹ä¸‹é¢çš„ä»£ç ã€‚</p>
<pre><code class="java">public static void main(String[] args)&#123;
    // create and start aThread
    Runnable r = () -&gt; &#123;
        try &#123;
            while (!Thread.currentThread().isInterrupted()) &#123;
                //do work
                System.out.println(&quot;I&#39;m alive&quot;);    //å½“å‰çº¿ç¨‹æœªä¸­æ–­
            &#125;
            System.out.println(&quot;I ll die&quot;);			//çº¿ç¨‹è¢«ä¸­æ–­äº†
        &#125; finally &#123;
            // close some resources	
        &#125;
                
    &#125;;
    Thread aThread = new Thread(r);					//é™æ€ä»£ç†
    aThread.start();
                
    try &#123;
        Thread.currentThread().sleep(1);
    &#125; catch (InterruptedException e) &#123;
        e.printStackTrace();
    &#125;
    // interrupt aThread							//ä¸­æ–­è¿›ç¨‹
    aThread.interrupt();
&#125;
</code></pre>
</li>
</ul>
<p>çº¿ç¨‹åœ¨æ²¡æœ‰è¢«ä¸­æ–­æ—¶ï¼Œä¸€ç›´æ‰§è¡Œè‡ªå·±çš„ä»»åŠ¡ï¼Œå½“è¢«ä¸­æ–­æ—¶ï¼Œå°±ä¼šè·³å‡ºå¾ªç¯ï¼Œ&#x3D;&#x3D;å¹¶åœ¨ <code>finally</code> ä¸­å…³é—­ç›¸åº”çš„èµ„æºå’Œå¹¶åšä¸€äº›æ¸…ç†æ“ä½œ&#x3D;&#x3D;ã€‚</p>
<ul>
<li><p>çº¿ç¨‹è¢«é˜»å¡æ—¶</p>
<p>ä¸Šé¢çš„æƒ…å†µåœ¨çº¿ç¨‹æ²¡æœ‰è¢«é˜»å¡æ—¶å¯ä»¥è¿è¡Œï¼Œä½†æ˜¯&#x3D;&#x3D;å½“çº¿ç¨‹è¢«é˜»å¡æ—¶ï¼Œçº¿ç¨‹æ˜¯æ— æ³•æ£€æŸ¥çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€çš„ï¼Œ&#x3D;&#x3D;æ‰€ä»¥å¼•å…¥äº† <code>InterruptedException</code> å¼‚å¸¸å¸®åŠ©ä¸­æ–­é˜»å¡ã€‚ä¸åŒçš„é˜»å¡è¿˜æœ‰ä¸€äº›åŒºåˆ«ï¼Œå…·ä½“å¦‚ä¸‹ã€‚</p>
<ul>
<li><p>çº¿ç¨‹è¢« <code>sleep()</code> æ–¹æ³•æˆ– <code>join()</code> æ–¹æ³•é˜»å¡æ—¶</p>
<p>å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="java">public static void main(String[] args) &#123;
    // create and start aThread
    Runnable r = () -&gt; &#123;
        try &#123;
            Thread.currentThread().sleep(5000);
        &#125; catch (InterruptedException e) &#123;
            System.out.println(&quot;die&quot;);
            e.printStackTrace();
        &#125; finally &#123;
            // close some resources
        &#125;
    &#125;;
    Thread aThread = new Thread(r);
    aThread.start();
                                
    try &#123;
        Thread.currentThread().sleep(500);
    &#125; catch (InterruptedException e) &#123;
        e.printStackTrace();
    &#125;
    // interrupt aThread
    aThread.interrupt();
&#125;
</code></pre>
</li>
</ul>
</li>
</ul>
<p>åœ¨è¿™äº›çº¿ç¨‹ä¸Šè°ƒç”¨ <code>interrupt()</code> æ–¹æ³•æ—¶ï¼Œ<code>sleep()/join()</code> æ–¹æ³•ä¼šè¢«ä¸­æ–­ä¸å†æ‰§è¡Œï¼Œå®ƒä¼šæ¸…é™¤ä¸­æ–­çŠ¶æ€å¹¶ç›´æ¥è·³å…¥ <code>catch</code> å—ä¸­æ‰§è¡Œï¼Œæ‰€ä»¥å¦‚æœåœ¨å¾ªç¯ä¸­è°ƒç”¨äº† <code>sleep()</code> æ–¹æ³•ï¼Œå°±ä¸è¦å»æ£€æµ‹ä¸­æ–­çŠ¶æ€äº†ï¼Œå› ä¸ºä¼šç›´æ¥è·³å…¥ <code>catch</code> å—ä¸­æ‰§è¡Œï¼Œåº”è¯¥ç›´æ¥æ•è· <code>InterruptedException</code> å¼‚å¸¸ã€‚</p>
<ul>
<li><p>çº¿ç¨‹è¢« <code>wait()</code> æ–¹æ³•é˜»å¡æ—¶</p>
<p>çº¿ç¨‹è¢« <code>wait()</code> æ–¹æ³•é˜»å¡æ—¶ï¼Œè°ƒç”¨ <code>interrupt()</code> æ–¹æ³•çš„æ•ˆæœå’Œçº¿ç¨‹è¢« <code>sleep()</code> æ–¹æ³•æˆ– <code>join()</code> æ–¹æ³•é˜»å¡çš„æ•ˆæœåŸºæœ¬ä¸€æ ·ï¼Œå®ƒä¹Ÿä¼šæ¸…é™¤ä¸­æ–­çŠ¶æ€å¹¶è·³å…¥ <code>catch</code> å—ä¸­å»æ‰§è¡Œã€‚ä½†æ˜¯æœ‰ä¸€ç‚¹ç‚¹ä¸åŒï¼Œå°±æ˜¯è¢« <code>interrupt()</code> è°ƒç”¨çš„çº¿ç¨‹ä¼šå…ˆå»è·å–è°ƒç”¨ <code>wait()</code> æ–¹æ³•çš„å¯¹è±¡çš„é”ï¼Œè·å–å®Œå¯¹è±¡çš„é”ä¹‹åæ‰ä¼šæŠ›å‡ºå¼‚å¸¸å¹¶è¿›å…¥ <code>catch</code> å—ä¸­å»æ‰§è¡Œï¼Œå¦‚æœè·å¾—ä¸åˆ°é”ï¼Œé‚£ä¹ˆå°±æ— æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œä¹Ÿæ— æ³•è¿›å…¥ <code>catch</code> å—ä¸­ã€‚å¦‚ä¸‹ä»£ç ï¼Œé¦–å…ˆ <code>aThread</code> è·å¾—é”å¹¶ <code>wait</code>ï¼ˆæ³¨æ„ <code>wait()</code> æ–¹æ³•ä¼šé‡Šæ”¾é”ï¼‰ï¼Œç„¶å <code>bThead</code> è·å¾—é”ï¼Œä½†æ˜¯ <code>b</code> æ°¸è¿œä¸é‡Šæ”¾é”ï¼Œåœ¨ <code>aThread</code> <code>wait</code> çš„æ—¶å€™ï¼Œä¸»çº¿ç¨‹è°ƒç”¨ <code>interrupt()</code> å»ä¸­æ–­ <code>aThread</code>ï¼Œä½†æ˜¯ç”±äº <code>aThread</code> æ°¸è¿œæ— æ³•è·å¾—é”ï¼Œæ‰€ä»¥å®ƒä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä¹Ÿä¸ä¼šè¿›å…¥åˆ° <code>catch</code> å—ä¸­è¿è¡Œã€‚ä»£ç å¦‚ä¸‹ã€‚</p>
</li>
</ul>
<pre><code class="java">
        public static void main(String[] args) &#123;

            Runnable r = () -&gt; &#123;
                try &#123;
                    synchronized (o) &#123;
                        System.out.println(&quot;aThread get lock&quot;);
                        o.wait(10000);
                    &#125;
                &#125; catch (InterruptedException e) &#123;
                    e.printStackTrace(); // can&#39;t come here
                &#125; 
            &#125;;
            Thread aThread = new Thread(r);
            aThread.start();

            Runnable r2 = () -&gt; &#123;
                try &#123;
                    Thread.currentThread().sleep(250);
                    synchronized (o) &#123;
                        System.out.println(&quot;bThread get lock&quot;);
                        while (true) &#123;
                        &#125;
                    &#125;
                &#125; catch (InterruptedException e) &#123;
                    e.printStackTrace();
                &#125;
            &#125;;
            Thread bThread = new Thread(r2);
            bThread.start();

            try &#123;
                Thread.currentThread().sleep(1000);
            &#125; catch (InterruptedException e) &#123;
                e.printStackTrace();
            &#125;
            // interrupt aThread
            aThread.interrupt();
        &#125;
</code></pre>
<ul>
<li><p>å…¶ä»–é˜»å¡</p>
<p>åœ¨ API ä¸­è¿˜æœ‰å…¶ä»–çš„é˜»å¡æƒ…å†µã€‚å¦‚æœçº¿ç¨‹è¢« <code>InterruptibleChannel</code> çš„IOæ“ä½œé˜»å¡ï¼Œåˆ™è¿™ä¸ªç®¡é“ä¼šè¢«å…³é—­ï¼Œçº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¼šè¢«ç½®ä½ï¼ŒåŒæ—¶ä¼šæŠ›å‡º <code>ClosedByInterruptException</code> å¼‚å¸¸ã€‚</p>
<p>å¦‚æœçº¿ç¨‹è¢« <code>Selector</code> é˜»å¡ï¼Œåˆ™è¿™ä¸ªçº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¼šè¢«ç½®ä½ï¼Œå¹¶ä¸”ç«‹å³ä»é€‰æ‹©æ“ä½œä¸­è¿”å›ï¼Œå¯èƒ½è¿”å›ä¸€ä¸ªéé›¶å€¼ï¼Œå°±åƒ <code>selector</code> çš„ <code>wakeup</code> æ–¹æ³•è¢«è°ƒç”¨ä¸€æ ·ã€‚</p>
<p>è¿™ä¸¤ç§é˜»å¡æˆ‘éƒ½æ²¡æœ‰ç”¨è¿‡ï¼ˆå¤ªèœäº†ï¼‰ï¼Œæ‰€ä»¥æ²¡æœ‰å†™ä»£ç å»æµ‹è¯•ï¼Œä¹‹åé‡åˆ°æˆ‘ä¼šå»æµ‹è¯•ã€‚</p>
<p>é™¤äº†ä»¥ä¸Šè¿™å‡ ç§æƒ…å†µï¼Œå…¶ä»–æƒ…å†µéƒ½ä¼šç½®ä½çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ã€‚</p>
</li>
</ul>
</blockquote>
<ul>
<li><p>&#x3D;&#x3D;<code>yield()</code>ï¼š<strong>çº¿ç¨‹çš„ç¤¼è®©</strong>ã€‚è®©å‡º CPU è®©å…¶ä»–çº¿ç¨‹æ‰§è¡Œã€‚å› ä¸ºç¤¼è®©çš„æ—¶é—´ä¸ç¡®å®šï¼Œæ‰€ä»¥ä¸ä¸€å®šç¤¼è®©æˆåŠŸã€‚&#x3D;&#x3D;</p>
<p>æœ¬è´¨æ˜¯ RUNNING åˆ‡æ¢ä¸º READYï¼Œå³è®©å½“å‰çº¿ç¨‹æ”¾å¼ƒæ‰§è¡Œæƒ</p>
</li>
<li><p><code>wait()</code>ï¼šå¯¼è‡´å½“å‰çº¿ç¨‹ç­‰å¾…</p>
<p>ç›´åˆ°å…¶ä»–çº¿ç¨‹è°ƒç”¨æ­¤å¯¹è±¡çš„ <code>notify()</code> æ–¹æ³•æˆ– <code>notifyAll()</code> æ–¹æ³•æ‰èƒ½å”¤é†’æ­¤çº¿ç¨‹</p>
<p><code>notify()</code>ã€<code>notifyAll()</code>ï¼šå”¤é†’å›  <code>wait()</code> é˜»å¡çš„çº¿ç¨‹ã€‚</p>
<p>è¿™äº›æ–¹æ³•ï¼ˆ<code>wait()</code>ã€<code>notify()</code>ã€<code>notifyAll()</code>ï¼‰åªèƒ½åœ¨ synchrnized æ–¹æ³•æˆ–ä»£ç å—ä¸­è°ƒç”¨</p>
</li>
<li><p>&#x3D;&#x3D;<code>join()</code>ï¼š<strong>çº¿ç¨‹çš„æ’é˜Ÿ</strong>ã€‚æ’é˜Ÿçš„çº¿ç¨‹ä¸€æ—¦æ’å…¥æˆåŠŸï¼Œåˆ™å¿…å®šå…ˆæ‰§è¡Œå®Œæ’é˜Ÿçº¿ç¨‹çš„æ‰€æœ‰ä»»åŠ¡ç„¶åå†æ‰§è¡Œå…¶ä»–è¿›ç¨‹&#x3D;&#x3D;ï¼Œåœ¨å¦ä¸€ä¸ªè¿›ç¨‹è°ƒç”¨ã€‚</p>
<p>å°†å¯¼è‡´å…¶ä»–çº¿ç¨‹çš„ç­‰å¾…ï¼Œç›´åˆ° <code>join()</code> æ–¹æ³•çš„çº¿ç¨‹ç»“æŸ</p>
<p><code>join(long timeout)</code>ï¼šjoinï¼Œä½†æ˜¯æ—¶é—´åˆ°åä¹Ÿèƒ½ç»“æŸå…¶ä»–çº¿ç¨‹çš„ç­‰å¾…</p>
</li>
<li><p><code>isAlive()</code>ï¼šæµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦åœ¨æ´»åŠ¨</p>
</li>
<li><p><code>Thread.currentThread()</code>ï¼šå¼•ç”¨å½“å‰è¿è¡Œä¸­çš„çº¿ç¨‹</p>
</li>
</ul>
<h3><span id="1626-ç”¨æˆ·çº¿ç¨‹å’Œx3dx3då®ˆæŠ¤çº¿ç¨‹x3dx3d">16.2.6 ç”¨æˆ·çº¿ç¨‹å’Œ&#x3D;&#x3D;å®ˆæŠ¤çº¿ç¨‹&#x3D;&#x3D;</span></h3><blockquote>
<p>&#x3D;&#x3D;å¦‚æœå¸Œæœ›å½“mainçº¿ç¨‹ç»“æŸåï¼Œå…¶ä»–å­è¿›ç¨‹è‡ªåŠ¨ç»“æŸï¼Œåªéœ€è¦å°†å…¶è®¾ç½®ä¸ºå®ˆæŠ¤è¿›ç¨‹ã€‚&#x3D;&#x3D;</p>
<p>æ³¨æ„å¦‚æœæœ‰å¦å¤–ä¸€ä¸ªå­è¿›ç¨‹ä¸æ˜¯å®ˆæŠ¤è¿›ç¨‹å´åœ¨mainè¿›ç¨‹ç»“æŸæ—¶ä»ç„¶è¿è¡Œï¼Œé‚£ä¹ˆè¿™ä¸ªè®¾ç½®çš„å®ˆæŠ¤è¿›ç¨‹ä¹Ÿä¸ä¼šéšç€mainè¿›ç¨‹ç»ˆæ­¢è€Œç»ˆæ­¢ï¼Œå°†å…¶è®¾ç½®ä¸ºå®ˆæŠ¤è¿›ç¨‹å±äºæ— æ•ˆæ“ä½œã€‚</p>
</blockquote>
<ul>
<li><p>ç”¨æˆ·çº¿ç¨‹ï¼šä¹Ÿå«å·¥ä½œçº¿ç¨‹ã€‚å½“çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œæ¯•æˆ–é€šçŸ¥æ–¹å¼ç»“æŸ</p>
</li>
<li><p>å®ˆæŠ¤çº¿ç¨‹ï¼šä¸€èˆ¬æ˜¯ä¸ºå·¥ä½œçº¿ç¨‹æœåŠ¡çš„ã€‚&#x3D;&#x3D;å½“æ‰€æœ‰çº¿ç¨‹ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹è‡ªåŠ¨ç»“æŸ&#x3D;&#x3D;</p>
<p>  å¸¸è§çš„å®ˆæŠ¤çº¿ç¨‹ï¼š<strong>åƒåœ¾å›æ”¶æœºåˆ¶</strong></p>
<blockquote>
<pre><code class="java">Thread thraed = new Thread(bullet);
thread.setDeamon(true);//å°†å­çº¿ç¨‹è®¾ç½®ä¸ºä¸»çº¿ç¨‹çš„å®ˆæŠ¤çº¿ç¨‹
thread.start();
</code></pre>
</blockquote>
</li>
</ul>
<h3><span id="x3dx3d1627-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸx3dx3d">&#x3D;&#x3D;16.2.7 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ&#x3D;&#x3D;</span></h3><p>çº¿ç¨‹çš„çŠ¶æ€æœ‰</p>
<ul>
<li><p>NEWï¼šå°šæœªå¯åŠ¨</p>
</li>
<li><p>RUNNABLEï¼šåœ¨ JVM ä¸­æ‰§è¡Œçš„çº¿ç¨‹</p>
<p>  å¯ç»†åˆ†ä¸º READY å’Œ RUNNINGï¼Œè¿™ä¸ªçŠ¶æ€ç”±å†…æ ¸å†³å®šã€‚</p>
</li>
<li><p>BLOCKEDï¼šè¢«é˜»å¡ç­‰å¾…ç›‘è§†å™¨é”å®šçš„çº¿ç¨‹</p>
</li>
<li><p>WAITINGï¼šæ­£ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç‰¹å®šåŠ¨ä½œçš„çº¿ç¨‹</p>
</li>
<li><p>TIMED_WAITINGï¼šæ­£ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç‰¹å®šåŠ¨ä½œè¾¾åˆ°ç­‰å¾…æ—¶é—´çš„çº¿ç¨‹</p>
</li>
<li><p>TERMINATEDï¼šå·²é€€å‡ºçš„çº¿ç¨‹</p>
</li>
</ul>
<p>&#x3D;&#x3D;é‡è¦çš„å›¾ï¼š&#x3D;&#x3D;</p>
<p><img src="https://gitee.com/kilomi/pic-bed/raw/master/img/202310122023919.png" alt="image-20231012202310763"></p>
<h2><span id="x3dx3d163-çº¿ç¨‹çš„äº’æ–¥x3dx3d">&#x3D;&#x3D;16.3 çº¿ç¨‹çš„äº’æ–¥&#x3D;&#x3D;</span></h2><blockquote>
<p>åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œ&#x3D;&#x3D;ä¸€äº›æ•æ„Ÿæ•°æ®ä¸å…è®¸è¢«å¤šä¸ªçº¿ç¨‹<strong>åŒæ—¶è®¿é—®</strong>&#x3D;&#x3D;ã€‚æ­¤æ—¶å°±ç”¨åŒæ­¥è®¿é—®æŠ€æœ¯ï¼Œä¿è¯æ•°æ®åœ¨ä»»æ„æ—¶åˆ»ï¼Œ&#x3D;&#x3D;æœ€å¤šæœ‰ä¸€ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®&#x3D;&#x3D;ï¼Œä»¥ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚</p>
<p>ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼š<strong>çº¿ç¨‹åŒæ­¥</strong>ï¼Œå³å½“æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹å†…å­˜è¿›è¡Œæ“ä½œæ—¶ï¼Œå…¶ä»–çº¿ç¨‹éƒ½ä¸èƒ½å¯¹è¿™ä¸ªå†…å­˜åœ°å€è¿›è¡Œæ“ä½œï¼ˆè¢«é˜»å¡ï¼‰ï¼Œç›´åˆ°è¯¥çº¿ç¨‹å®Œæˆæ“ä½œï¼Œå†è®©ä¸‹ä¸€çº¿ç¨‹è¿›è¡Œæ“ä½œã€‚</p>
</blockquote>
<h3><span id="1631-äº’æ–¥é”">16.3.1 äº’æ–¥é”</span></h3><p><img src="https://gitee.com/kilomi/pic-bed/raw/master/img/202310122132570.png" alt="image-20231012213214200"></p>
<p>åœ¨å¯¹è±¡ä¸ŠåŠ äº†ä¸€æŠŠé”ï¼Œè¿™æŠŠé”åœ¨åŒä¸€æ—¶åˆ»åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹(æ¯”å¦‚t1)å¯ä»¥å¾—åˆ°ï¼Œå¦‚æœä¸€ä¸ªt1å¾—åˆ°è¿™æŠŠé”ï¼Œå¯ä»¥å¯¹å¯¹è±¡æ•°æ®è¿›è¡Œæ“ä½œï¼Œæ“ä½œç»“æŸæŠŠé”è¿”è¿˜ç»™å¯¹è±¡ï¼Œç„¶åå¯¹è±¡åˆä¸Šäº†é”ï¼Œæ¥ç€å…¶ä»–è¿›ç¨‹(t2ã€t3)å’Œè·å¾—è¿‡è¿™æŠŠé”çš„è¿›ç¨‹t1ç»§ç»­äº‰å¤ºé”ï¼Œåœ¨è¿™ä¸€æ—¶åˆ»è¿›ç¨‹t1è¿˜å¯ä»¥ç»§ç»­äº‰å¤ºï¼Œæ‰€ä»¥è¿™æŠŠé”ä¹ŸåŠ ä¸å…¬å¹³é”ï¼ˆ&#x3D;&#x3D;æœ‰å¯èƒ½ä¼šå‡ºç°é”ä¸€ç›´è¢«åŒä¸€ä¸ªå¯¹è±¡è®¿é—®çš„æƒ…å†µï¼Œå¯ä»¥åœ¨äº‰å¤ºé”çš„å¼€å§‹ä¼‘çœ ä¸€æ®µæ—¶é—´)&#x3D;&#x3D;</p>
<pre><code class="java">while (true) &#123;
    try &#123;
        Thread.sleep(100);	//å…ˆè®©è¿›ç¨‹ç­‰å¾…ä¸€æ®µæ—¶é—´å†å¼€å§‹æŠ¢é”ï¼Œå¦‚æœä¼‘çœ æ”¾åœ¨é”é‡Œï¼Œå½“ä¼‘çœ ç»“æŸåï¼Œçº¿ç¨‹1åˆå»äº‰å¤ºåˆ°è¿™æŠŠé”ï¼Œæ‰€ä»¥ä¸€ç›´æ˜¯çº¿ç¨‹1åœ¨å¾—è¿™æŠŠé”
    &#125; catch (InterruptedException e) &#123;			
        e.printStackTrace();
    &#125;
    synchronized (User.class) &#123;
        if (money &lt;= 0) &#123;
            break;
        &#125;
        System.out.println(Thread.currentThread().getName() + &quot;åœ¨å–é’±ï¼Œå‰©ä½™&quot; + (money -= 1000));
    &#125;
&#125;
</code></pre>
<blockquote>
<p>åœ¨ Java è¯­è¨€ä¸­ï¼Œå¼•å…¥äº† â€œå¯¹è±¡äº’æ–¥é”â€ çš„æ¦‚å¿µï¼Œä¹Ÿç§°ä¸ºç›‘è§†å™¨ï¼Œæ¥ä¿è¯&#x3D;&#x3D;å…±äº«æ•°æ®æ“ä½œçš„å®Œæ•´æ€§&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;æ¯ä¸ªå¯¹è±¡éƒ½å¯¹åº”ä¸€ä¸ªå¯ç§°ä¸º â€œäº’æ–¥é”â€ çš„æ ‡è®°ï¼Œ&#x3D;&#x3D;è¿™ä¸ªæ ‡è®°ç”¨æ¥ä¿è¯åœ¨ä»»ä¸€æ—¶åˆ»éƒ½åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®å¯¹è±¡ã€‚ä½¿ç”¨å®ç°æ¥å£Runableçš„æ–¹å¼ï¼Œé€šè¿‡é™æ€ä»£ç†å®ç°å¯¹åŒä¸€ä¸ªå…±äº«æ•°æ®çš„æ“ä½œã€‚</p>
<pre><code class="java">å‡å¦‚æœ‰ä¸‰ä¸ªå”®ç¥¨å£å”®ç¥¨ï¼Œä¸€å…±æœ‰100å¼ ç¥¨ï¼Œå½“ç¥¨æ•°å°äº0æ—¶åˆ™å”®ç¥¨ç»“æŸï¼Œå¦‚æœæ²¡æœ‰å®ç°åŒæ­¥è®¿é—®æŠ€æœ¯ï¼Œå°±ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼šå”®ç¥¨å£1ã€å”®ç¥¨å£2å’Œå”®ç¥¨å£3åŒæ—¶æ£€æŸ¥ç¥¨çš„å¼ æ•°ï¼Œè‹¥æ­¤æ—¶ç¥¨è¿˜å‰©ä½™1å¼ ï¼Œå”®ç¥¨å£1åˆ¤æ–­ç¬¦åˆæ¡ä»¶å°†å‰©ä½™çš„ä¸€å¼ ç¥¨å”®å–å‡ºå»ï¼ˆæ­¤æ—¶çš„ç¥¨æ•°ä¸º0äº†ï¼‰ï¼Œè€Œå…¶ä»–2ä¸ªå”®ç¥¨å£åˆ™ä¼šè¯¯ä»¥ä¸ºæ­¤æ—¶çš„ç¥¨æ•°è¿˜ä¸º1å¼ ã€‚æ¥ç€ç»§ç»­å”®å–ï¼Œå°±ä¼šå¯¼è‡´è¶…å–çš„æƒ…å†µ(å³ç¥¨æ•°ä¸ºè´Ÿæ•°)
Tik tik = new Tik();
new Thread(tik).start();
new Thread(tik).start();
new Thread(tik).start();
//è¿™é‡Œä¸èƒ½ç”¨é€šè¿‡ç»§æ‰¿Threadçš„æ–¹å¼å¼€å¯è¿›ç¨‹ï¼Œç”¨ç»§æ‰¿åçš„é”ä¸æ˜¯ä¸€ä¸ªé”ï¼Œå› ä¸ºæ¯ä¸ªå¯¹è±¡å¯¹åº”ä¸€æŠŠé”,æ‰€ä»¥åœ¨æ“ä½œçš„è¿‡ç¨‹å…¶å®å¹¶æ²¡æœ‰èµ·åˆ°é”çš„ä½œç”¨ï¼Œå¦‚æœè¦ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼å®ç°åŒæ­¥æ–¹æ³•ï¼Œå¯ä»¥åœ¨åœ¨é™æ€æ–¹æ³•æˆ–ä»£ç å—ä¸­å®ç°å½“å‰ç±»çš„é”ï¼Œæ‰€æœ‰çš„å¯¹è±¡å°±å…±ç”¨åŒä¸€æŠŠé”äº†ã€‚
new Tik().start();
new Tik().start();
new Tik().start();
</code></pre>
<p>Java è¯­è¨€ä¸­ï¼Œæœ‰ 2 ç§æ–¹å¼å®ç°<strong>äº’æ–¥é”</strong>ï¼š</p>
<ul>
<li><p>ç”¨å…³é”®å­— volatile å£°æ˜ä¸€ä¸ªå…±äº«æ•°æ®ï¼ˆå˜é‡ï¼‰ã€‚ä¸€èˆ¬å¾ˆå°‘ä½¿ç”¨è¯¥å…³é”®å­—</p>
</li>
<li><p>ç”¨å…³é”®å­— synchronized å£°æ˜å…±äº«æ•°æ®çš„ä¸€ä¸ªæ–¹æ³•æˆ–ä¸€ä¸ªä»£ç </p>
<p>  <u>åœ¨å‰é¢çš„<strong>å”®ç¥¨æ¡ˆä¾‹</strong>ä¸­&#x3D;&#x3D;åªæœ‰ä¸€ä¸ªçº¿ç¨‹å–ç¥¨&#x3D;&#x3D;æœ‰ä¸¤ç§å¯èƒ½ï¼Œ&#x3D;&#x3D;1.çº¿ç¨‹é”åŠ åœ¨runæ–¹æ³•ï¼Œ2.sleepä¸åœ¨runæ–¹æ³•&#x3D;&#x3D;</u></p>
</li>
</ul>
<p>åŒæ­¥çš„å±€é™æ€§ï¼šå¯¼è‡´ç¨‹åºçš„æ‰§è¡Œ<u>æ•ˆç‡è¦é™ä½ã€‚</u></p>
<p><strong>éé™æ€</strong>çš„å¯¹è±¡ï¼Œ&#x3D;&#x3D;åŒæ­¥æ–¹æ³•çš„é”å¯ä»¥æ˜¯ <strong>this</strong>&#x3D;&#x3D;ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å¯¹è±¡ï¼Œæ¯”å¦‚è¯´è¿™ä¸ªå¯¹è±¡æ˜¯ç±»çš„ä¸€ä¸ªå±æ€§ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºå½“å‰å¯¹è±¡çš„é”ï¼ˆ&#x3D;&#x3D;è¦æ±‚æ˜¯åŒä¸€å¯¹è±¡çš„&#x3D;&#x3D;ï¼ˆè¢«å¤šä¸ªçº¿ç¨‹æ“ä½œï¼‰ï¼‰ï¼Œé€‚ç”¨äºå®ç°Runnableæ¥å£çš„ç±»å¯¹è±¡ï¼Œä½¿ç”¨çš„æ˜¯<strong>â€å¯¹è±¡é”â€œ</strong></p>
<ol>
<li><p>æ·»åŠ åœ¨æ–¹æ³•ä¸Šï¼ŒåŒæ­¥æ–¹æ³•</p>
<pre><code class="java">public sychronized  void m1()&#123;&#125;
</code></pre>
</li>
<li><p>æ·»åŠ åœ¨æ–¹æ³•å†…ï¼ŒåŒæ­¥ä»£ç å—</p>
<pre><code class="java">public void m1()&#123;
    sychronized(this)&#123;	//thiså¯ä»¥ä¼ é€’ä¸º
        ...
    &#125;
&#125;
</code></pre>
</li>
</ol>
<p><strong>é™æ€</strong>å¯¹è±¡ï¼Œ&#x3D;&#x3D;åŒæ­¥æ–¹æ³•çš„é”ä¸º<strong>å½“å‰ç±»</strong>æœ¬èº«&#x3D;&#x3D;ï¼Œé€‚ç”¨äºä½¿ç”¨ç»§æ‰¿Threadçš„æ–¹å¼ï¼Œå¤šä¸ªå½“å‰ç±»å¯¹è±¡éƒ½ä½¿ç”¨<strong>â€˜â€™ç±»çš„é”â€˜â€™ã€‚</strong></p>
<ol>
<li><p>æ·»åŠ åœ¨æ–¹æ³•ä¸Šï¼Œæ–¹æ³•å«åŒæ­¥æ–¹æ³•</p>
<pre><code class="java">public synchronized static void m1()&#123;&#125;
</code></pre>
</li>
<li><p>æ·»åŠ åœ¨æ–¹æ³•å†…ï¼Œå«åŒæ­¥ä»£ç å—</p>
<pre><code class="java">public static void m2()&#123;
   synchronized (å½“å‰ç±».class)&#123;	//è¿™é‡Œæ‹¬å·ä¸èƒ½å†å¡«thisäº†ï¼Œå› ä¸ºæ˜¯é™æ€æ–¹æ³•(åªèƒ½è®¿é—®é™æ€åŸŸ)ï¼Œæ‰€ä»¥æ˜¯é™æ€é”
   &#125;
&#125;
</code></pre>
</li>
</ol>
</blockquote>
<ol>
<li><p><strong>åŒæ­¥ä»£ç å—</strong>(å°½é‡ä½¿ç”¨)</p>
<pre><code class="java">synchronized (å¯¹è±¡) &#123;		//å¾—åˆ°å¯¹è±¡çš„é”ï¼Œæ‰èƒ½æ“ä½œåŒæ­¥ä»£ç 
    éœ€è¦è¢«åŒæ­¥ä»£ç ;
&#125;
</code></pre>
<p> åœ¨ç¬¬ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”å®šæ ‡è®°æ—¶ï¼Œå¦‚æœå¦ä¸€ä¸ªçº¿ç¨‹ä¼å›¾æ‰§è¡Œè¯¥ä»£ç å—è¯­å¥ï¼Œå°†ä»å¯¹è±¡ä¸­ç´¢å–é”å®šæ ‡è®°ã€‚</p>
<p> å› ä¸ºæ­¤æ—¶è¯¥æ ‡è®°ä¸å¯å¾—ï¼Œæ•…è¯¥çº¿ç¨‹ä¸èƒ½ç»§ç»­æ‰§è¡Œï¼Œè€Œæ˜¯åŠ å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚</p>
<p> ç¨‹åºè¿è¡Œå®Œ synchronized ä»£ç å—åï¼Œé”å®šæ ‡è®°ä¼šè¢«è‡ªåŠ¨è¿”è¿˜ã€‚å³ä½¿è¯¥åŒæ­¥ä»£ç å—æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸€ä¸ªçº¿ç¨‹å¤šæ¬¡è°ƒç”¨è¯¥åŒæ­¥ä»£ç å—çš„åœºåˆï¼Œä¹Ÿä¼šåœ¨æœ€å¤–å±‚æ‰§è¡Œå®Œæ¯•åæ­£ç¡®è¿”è¿˜ã€‚</p>
</li>
<li><p><strong>æ”¾åœ¨æ–¹æ³•å£°æ˜ä¸­</strong>ï¼Œè¡¨ç¤ºæ•´ä¸ªæ–¹æ³•ä¸º<strong>åŒæ­¥æ–¹æ³•</strong></p>
<p> å› ä¸º &#x3D;&#x3D;synchronized è¯­å¥çš„å‚æ•°å¿…é¡»æ˜¯ this&#x3D;&#x3D;ï¼Œå› æ­¤å…è®¸ä¸‹é¢è¿™ç§ç®€æ´çš„å†™æ³•ï¼š</p>
<pre><code class="java">public synchronized void method()&#123;
    ä»£ç ;
&#125;
</code></pre>
</li>
</ol>
<h4><span id="å”®ç¥¨ä»£ç ">å”®ç¥¨ä»£ç </span></h4><pre><code class="java">public class Tikets &#123;
    public static void main(String[] args) &#123;
//        Tik2 tik1 = new Tik2();
//        new Thread(tik1).start();
//        new Thread(tik1).start();
//        new Thread(tik1).start();
        new Tik().start();
        new Tik().start();
        new Tik().start();
    &#125;
&#125;


class Tik2 implements Runnable &#123;//ç”¨å®ç°æ¥å£çš„æ–¹å¼ï¼Œæ¯ä¸ªå¯¹è±¡å¯¹åº”ä¸€æŠŠé”
    private  int tikits = 10;
    boolean loop = true;
                                                        //åœ¨synchronnizedåªè¦ä¼ ä¸€ä¸ªå±äºå½“å‰å¯¹è±¡çš„å±æ€§																				ä¹Ÿå¯ä»¥å½“ä½œé”(å±æ€§å¿…é¡»æ˜¯ä¸ªå¯¹è±¡)
                                                    //è¿™æ ·åšè¿˜éœ€è¦å°†runæ–¹æ³•è®¾ç½®ä¸ºåŒæ­¥æ–¹æ³•æ‰å¯ä»¥é˜²æ­¢å‡ºç°ç¥¨è¶…å–çš„æƒ…														å†µ(å³åœ¨runæ–¹æ³•ç­¾åå¤„æ·»åŠ synchronizedè®¾ç½®ä¸ºåŒæ­¥æ–¹æ³•)
    public synchronized void m() &#123;						/*synchronized (Integer.valueOf(tikits))&#123;
                                                            if (tikits &lt;= 0) &#123;...&#125;
                                                                ...
                                                                System.out.println(...);&#125;
            
            */
         try &#123;
            Thread.sleep(50);
        &#125; catch (InterruptedException e) &#123;
            e.printStackTrace();
        &#125;

        if (tikits &lt;= 0) &#123;
            System.out.println(&quot;å”®ç¥¨ç»“æŸ&quot;);
            loop = false;
            return;
        &#125;
            System.out.println(Thread.currentThread().getName() + &quot;å‰©ä½™ç¥¨æ•°&quot; + (--tikits));

    &#125;

    @Override
    public void run() &#123;	//è‹¥é‡‡ç”¨ç¬¬äºŒç§æ–¹å¼å°±å°†å…¶æ”¹ä¸ºpublic synchronized void run()
        while (loop) &#123;
            m();
        &#125;
    &#125;
&#125;

class Tik extends Thread&#123;//ç”¨ç»§æ‰¿çš„æ–¹å¼ï¼ŒåŒæ­¥æ–¹æ³•çš„é”ä¸ºç±»æœ¬èº«ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªæœ¬ç±»é™æ€å±æ€§(å¿…é¡»æ˜¯ä¸ªå¯¹è±¡)ç»™synchronized(ç±»çš„é™æ€å±æ€§)çš„æ–¹å¼æ¥æ·»åŠ é”ï¼Œå®è´¨ä¹Ÿæ˜¯å®ç°çš„â€ç±»çš„é”â€œ;
    private static int tikits = 10;

    static boolean loop = true;

    public synchronized static void m() &#123;		//æ–¹å¼2ï¼šæ”¹ä¸ºsynchronized(ç±»çš„é™æ€å±æ€§)&#123;æ–¹æ³•å†…éƒ¨çš„ä»£ç ...&#125;
        if (tikits &lt;= 0) &#123;
            System.out.println(&quot;å”®ç¥¨ç»“æŸ&quot;);
            loop = false;
            return;
        &#125;
        try &#123;
            Thread.sleep(50);
        &#125; catch (InterruptedException e) &#123;
            e.printStackTrace();
        &#125;

        System.out.println(Thread.currentThread().getName() + &quot;å‰©ä½™ç¥¨æ•°&quot; + (--tikits));

    &#125;
    @Override
    public void run() &#123;						// æ–¹å¼2ï¼šsynchronized (Integer.valueOf(tikits)) &#123;...&#125;
        while (loop) &#123;			
            m();
        &#125;
    &#125;
&#125;
</code></pre>
<p>æ€»ä¹‹ï¼Œéœ€è¦ç¡®ä¿æ£€æŸ¥ä½¿ç”¨çš„æ˜¯åŒä¸€æŠŠé”ï¼Œå¦åˆ™éƒ½ä¼šé€ æˆè¶…å–çš„æƒ…å†µã€‚å¦‚æœè¦ä½¿ç”¨ç±»çš„é”(&#x3D;&#x3D;ç»§æ‰¿Threadçš„åšæ³•åˆé€‚&#x3D;&#x3D;)ï¼Œåˆ™å°†å…¶ç½®ä¸ºé™æ€åŒæ­¥æ–¹æ³•æˆ–è€…&#x3D;&#x3D;é™æ€åŒæ­¥ä»£ç å—&#x3D;&#x3D;ã€‚å¦‚æœè¦ä½¿ç”¨å¯¹è±¡é”(&#x3D;&#x3D;å®ç°Runnableæ¥å£çš„åšæ³•åˆé€‚&#x3D;&#x3D;)å°±å°†æ–¹æ³•ç½®ä¸ºéé™æ€åŒæ­¥æ–¹æ³•æˆ–éé™æ€åŒæ­¥ä»£ç å—ã€‚&#x3D;&#x3D;å»ºè®®åœ¨å®é™…ä¸­é€‰æ‹©åŒæ­¥ä»£ç å—(é™¤äº†å¿…é¡»ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šé™¤å¤–)ï¼ŒèŒƒå›´è¶Šå°æ•ˆç‡å°±è¶Šé«˜ã€‚&#x3D;&#x3D;</p>
<h3><span id="1632-çº¿ç¨‹æ­»é”">16.3.2 çº¿ç¨‹æ­»é”</span></h3><blockquote>
<p>å¤šä¸ªçº¿ç¨‹éƒ½å ç”¨äº†å¯¹æ–¹çš„èµ„æºï¼Œä¸è‚¯ç›¸è®©ï¼Œå°±å¯¼è‡´äº†æ­»é”ã€‚ç¼–ç¨‹æ—¶è¦é¿å…æ­»é”çš„äº§ç”Ÿã€‚</p>
</blockquote>
<ul>
<li><p>ä»¥ä¸‹æ“ä½œä¼šé‡Šæ”¾é”</p>
<ol>
<li>å½“å‰çº¿ç¨‹çš„åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—æ‰§è¡Œç»“æŸã€‚</li>
<li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—ä¸­é‡åˆ° <code>break</code>ã€<code>return</code></li>
<li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—ä¸­å‡ºç°äº†æœªå¤„ç†çš„ <code>Error</code></li>
<li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—ä¸­æ‰§è¡Œäº† <code>wait()</code> æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹æš‚åœï¼Œå¹¶é‡Šæ”¾é”</li>
</ol>
</li>
<li><p>ä»¥ä¸‹æ“ä½œä¸ä¼šé‡Šæ”¾é”</p>
<ol>
<li><p>æ‰§è¡ŒåŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—æ—¶ï¼Œç¨‹åºè°ƒç”¨ <code>Thread.sleep()</code> æˆ– <code>Thread.yield()</code> æ–¹æ³•æš‚åœå½“å‰çº¿ç¨‹çš„æ‰§è¡Œï¼Œä¸ä¼šé‡Šæ”¾é”</p>
</li>
<li><p>çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æ—¶ï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨äº†è¯¥çº¿ç¨‹çš„ <code>suspend()</code> æ–¹æ³•å°†è¯¥çº¿ç¨‹æŒ‚èµ·ï¼Œè¯¥çº¿ç¨‹ä¸ä¼šé‡Šæ”¾é”</p>
</li>
</ol>
<p>  æ‰€ä»¥ï¼Œåº”å°½é‡é¿å…ä½¿ç”¨ <code>suspend()</code> å’Œ <code>resume()</code> æ¥æ§åˆ¶çº¿ç¨‹ï¼Œå®ƒä»¬æ˜¯æ˜¯<strong>è¿‡æ—¶çš„æ–¹æ³•</strong>ã€‚</p>
<p>  &#x3D;&#x3D;å°½é‡é¿å…synchronizedåµŒå¥—ä½¿ç”¨ã€‚&#x3D;&#x3D;</p>
<pre><code class="java">public class DeadLock_ &#123;
    public static void main(String[] args) &#123;
        //æ¨¡æ‹Ÿæ­»é”ç°è±¡
        DeadLockDemo A = new DeadLockDemo(true);
        A.setName(&quot;Açº¿ç¨‹&quot;);
        DeadLockDemo B = new DeadLockDemo(false);
        B.setName(&quot;Bçº¿ç¨‹&quot;);
        A.start();
        B.start();
    &#125;
&#125;


//çº¿ç¨‹
class DeadLockDemo extends Thread &#123;
    static Object o1 = new Object();// ä¿è¯å¤šçº¿ç¨‹ï¼Œå…±äº«ä¸€ä¸ªå¯¹è±¡,è¿™é‡Œä½¿ç”¨static
    static Object o2 = new Object();
    boolean flag;

    public DeadLockDemo(boolean flag) &#123;//æ„é€ å™¨
        this.flag = flag;
    &#125;

    @Override
    public void run() &#123;

        //ä¸‹é¢ä¸šåŠ¡é€»è¾‘çš„åˆ†æ
        //1. å¦‚æœflag ä¸º T, çº¿ç¨‹A å°±ä¼šå…ˆå¾—åˆ°/æŒæœ‰ o1 å¯¹è±¡é”, ç„¶åå°è¯•å»è·å– o2 å¯¹è±¡é”
        //2. å¦‚æœçº¿ç¨‹A å¾—ä¸åˆ° o2 å¯¹è±¡é”ï¼Œå°±ä¼šBlocked
        //3. å¦‚æœflag ä¸º F, çº¿ç¨‹B å°±ä¼šå…ˆå¾—åˆ°/æŒæœ‰ o2 å¯¹è±¡é”, ç„¶åå°è¯•å»è·å– o1 å¯¹è±¡é”
        //4. å¦‚æœçº¿ç¨‹B å¾—ä¸åˆ° o1 å¯¹è±¡é”ï¼Œå°±ä¼šBlocked
        if (flag) &#123;
            synchronized (o1) &#123;//å¯¹è±¡äº’æ–¥é”, ä¸‹é¢å°±æ˜¯åŒæ­¥ä»£ç 
                System.out.println(Thread.currentThread().getName() + &quot; è¿›å…¥1&quot;);
                synchronized (o2) &#123; // è¿™é‡Œè·å¾—liå¯¹è±¡çš„ç›‘è§†æƒ
                    System.out.println(Thread.currentThread().getName() + &quot; è¿›å…¥2&quot;);
                &#125;
                
            &#125;
        &#125; else &#123;
            synchronized (o2) &#123;
                System.out.println(Thread.currentThread().getName() + &quot; è¿›å…¥3&quot;);
                synchronized (o1) &#123; // è¿™é‡Œè·å¾—liå¯¹è±¡çš„ç›‘è§†æƒ
                    System.out.println(Thread.currentThread().getName() + &quot; è¿›å…¥4&quot;);
                &#125;
            &#125;
        &#125;
    &#125;
&#125;
</code></pre>
</li>
</ul>
<h2><span id="164-çº¿ç¨‹çš„åŒæ­¥">16.4 çº¿ç¨‹çš„åŒæ­¥</span></h2><blockquote>
<p>Java ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>wait()</code>ã€<code>notify()</code>ã€<code>notifyAll()</code> æ¥åè°ƒçº¿ç¨‹é—´çš„è¿è¡Œé€Ÿåº¦å…³ç³»ã€‚è¿™äº›æ–¹æ³•éƒ½è¢«å®šä¹‰åœ¨ java.lang.Object ä¸­</p>
<p>Java ä¸­çš„æ¯ä¸ªå¯¹è±¡å®ä¾‹éƒ½æœ‰ä¸¤ä¸ªçº¿ç¨‹é˜Ÿåˆ—å’Œå®ƒç›¸è¿ã€‚ä¸€ä¸ªç”¨ä»¥å®ç°ç­‰å¾…é”å®šæ ‡å¿—çš„çº¿ç¨‹ï¼Œå¦ä¸€ä¸ªç”¨æ¥å®ç° <code>wait()</code> å’Œ <code>notify()</code> çš„äº¤äº’æœºåˆ¶</p>
</blockquote>
<ul>
<li><p><code>wait()</code>ï¼šè®©å½“å‰çº¿ç¨‹é‡Šæ”¾æ‰€æœ‰å…¶æŒæœ‰çš„ â€œå¯¹è±¡äº’æ–¥é”â€ï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—</p>
</li>
<li><p><code>notify()</code>ã€<code>notifyAll()</code>ï¼šå”¤é†’ä¸€ä¸ªæˆ–æ‰€æœ‰åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ç­‰å¾…çš„çº¿ç¨‹ï¼Œå¹¶å°†ä»–ä»¬ç§»å…¥åŒä¸€ä¸ªç­‰å¾… â€œå¯¹è±¡äº’æ–¥é”â€ çš„é˜Ÿåˆ—ã€‚</p>
<p>  æ‰§è¡Œè¿™äº›æ–¹æ³•æ—¶å¦‚æœæ²¡æœ‰ç­‰å¾…ä¸­çš„çº¿ç¨‹ï¼Œåˆ™å…¶ä¸ä¼šç”Ÿæ•ˆï¼Œä¹Ÿä¸ä¼šè¢«ä¿ç•™åˆ°ä»¥åå†ç”Ÿæ•ˆ</p>
</li>
</ul>
<pre><code class="java">synchronized (key) &#123;
    if (key.value == 0) key.wait();
    key.value--;
&#125;
synchronized (key) &#123;
    key.value++;
    key.nitifyAll();
&#125;
</code></pre>
<p>å› ä¸ºè°ƒç”¨è¿™äº›æ–¹æ³•æ—¶å¿…é¡»æŒæœ‰å¯¹è±¡çš„ â€œå¯¹è±¡äº’æ–¥é”â€ï¼Œæ‰€ä»¥ä¸Šè¿°æ–¹æ³•åªèƒ½åœ¨ synhronized æ–¹æ³•æˆ–ä»£ç å—ä¸­æ‰§è¡Œã€‚</p>
<h1><span id="é¡¹ç›®-å¦å…‹å¤§æˆ˜">é¡¹ç›®-å¦å…‹å¤§æˆ˜</span></h1>
      
       <hr><span style="font-style: italic;color: gray;"> è½¬è½½è¯·æ³¨æ˜æ¥æºï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥é‚®ä»¶è‡³ jaytp@qq.com </span>
    </div>
</article>







    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    Â©2016-2020 Yelog
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*è®¿é—®æ•°é‡*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    

</script>

<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 18px 3px 15px 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*åˆ—è¡¨æ ·å¼*/
    
    #post .pjax article .article-entry>ol, #post .pjax article .article-entry>ul, #post .pjax article>ol, #post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    #post .pjax article .article-entry li>ol, #post .pjax article .article-entry li>ul,#post .pjax article li>ol, #post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    #post .pjax article .article-entry>ol>li, #post .pjax article .article-entry>ul>li,#post .pjax article>ol>li, #post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    #post .pjax article .article-entry li>ol>li, #post .pjax article .article-entry li>ul>li,#post .pjax article li>ol>li, #post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    

    
</style>














<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<div class="aplayer"

    data-id="9126522781"

    data-server="netease"

    data-type="playlist"

    data-fixed="true"

    data-autoplay="false"

    data-loop="all"

    data-order="random"

    data-preload="auto"

    data-volume="0.7"

    data-mutex="true"

>
</div>
<script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>

<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>

<script>
(function() {

  var arr = new Array();
  var $tags = $('.post-tags').children('a');
  $tags.each(function() {
    arr.push($(this).html())
  })
  if (arr.indexOf("å›¾é›†") !== -1) {

    $('.hj_img').each(function() {
      $(this).wrap('<a class="fancybox" data-fancybox="gallery" href="' + $(this).prop("src") + '"></a>'); 
    })
    //åˆå§‹åŒ–fancyboxï¼Œpaddingè®¾ä¸º0ï¼Œloopè®¾ä¸ºfalse
    $('.fancybox').fancybox({
      padding: 0,
      loop: false
    });
  }
})();
</script>

<!-- // æ–‡å­— -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/shehuizhuyi.js"></script>
<!-- // çˆ±å¿ƒ -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/love.js"></script>
<!-- // æŒ‰é”®å±è”½ éœ€è¦jQuery -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/noSomeKey.js"></script>


</html>
