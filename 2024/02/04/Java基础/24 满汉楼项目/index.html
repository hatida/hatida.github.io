<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>24 é¡¹ç›®ï¼šæ»¡æ±‰æ¥¼ | HatidaBlog</title>
  <meta name="keywords" content=" java , é¡¹ç›® ">
  <meta name="description" content="24 é¡¹ç›®ï¼šæ»¡æ±‰æ¥¼ | HatidaBlog">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="ç¬¬4ç«  æ£€ç´¢æ•°æ®4.5 æ£€ç´¢ä¸åŒçš„è¡ŒDISTINCTå…³é”®å­—ï¼šæ­¤å…³é”®å­—æŒ‡ç¤ºMySQLåªè¿”å›ä¸åŒçš„å€¼ã€‚  ä¸èƒ½éƒ¨åˆ†ä½¿ç”¨DISTINCT DISTINCTå…³é”®å­—åº”ç”¨äºæ‰€æœ‰åˆ—è€Œä¸ä»…æ˜¯å‰ç½®å®ƒçš„åˆ—ã€‚å¦‚æœç»™å‡ºSELECT DISTINCT vend_id,prod_priceï¼Œé™¤éæŒ‡å®šçš„ä¸¤ä¸ªåˆ—éƒ½ä¸åŒï¼Œå¦åˆ™æ‰€æœ‰è¡Œéƒ½å°†è¢«æ£€ç´¢å‡ºæ¥ã€‚ ç›¸å½“äºå°†distinctåé¢çš„åˆ—æ”¾åœ¨ä¸€èµ·ä½œä¸ºæ¡ä»¶  4.6 é™åˆ¶ç»“æœ-limitå…³é”®">
<meta property="og:type" content="article">
<meta property="og:title" content="mysqlå¿…çŸ¥å¿…ä¼š">
<meta property="og:url" content="http://example.com/2024/02/05/mysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/mysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/index.html">
<meta property="og:site_name" content="HatidaBlog">
<meta property="og:description" content="ç¬¬4ç«  æ£€ç´¢æ•°æ®4.5 æ£€ç´¢ä¸åŒçš„è¡ŒDISTINCTå…³é”®å­—ï¼šæ­¤å…³é”®å­—æŒ‡ç¤ºMySQLåªè¿”å›ä¸åŒçš„å€¼ã€‚  ä¸èƒ½éƒ¨åˆ†ä½¿ç”¨DISTINCT DISTINCTå…³é”®å­—åº”ç”¨äºæ‰€æœ‰åˆ—è€Œä¸ä»…æ˜¯å‰ç½®å®ƒçš„åˆ—ã€‚å¦‚æœç»™å‡ºSELECT DISTINCT vend_id,prod_priceï¼Œé™¤éæŒ‡å®šçš„ä¸¤ä¸ªåˆ—éƒ½ä¸åŒï¼Œå¦åˆ™æ‰€æœ‰è¡Œéƒ½å°†è¢«æ£€ç´¢å‡ºæ¥ã€‚ ç›¸å½“äºå°†distinctåé¢çš„åˆ—æ”¾åœ¨ä¸€èµ·ä½œä¸ºæ¡ä»¶  4.6 é™åˆ¶ç»“æœ-limitå…³é”®">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://gitee.com/kilomi/pic-bed/raw/master/img/202402050101323.png">
<meta property="article:published_time" content="2024-02-04T17:00:28.000Z">
<meta property="article:modified_time" content="2024-02-04T17:01:13.136Z">
<meta property="article:author" content="hatida">
<meta property="article:tag" content="mysql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/kilomi/pic-bed/raw/master/img/202402050101323.png">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/darcula.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 7.1.1"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>hatida</span>
</div>

<div class="icon">
    
        
            <a title="github"
               href="https://github.com/hatida"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
</div>





<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(19)</small>
            
        </div>
    </li>
    
        
            
                
    <li>
        <div data-rel="æ•°æ®åº“">
            
            æ•°æ®åº“
            <small>(2)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="ç¼–ç¨‹è¯­è¨€">
            <i class="fold iconfont icon-right"></i>
            ç¼–ç¨‹è¯­è¨€
            <small>(17)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="ç¼–ç¨‹è¯­è¨€&lt;---&gt;java">
            
            java
            <small>(17)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">About</a>
        
        <a style="width: 50%"
                
                                           class="friends">Friends</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="19">
<input type="hidden" id="yelog_site_word_count" value="137.6k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">å¶è½é˜</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="æœç´¢ å¿«æ·é”® i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="åˆ‡æ¢åˆ°å¤§çº²è§†å›¾ å¿«æ·é”® w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="è¿”å›"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="å¤§å°å†™æ•æ„Ÿ"></i>
            <i class="iconfont icon-tag" data-title="æ ‡ç­¾"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">å¤§çº²</div>
            <i class="iconfont icon-list" data-title="åˆ‡æ¢åˆ°æ–‡ç« åˆ—è¡¨"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æŸ¥æ‰¾</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å¤šçº¿ç¨‹</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>åå°„</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>é›†åˆ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ç±»</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æšä¸¾</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>é¢å‘å¯¹è±¡</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ’åº</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ•°æ®åº“</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ•°ç»„</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ç½‘ç»œ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>é¡¹ç›®</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å¼‚å¸¸</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ­£åˆ™è¡¨è¾¾å¼</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ³¨è§£</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å­—ç¬¦ä¸²</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>GUI</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>IO</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>java</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jdbc</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jvm</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mysql</a>
            </li>
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        
        <a  class="All æ•°æ®åº“ "
           href="/2024/02/05/mysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/mysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/"
           data-tag="mysql"
           data-author="" >
            <span class="post-title" title="mysqlå¿…çŸ¥å¿…ä¼š">mysqlå¿…çŸ¥å¿…ä¼š</span>
            <span class="post-date" title="2024-02-05 01:00:28">2024/02/05</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/10%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%B3%A8%E8%A7%A3/"
           data-tag="java,æšä¸¾,æ³¨è§£"
           data-author="" >
            <span class="post-title" title="10 æšä¸¾å’Œæ³¨è§£">10 æšä¸¾å’Œæ³¨è§£</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/11%20%E5%BC%82%E5%B8%B8%EF%BC%88Exception%EF%BC%89/"
           data-tag="java,å¼‚å¸¸"
           data-author="" >
            <span class="post-title" title="11 å¼‚å¸¸ï¼ˆExceptionï¼‰">11 å¼‚å¸¸ï¼ˆExceptionï¼‰</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/21%20%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6/"
           data-tag="java,åå°„"
           data-author="" >
            <span class="post-title" title="21 åå°„">21 åå°„</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/25%20%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
           data-tag="java,æ­£åˆ™è¡¨è¾¾å¼"
           data-author="" >
            <span class="post-title" title="25 æ­£åˆ™è¡¨è¾¾å¼">25 æ­£åˆ™è¡¨è¾¾å¼</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/5%20%E6%95%B0%E7%BB%84/"
           data-tag="java,æ•°ç»„,æ’åº,æŸ¥æ‰¾"
           data-author="" >
            <span class="post-title" title="5 æ•°ç»„ã€æ’åºå’ŒæŸ¥æ‰¾">5 æ•°ç»„ã€æ’åºå’ŒæŸ¥æ‰¾</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3String/"
           data-tag="java,å­—ç¬¦ä¸²,jvm"
           data-author="" >
            <span class="post-title" title="Stringæ·±å…¥ç†è§£">Stringæ·±å…¥ç†è§£</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/17%20IO%E6%B5%81/"
           data-tag="java,IO"
           data-author="" >
            <span class="post-title" title="17 IOæµ">17 IOæµ</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/19%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"
           data-tag="java,ç½‘ç»œ"
           data-author="" >
            <span class="post-title" title="19 ç½‘ç»œç¼–ç¨‹">19 ç½‘ç»œç¼–ç¨‹</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/7%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B(%E4%B8%AD%E7%BA%A7)/"
           data-tag="java,é¢å‘å¯¹è±¡"
           data-author="" >
            <span class="post-title" title="7 é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆä¸­çº§ï¼‰">7 é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆä¸­çº§ï¼‰</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/9%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B(%E9%AB%98%E7%BA%A7)/"
           data-tag="java,ç±»"
           data-author="" >
            <span class="post-title" title="9.1 ç±»å˜é‡å’Œç±»æ–¹æ³•">9.1 ç±»å˜é‡å’Œç±»æ–¹æ³•</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/12%20%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%92%8C%E6%B3%9B%E5%9E%8B/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="12 å¸¸ç”¨ç±»">12 å¸¸ç”¨ç±»</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/16%20%E5%A4%9A%E7%BA%BF%E7%A8%8B/"
           data-tag="java,å¤šçº¿ç¨‹"
           data-author="" >
            <span class="post-title" title="16 å¤šçº¿ç¨‹">16 å¤šçº¿ç¨‹</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/23%20JDBC/"
           data-tag="java,jdbc,æ•°æ®åº“"
           data-author="" >
            <span class="post-title" title="23 JDBC å’Œæ•°æ®åº“è¿æ¥æ± ">23 JDBC å’Œæ•°æ®åº“è¿æ¥æ± </span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/6%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B(%E5%9F%BA%E7%A1%80)/"
           data-tag="java"
           data-author="" >
            <span class="post-title" title="6.é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆåŸºç¡€ï¼‰">6.é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆåŸºç¡€ï¼‰</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/15%20%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1/"
           data-tag="java,GUI"
           data-author="" >
            <span class="post-title" title="15 å›¾å½¢ç•Œé¢è®¾è®¡">15 å›¾å½¢ç•Œé¢è®¾è®¡</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/13%20java%E9%9B%86%E5%90%88/"
           data-tag="java,é›†åˆ"
           data-author="" >
            <span class="post-title" title="13 Java æ•°æ®ç»“æ„">13 Java æ•°æ®ç»“æ„</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ java "
           href="/2024/02/04/Java%E5%9F%BA%E7%A1%80/24%20%E6%BB%A1%E6%B1%89%E6%A5%BC%E9%A1%B9%E7%9B%AE/"
           data-tag="java,é¡¹ç›®"
           data-author="" >
            <span class="post-title" title="24 é¡¹ç›®ï¼šæ»¡æ±‰æ¥¼">24 é¡¹ç›®ï¼šæ»¡æ±‰æ¥¼</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        
        <a  class="All æ•°æ®åº“ "
           href="/2024/02/04/mysql/mysql/"
           data-tag="mysql"
           data-author="" >
            <span class="post-title" title="mysql">mysql</span>
            <span class="post-date" title="2024-02-04 16:17:27">2024/02/04</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-JavaåŸºç¡€/24 æ»¡æ±‰æ¥¼é¡¹ç›®" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">24 é¡¹ç›®ï¼šæ»¡æ±‰æ¥¼</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="ç¼–ç¨‹è¯­è¨€">ç¼–ç¨‹è¯­è¨€</a> > 
            
            <a  data-rel="ç¼–ç¨‹è¯­è¨€&lt;---&gt;java">java</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color5">java</a>
            
            <a class="color3">é¡¹ç›®</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2024-02-05 01:24:47'>2024-02-04 16:17</time>
        
    </div>
    <div class="article-meta">
        
        <span>Count:11.8k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views ğŸ‘€ :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">24 é¡¹ç›®ï¼šæ»¡æ±‰æ¥¼</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">ä»£ç ï¼šä¸‡æ°‘å ‚</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">1. æ•°æ®åº“</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-text">è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-text">tableï¼ˆé¤æ¡Œï¼‰</span></a></li><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-text">dishesï¼ˆèœå•ï¼‰</span></a></li><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-text">customerï¼ˆå®¢äººä¿¡æ¯ï¼‰</span></a></li><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-text">loginï¼ˆç™»å½•éªŒè¯ï¼‰</span></a></li><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-text">billï¼ˆè®¢å•ï¼‰</span></a></li><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-text">detail_billï¼ˆviewï¼ŒæŸ¥è¯¢è®¢å•ä¿¡æ¯ï¼‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">Java ä»£ç </span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-text">é€šç”¨éƒ¨åˆ†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-text">com.melody.wmt.common</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">Message.java</span></a></li><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">MessageType.java</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-text">com.melody.wmt.sql</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">LoginData.java</span></a></li><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">TableData.java</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-text">æœåŠ¡ç«¯éƒ¨åˆ†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-text">com.melody.wmt.library</span></a></li><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-text">com.melody.wmt.server</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">Server.java</span></a></li><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">RunningServer.java</span></a></li><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">ServerUtils.java</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-text">com.melody.wmt.sql</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">WanMinSQL.properties</span></a></li><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">BasicDAO.java</span></a></li><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">JDBCUtil.java</span></a></li><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">TableDAO.javaã€TableData.java</span></a></li><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">LoginDAO.javaã€LoginData.java</span></a></li><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">DishesDAO.javaã€DishesData.java</span></a></li><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">CustomerDAO.javaã€CustomerData.java</span></a></li><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">BillDAO.javaã€BillData.javaã€DetailBillData.java</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-text">å®¢æˆ·ç«¯ï¼ˆç®¡ç†ï¼‰éƒ¨åˆ†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-text">com.melody.wmt.client;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">Clinet.java</span></a></li><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">Listening.java</span></a></li><li class="toc-item toc-level-6"><a class="toc-link"><span class="toc-text">MenuUtility.java</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-6 i,
    .toc-level-6 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1><span id="24-é¡¹ç›®æ»¡æ±‰æ¥¼">24 é¡¹ç›®ï¼šæ»¡æ±‰æ¥¼</span></h1><ul>
<li>ç™»å½•ç•Œé¢<ul>
<li>ç™»å½•ï¼ˆè´¦å·ã€å¯†ç ï¼‰</li>
<li>é€€å‡º</li>
</ul>
</li>
<li>èœå•ç•Œé¢<ul>
<li>é¤æ¡ŒçŠ¶æ€ï¼ˆæ˜¾ç¤ºç¼–å·ã€çŠ¶æ€ï¼‰</li>
<li>é¢„å®šé¤æ¡Œï¼ˆç¼–å·[æ ¸å¯¹ã€äºŒæ¬¡ç¡®è®¤]ã€é¢„å®šäººåå­—ã€ç”µè¯ï¼‰</li>
<li>èœå•ï¼ˆåç§°ã€ä»·æ ¼ã€ç±»åˆ«ã€ç¼–å·ï¼‰<ul>
<li>å…¨éƒ¨ã€åˆ†ç±»</li>
</ul>
</li>
<li>ç‚¹é¤ï¼ˆæ¡Œå·[æ ¸å¯¹]ã€èœå“[æ ¸å¯¹]ã€æ•°é‡ï¼‰</li>
<li>è´¦å•ï¼ˆæŒ‰ç…§æ¡Œå·åˆ†ç»„ã€‚èœå“ã€æ•°é‡ã€é‡‘é¢ã€æ¡Œå·ã€æ—¥æœŸã€çŠ¶æ€ï¼‰</li>
<li>ç»“è´¦ï¼ˆæ¡Œå·ã€æ–¹å¼ã€äºŒæ¬¡ç¡®è®¤ï¼‰</li>
<li>é€€å‡ºç³»ç»Ÿ</li>
</ul>
</li>
<li>æ•°æ®åº“<ul>
<li>ç™»å½•ç”¨æˆ·ï¼šloginï¼ˆidã€nameã€password[md5]ï¼‰</li>
<li>é¤æ¡ŒçŠ¶æ€ï¼štableï¼ˆidã€orderã€seatã€customerï¼‰</li>
<li>é¡¾å®¢ï¼šcustomerï¼ˆidã€nameã€card_idã€callï¼‰</li>
<li>èœå•ï¼šdishesï¼ˆidã€nameã€priceã€speciesã€availableï¼‰</li>
<li>è´¦å•ï¼šbillï¼ˆidã€dateã€customerã€numã€tableã€clearã€dishesï¼‰</li>
</ul>
</li>
</ul>
<h2><span id="ä»£ç ä¸‡æ°‘å ‚">ä»£ç ï¼šä¸‡æ°‘å ‚</span></h2><p><del>è¯´æ˜¯æ»¡æ±‰æ¥¼ï¼Œå…¶å®æ˜¯ä¸‡æ°‘å ‚</del></p>
<p><strong>æ²¡æœ‰ä¼˜åŒ–è¿‡ï¼Œæ‰€ä»¥å¥å£®æ€§ä¸å¼ºã€‚æ‡’å¾—åšä¼˜åŒ–äº†ï¼Œåæ­£ä¹‹å‰çš„é¡¹ç›®åšè¿‡äº†</strong></p>
<h3><span id="1-æ•°æ®åº“">1. æ•°æ®åº“</span></h3><blockquote>
<pre><code class="sql">mysql://localhost:3306/wan_min
AWK
</code></pre>
</blockquote>
<h4><span id="è¡¨">è¡¨</span></h4><blockquote>
<p>ä»¥ä¸‹å¤§éƒ¨åˆ†æ˜¯æ¶¦è‰²åçš„ <code>show create table xxx</code> çš„è¿”å›è¯­å¥</p>
</blockquote>
<h5><span id="tableé¤æ¡Œ">tableï¼ˆé¤æ¡Œï¼‰</span></h5><blockquote>
<p>é¤æ¡Œå· idï¼ˆä¸»é”®ï¼‰ã€é¤æ¡ŒçŠ¶æ€ orderã€åº§æ•° seatã€è®¢é¤äºº customer</p>
</blockquote>
<pre><code class="sql">CREATE TABLE `table` (
      `id` smallint(5) unsigned NOT NULL AUTO_INCREMENT ,
      `order` enum(&#39;å·²é¢„å®š&#39;,&#39;ç”¨é¤&#39;,&#39;ç©º&#39;,&#39;ä¸å¯ç”¨&#39;) COLLATE utf8_bin NOT NULL DEFAULT &#39;ç©º&#39;,
      `seat` smallint(5) unsigned NOT NULL DEFAULT &#39;2&#39;,
      `customer` smallint(5) unsigned DEFAULT NULL,
      PRIMARY KEY (`id`),
      KEY `customer` (`customer`),
      CONSTRAINT `table_ibfk_1` FOREIGN KEY (`customer`) REFERENCES `customer` (`id`)
    )MYSQL
</code></pre>
<h5><span id="dishesèœå•">dishesï¼ˆèœå•ï¼‰</span></h5><blockquote>
<p>é¤å“å· idï¼ˆä¸»é”®ï¼‰ã€é¤å“å nameï¼ˆå”¯ä¸€ï¼‰ã€ä»·æ ¼ priceã€åˆ†ç±» speciesã€æ˜¯å¦å¯ç”¨ available</p>
</blockquote>
<pre><code class="sql">CREATE TABLE `dishes` (
      `id` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
      `name` char(8) COLLATE utf8_bin NOT NULL,
      `price` smallint(5) unsigned NOT NULL DEFAULT &#39;0&#39;,
      `species` enum(&#39;ä¸»é£Ÿ&#39;,&#39;ä¸»èœ&#39;,&#39;æ±¤å“&#39;,&#39;å‡‰èœ&#39;,&#39;ç”œç‚¹&#39;,&#39;é¥®æ–™&#39;,&#39;&#39;) COLLATE utf8_bin NOT NULL DEFAULT &#39;&#39;,
      `available` enum(&#39;y&#39;,&#39;n&#39;) COLLATE utf8_bin NOT NULL DEFAULT &#39;y&#39;,
      PRIMARY KEY (`id`),
      UNIQUE KEY `name` (`name`)
)MYSQL
</code></pre>
<h5><span id="customerå®¢äººä¿¡æ¯">customerï¼ˆå®¢äººä¿¡æ¯ï¼‰</span></h5><blockquote>
<p>é¡¾å®¢ID idï¼ˆä¸»é”®ï¼‰ã€é¡¾å®¢åå­— nameã€é¡¾å®¢è¯ä»¶å· card_idï¼ˆå¯ä¸ºç©ºï¼‰ã€é¡¾å®¢ç”µè¯ call</p>
</blockquote>
<pre><code class="sql">CREATE TABLE `customer` (
      `id` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
      `name` varchar(12) COLLATE utf8_bin NOT NULL,
      `card_id` char(18) COLLATE utf8_bin DEFAULT NULL,
      `call` char(11) COLLATE utf8_bin NOT NULL,
      PRIMARY KEY (`id`)
)MYSQL
</code></pre>
<h5><span id="loginç™»å½•éªŒè¯">loginï¼ˆç™»å½•éªŒè¯ï¼‰</span></h5><blockquote>
<p>ç³»ç»Ÿç™»å½•ID idï¼ˆä¸»é”®ï¼‰ã€ç³»ç»Ÿç™»å½•å nameï¼ˆå”¯ä¸€ï¼‰ã€å¯†ç  passwordï¼ˆmd5 åŠ å¯†ï¼‰</p>
</blockquote>
<pre><code class="sql">CREATE TABLE `login` (
      `id` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
      `name` varchar(10) COLLATE utf8_bin NOT NULL,
      `password` char(32) COLLATE utf8_bin NOT NULL,
      PRIMARY KEY (`id`),
      UNIQUE KEY `name` (`name`)
)MYSQL
</code></pre>
<h5><span id="billè®¢å•">billï¼ˆè®¢å•ï¼‰</span></h5><blockquote>
<p>è®¢å•ID idï¼ˆä¸»é”®ï¼‰ã€æ—¥æœŸ dateã€é¡¾å®¢ customerï¼ˆå¤–é”®ï¼‰ã€èœå“ID idï¼ˆå¤–é”®ï¼‰ã€èœå“æ•°é‡ numã€æ¡Œå· tableï¼ˆå¤–é”®ï¼‰ã€ç»“ç®—çŠ¶æ€ clearï¼ˆæšä¸¾ï¼Œyç°é‡‘ã€alipayæ”¯ä»˜å®ã€wcpayå¾®ä¿¡ã€næœªä»˜ï¼‰</p>
</blockquote>
<pre><code class="sql">CREATE TABLE `bill` (
      `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
      `date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
      `customer` smallint(5) unsigned NOT NULL,
      `num` smallint(5) unsigned NOT NULL DEFAULT &#39;1&#39;,
      `table` smallint(5) unsigned NOT NULL,
      `clear` enum(&#39;y&#39;,&#39;n&#39;,&#39;alipay&#39;,&#39;wc_pay&#39;) COLLATE utf8_bin NOT NULL DEFAULT &#39;n&#39;,
      `dishes` smallint(5) unsigned NOT NULL,
      PRIMARY KEY (`id`),
      KEY `customer` (`customer`),
      KEY `table` (`table`),
      KEY `dishes` (`dishes`),
      CONSTRAINT `bill_ibfk_1` FOREIGN KEY (`customer`) REFERENCES `customer` (`id`),
      CONSTRAINT `bill_ibfk_2` FOREIGN KEY (`table`) REFERENCES `table` (`id`),
      CONSTRAINT `bill_ibfk_3` FOREIGN KEY (`dishes`) REFERENCES `dishes` (`id`)
)MYSQL
</code></pre>
<h5><span id="detail_billviewæŸ¥è¯¢è®¢å•ä¿¡æ¯">detail_billï¼ˆviewï¼ŒæŸ¥è¯¢è®¢å•ä¿¡æ¯ï¼‰</span></h5><pre><code class="sql">CREATE VIEW `detail_bill` AS 
    select `customer`.`name` AS `name`,
       `customer`.`call` AS `call`,
       `bill`.`table` AS `table`,
       `dishes`.`name` AS `dishes`,
       `bill`.`num` AS `num`,
       `bill`.`date` AS `date`,
       `bill`.`clear` AS `clear` 
    from `bill` , `customer`, `dishes` 
    where (`bill`.`customer` = `customer`.`id`) 
        and (`bill`.`dishes` = `dishes`.`id`)MYSQL
</code></pre>
<h3><span id="java-ä»£ç ">Java ä»£ç </span></h3><h4><span id="é€šç”¨éƒ¨åˆ†">é€šç”¨éƒ¨åˆ†</span></h4><blockquote>
<p>ä»¥ä¸‹å„åŒ…ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å„è‡ªæŒæœ‰ä¸€ä»½ï¼Œå­˜æ”¾åœ¨ç›¸åŒç›®å½•ä¸‹ã€‚</p>
</blockquote>
<h5><span id="commelodywmtcommon">com.melody.wmt.common</span></h5><h6><span id="messagejava">Message.java</span></h6><blockquote>
<p><em>com.melody.wmt.common.Message.java</em></p>
<p>ä¿¡æ¯åŒ…ã€‚å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯çš„é€šè®¯ä¾é å‘é€è¯¥åŒ…è¿›è¡Œ</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.common;

import java.io.Serializable;
import java.time.Instant;

/**
 * @author Melody
 * @version 1.0
 */
public class Message implements Serializable &#123;
    private String sender;		//å‘é€è€…IP
    private String receiver;	//æ¥æ”¶è€…IP
    private String word;		//ä¿¡æ¯æ ‡è¯†
    private Object object;		//ä¿¡æ¯æ•°æ®
    private Instant timeStamp;	//ä¿¡æ¯æ—¶é—´æˆ³

    public Message(String sender, String receiver, String word, Object object) &#123;
        this.sender = sender;
        this.receiver = receiver;
        this.word = word;
        this.object = object;
        timeStamp = Instant.now();
    &#125;

    public String getSender() &#123;
        return sender;
    &#125;

    public void setSender(String sender) &#123;
        this.sender = sender;
    &#125;

    public String getReceiver() &#123;
        return receiver;
    &#125;

    public void setReceiver(String receiver) &#123;
        this.receiver = receiver;
    &#125;

    public String getWord() &#123;
        return word;
    &#125;

    public void setWord(String word) &#123;
        this.word = word;
    &#125;

    public Object getObject() &#123;
        return object;
    &#125;

    public void setObject(Object object) &#123;
        this.object = object;
    &#125;

    public Instant getTimeStamp() &#123;
        return timeStamp;
    &#125;

    public void setTimeStamp() &#123;
        this.timeStamp = Instant.now();
    &#125;
&#125;JAVA
</code></pre>
<h6><span id="messagetypejava">MessageType.java</span></h6><blockquote>
<p><em>com.melody.wmt.common.MessageType.java</em></p>
<p>ä¿¡æ¯æ ‡è¯†åŒ…ã€‚é€šè¿‡è¯¥åŒ…æ¥åˆ†æä¿¡æ¯åŒ…çš„ç§ç±»ã€‚è¯¥åŒ…æ²¡æœ‰æ–¹æ³•ã€‚</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.common;

/**
 * @author Melody
 * @version 1.0
 */
public interface MessageType &#123;
    /*ä»¥ä¸‹æ˜¯æœåŠ¡ç«¯å‘é€*/
    String REJECT = &quot;0&quot;;					//æ‹’ç»è¯·æ±‚
    String ACCEPT = &quot;A&quot;;					//é€šè¿‡è¯·æ±‚
    String LOGIN_USER_NOT_EXIST = &quot;LUNE&quot;;	//ç™»å½•å¤±è´¥ï¼šç”¨æˆ·ä¸å­˜åœ¨
    String LOGIN_WRONG_PW = &quot;LWP&quot;;			//ç™»é™†å¤±è´¥ï¼šå¯†ç é”™è¯¯
    String WRONG_REQUEST = &quot;WR&quot;;			//è¯·æ±‚æ— æ•ˆ
    String TABLE_NOT_EXIST = &quot;TNE&quot;;			//é¤æ¡Œä¸å­˜åœ¨
    String TABLE_OCCUPIED = &quot;TOP&quot;;			//é¤æ¡Œè¢«å ç”¨ï¼ˆæœªç‚¹é¤ï¼‰
    String TABLE_DINNING = &quot;TOD&quot;;			//é¤æ¡Œè¢«å ç”¨ï¼ˆå·²ç‚¹é¤ï¼‰
    String TABLE_NOT_AVAILABLE = &quot;TNA&quot;;		//é¤æ¡Œä¸å¯ç”¨
    String TABLE_AVAILABLE = &quot;TIA&quot;;			//é¤æ¡Œä¸ºç©º
    String NOT_FOUND = &quot;NF&quot;;				//æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡

    /*ä»¥ä¸‹æ˜¯å®¢æˆ·ç«¯å‘é€*/
    String LOGIN = &quot;LGI&quot;;					//è¯·æ±‚ç™»å½•
    String SHOW_TABLES = &quot;RST&quot;;				//è¯·æ±‚è¿”å›é¤æ¡Œåˆ—è¡¨
    String CHECK_TABLE = &quot;RCT&quot;;				//è¯·æ±‚æŸ¥è¯¢é¤æ¡ŒçŠ¶æ€
    String ORDER_TABLE = &quot;ROT&quot;;				//è¯·æ±‚é¢„å®šé¤æ¡Œ
    String SHOW_DISHES = &quot;RSD&quot;;				//è¯·æ±‚è¿”å›èœå•åˆ—è¡¨
    String CHECK_DISHES = &quot;RCD&quot;;			//è¯·æ±‚æŸ¥è¯¢èœå•çŠ¶æ€
    String ORDER_DISHES = &quot;ROD&quot;;			//è¯·æ±‚è®¢é¤
    String SHOW_ALL_BILLS = &quot;RAB&quot;;			//è¯·æ±‚è¿”å›è´¦å•åˆ—è¡¨
    String CHECK_BILLS = &quot;RCB&quot;;				//è¯·æ±‚æŸ¥è¯¢è´¦å•çŠ¶æ€
    String FINISH_BILLS = &quot;RFB&quot;;			//è¯·æ±‚å®Œæˆè´¦å•
    String LOGOUT = &quot;LGO&quot;;					//è¯·æ±‚ç™»å‡º
&#125;JAVA
</code></pre>
<h5><span id="commelodywmtsql">com.melody.wmt.sql</span></h5><h6><span id="logindatajava">LoginData.java</span></h6><blockquote>
<p><em>com.melody.wmt.sql.LoginData.java</em></p>
<p>ç™»å½•ä¿¡æ¯åŒ…ã€‚è¯¥åŒ…å¯¹åº”è¡¨ <code>login</code> çš„è®°å½•ã€‚</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.sql;

import java.io.Serializable;

/**
 * @author Melody
 * @version 1.0
 */
public class LoginData implements Serializable &#123;
    private int id;
    private String name;
    private String password;

    public LoginData()&#123;&#125;

    public LoginData(int id, String name, String password) &#123;
        this.id = id;
        this.name = name;
        this.password = password;
    &#125;

    public int getId() &#123;
        return id;
    &#125;

    public void setId(int id) &#123;
        this.id = id;
    &#125;

    public String getName() &#123;
        return name;
    &#125;

    public void setName(String name) &#123;
        this.name = name;
    &#125;

    public String getPassword() &#123;
        return password;
    &#125;

    public void setPassword(String password) &#123;
        this.password = password;
    &#125;
&#125;JAVA
</code></pre>
<h6><span id="tabledatajava">TableData.java</span></h6><blockquote>
<p><em>com.melody.wmt.sql.TableData.java</em></p>
<p>é¤æ¡Œä¿¡æ¯åŒ…ã€‚è¯¥åŒ…å¯¹åº”è¡¨ <code>table</code> çš„è®°å½•ã€‚</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.sql;

import java.io.Serializable;

/**
 * @author Melody
 * @version 1.0
 */
public class TableData implements Serializable &#123;
    private int id;
    private String order;
    private int customer;
    private int seat;

    public TableData() &#123;
    &#125;

    public TableData(int id, String order, int customer, int seat) &#123;
        this.id = id;
        this.order = order;
        this.customer = customer;
        this.seat = seat;
    &#125;

    public int getId() &#123;
        return id;
    &#125;

    public void setId(int id) &#123;
        this.id = id;
    &#125;

    public String getOrder() &#123;
        return order;
    &#125;

    public void setOrder(String order) &#123;
        this.order = order;
    &#125;

    public int getCustomer() &#123;
        return customer;
    &#125;

    public void setCustomer(int customer) &#123;
        this.customer = customer;
    &#125;

    public int getSeat() &#123;
        return seat;
    &#125;

    public void setSeat(int seat) &#123;
        this.seat = seat;
    &#125;

    @Override
    public String toString() &#123;
        return id + &quot;\t&quot; + seat + &quot;\t&quot; + order + &quot;\t&quot; + (customer == 0 ? &quot;-&quot; : customer);
    &#125;
&#125;JAVA
</code></pre>
<h4><span id="æœåŠ¡ç«¯éƒ¨åˆ†">æœåŠ¡ç«¯éƒ¨åˆ†</span></h4><h5><span id="commelodywmtlibrary">com.melody.wmt.library</span></h5><blockquote>
<p>åœ¨ç›®å½• <em>com.melody.wmt.library</em> ä¸‹ï¼Œé…ç½®ä»¥ä¸‹ jar åŒ…ï¼š</p>
<ul>
<li><code>druid-1.2.8.jar</code>ï¼šå¾·é²ä¼Šè¿æ¥æ± </li>
<li><code>mysql-connector-java-8.0.27.jar</code>ï¼šMySQL æ•°æ®åº“</li>
<li><code>commons-dbutils-1.7.jar</code>ï¼šApache-DBUtils</li>
</ul>
</blockquote>
<h5><span id="commelodywmtserver">com.melody.wmt.server</span></h5><h6><span id="serverjava">Server.java</span></h6><blockquote>
<p>æœåŠ¡ç«¯å…¥å£</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.server;

import java.io.IOException;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;

/**
 * @author Melody
 * @version 1.0
 */
public class Server &#123;
    public static final String serverIP;
    
    /* å¤šæ­¤ä¸€ä¸¾åœ°åˆå§‹åŒ–æœåŠ¡ç«¯ IP åœ°å€ã€‚å…¶å®ç›´æ¥å†™æ­£ç¡®åœ°å€ä¹Ÿè¡Œçš„ */
    static &#123;
        String tempIP = null;
        try &#123;
            tempIP = InetAddress.getLocalHost().getHostAddress();
        &#125; catch (UnknownHostException e) &#123;
            System.out.println(e);
            tempIP = &quot;192.168.3.16&quot;;
        &#125; finally &#123;
            serverIP = tempIP;
        &#125;
    &#125;
    
    /* ä¸»æ–¹æ³•
    æŒç»­ç›‘å¬ç«¯å£ï¼Œæ¯å½“æœ‰æ¥å…¥æ—¶å°±ä¸¢ç»™æ–°çš„ RunningServer çº¿ç¨‹ */
    public static void main(String[] args) throws IOException &#123;
        ServerSocket serverSocket = new ServerSocket(9000);
        while (true) &#123;
            Socket accept = serverSocket.accept();
            new Thread(new RunningServer(accept)).start();
        &#125;
    &#125;
&#125;JAVA
</code></pre>
<h6><span id="runningserverjava">RunningServer.java</span></h6><blockquote>
<p>æœåŠ¡ç«¯è¿›ç¨‹ä¸»ä½“ã€‚ç”± <em>Server.java</em> åˆ›å»ºã€‚</p>
<p>è¯¥è¿›ç¨‹èƒ½å®ç°ï¼šç”¨æˆ·ç™»å½•éªŒè¯ã€è¯†åˆ«å®¢æˆ·ç«¯è¯·æ±‚</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.server;

import com.melody.wmt.common.Message;
import com.melody.wmt.common.MessageType;
import com.melody.wmt.sql.LoginData;

import java.io.*;
import java.net.Socket;
import java.time.LocalDateTime;

/**
 * @author Melody
 * @version 1.0
 */
public class RunningServer implements Runnable &#123;
    private Socket socket;
    private ObjectInputStream ois;		//é€šä¿¡çš„è¾“å…¥æµ
    private ObjectOutputStream oos;		//é€šä¿¡çš„è¾“å‡ºæµ
    private String targetIP;			//é€šä¿¡å¯¹è±¡çš„ IP
    private LoginData loginData;		//é€šä¿¡å¯¹è±¡å£°æ˜çš„ç™»å½•å¯¹è±¡çš„ä¿¡æ¯ã€‚
                                //è¿™ä¸ªä¿¡æ¯æ¥è‡ªæ•°æ®åº“ï¼Œä¸ä¸€å®šå’Œé€šä¿¡å¯¹è±¡å£°æ˜çš„ä¿¡æ¯åŒ¹é…
    private boolean running = true;		//çº¿ç¨‹è¿è¡Œä¸­ã€‚false çš„åœºåˆçº¿ç¨‹åœæ­¢
    
    /* å®Œæˆä¸€äº›åˆå§‹åŒ– */
    public RunningServer(Socket socket) &#123;
        this.socket = socket;
        try &#123;
            ois = new ObjectInputStream(socket.getInputStream());
            oos = new ObjectOutputStream(socket.getOutputStream());
        &#125; catch (IOException e) &#123;
            System.out.println(e);
            closeAll();
        &#125;
        targetIP = socket.getLocalAddress().getHostAddress();
    &#125;

    @Override
    public void run() &#123;
        try &#123;
            /* æ¥æ”¶é€šä¿¡å¯¹è±¡çš„ç™»å½•è¯·æ±‚ */
            Message message = ServerUtils.receiveMessage(ois);
            /* è·å¾—é€šä¿¡å¯¹è±¡å£°æ˜çš„ç™»å½•å¯¹è±¡ä¿¡æ¯ã€‚
            è¿™é‡Œè¿”å› null çš„åœºåˆï¼Œç™»å½•å¤±è´¥ */
            loginData = ServerUtils.checkLogin(message);
            System.out.println(targetIP + &quot; è¯·æ±‚ç™»å½• &lt;&quot; + message.getObject()+&quot;&gt;&quot;);
            /* ç™»å½•å¤±è´¥çš„åœºåˆï¼Œå‘é€æ‹’ç»ä¿¡æ¯ï¼Œå¹¶å…³é—­æ‰€æœ‰æµ */
            if (loginData == null) &#123;
                ServerUtils.sendRejection(targetIP, oos);
                closeAll();
                return;
            &#125; else &#123;
            /* ç™»å½•æˆåŠŸï¼Œå‘é€ç™»å½•å¯¹è±¡ä¿¡æ¯ */
                ServerUtils.sendMessage(new Message(Server.serverIP, targetIP, MessageType.ACCEPT, loginData), oos);
            &#125;
            System.out.println(targetIP + &quot; ç™»å½•æˆåŠŸ &quot; + loginData.getName() + LocalDateTime.now());
            
            /* ç›´åˆ°è¿™é‡Œï¼Œç™»å½•æˆåŠŸï¼Œæ­£å¼å¼€å§‹ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚ */
            while (running) &#123;
                listeningRequest();
            &#125;
        /* å¦‚æœå‘ç”Ÿä»»ä½•è¿æ¥å¼‚å¸¸ï¼Œæˆ‘ä»¬ä¸­æ–­è¿æ¥ï¼Œå¹¶å…³é—­æ‰€æœ‰æµ */
        &#125; catch (Exception e) &#123;
            System.out.println(targetIP + &quot; è¿æ¥ä¸­æ–­ &quot; + loginData.getName() + LocalDateTime.now());
            closeAll();
        &#125;
    &#125;
    
    /* è¿™ä¸ªæ–¹æ³•æ˜¯å…³é—­æ‰€æœ‰æµçš„æ–¹æ³•ã€‚åœ¨å…³é—­è¿æ¥æ—¶ä¼šè¢«è°ƒç”¨ */
    private void closeAll() &#123;
        try &#123;
            if (ois != null) &#123;
                ois.close();
            &#125;
            if (oos != null) &#123;
                oos.close();
            &#125;
            if (socket != null) &#123;
                socket.close();
            &#125;
        &#125; catch (IOException e) &#123;
            System.out.println(e);
        &#125;
    &#125;
    
    /* è¿™ä¸ªæ–¹æ³•æ˜¯ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚çš„æ–¹æ³•ã€‚æ ¹æ®ä¸åŒè¯·æ±‚ï¼Œåšå‡ºä¸åŒååº” */
    private void listeningRequest() &#123;
        /* ç›‘å¬è¯·æ±‚ */
        Message message = ServerUtils.receiveMessage(ois);
        /* æ£€æŸ¥æ”¶åˆ°çš„æ•°æ®åŒ…çš„ä¿¡æ¯æ ‡è¯† */
        String request = message.getWord();
        /* åˆ›å»ºå°†è¦å‘é€çš„æ•°æ®åŒ…ã€‚æ­¤æ—¶ï¼Œè¯¥åŒ…è¿˜æ˜¯ç©ºçš„ */
        Message toSend = new Message(Server.serverIP, targetIP, null, null);
        /* æ£€æŸ¥ä¸€ä¸‹æ¥æ”¶çš„æ•°æ®åŒ…çš„ç”¨æˆ·ä¿¡æ¯ã€‚æœ‰ä»»ä½•é—®é¢˜çš„è¯æˆ‘ä»¬å°±å‘é€è¯·æ±‚é”™è¯¯åŒ… */
        /* â€¦â€¦åœ¨è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼šå®¢æˆ·å‘é€çš„æ•°æ®åŒ…é‡Œï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
        1. getWord() è¿”å›æ•°æ®åŒ…æ ‡è¯†ã€‚å®¢æˆ·ç«¯çš„ä»»ä½•è¯·æ±‚ä¼šå¯¹åº”ä¸åŒçš„æ ‡è¯†
        2. getObject() ä¸€å®šåŒ…å«ä¸€æ¡ String è¯­å¥ã€‚è¯¥è¯­å¥è¢«è½¬ä¹‰å­—ç¬¦ \t åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†ã€‚
            ç¬¬ä¸€éƒ¨åˆ†ä¸€å®šæ˜¯ç”¨æˆ·åã€ç¬¬äºŒéƒ¨åˆ†ä¸€å®šæ˜¯ç”¨æˆ·å¯†ç ã€‚
            æ ¹æ®è¯·æ±‚éœ€è¦ï¼Œä¹Ÿä¼šæœ‰æ›´å¤šå…¶ä»–éƒ¨åˆ† */
        try &#123;
            if (!ServerUtils.checkUser((String) message.getObject(), loginData)) &#123;
                throw new RuntimeException();
            &#125;
        &#125; catch (Exception e) &#123;
            System.out.println(e);
            toSend.setWord(MessageType.WRONG_REQUEST);
            ServerUtils.sendMessage(toSend, oos);
            return;
        &#125;
        /* ä¸‹é¢ï¼Œæ ¹æ®ä¸åŒä¿¡æ¯åŒ…æ ‡è¯†ï¼Œæˆ‘ä»¬åšå‡ºä¸åŒååº” */
        /* æ¥æ”¶åˆ°è¿”å›é¤æ¡Œåˆ—è¡¨çš„è¯·æ±‚ */
        if (request.equals(MessageType.SHOW_TABLES)) &#123;
            ServerUtils.showTables(toSend, oos);
        /* æ¥æ”¶åˆ°æ£€æŸ¥é¤æ¡Œçš„è¯·æ±‚ */
        &#125; else if (request.equals(MessageType.CHECK_TABLE)) &#123;
            ServerUtils.checkTable(message, toSend, oos);
        /* æ¥æ”¶åˆ°é¢„å®šé¤æ¡Œçš„è¯·æ±‚ */
        &#125; else if (request.equals(MessageType.ORDER_TABLE)) &#123;
            ServerUtils.orderTable(message, toSend, oos);
        /* æ¥æ”¶åˆ°è¿”å›èœå•åˆ—è¡¨çš„è¯·æ±‚ */
        &#125; else if (request.equals(MessageType.SHOW_DISHES)) &#123;
            ServerUtils.showDishes(toSend, oos);
        /* æ¥æ”¶åˆ°æ£€æŸ¥èœå•çš„è¯·æ±‚ */
        &#125; else if (request.equals(MessageType.CHECK_DISHES)) &#123;
            ServerUtils.checkDishes(message, toSend, oos);
        /* æ¥æ”¶åˆ°ç‚¹é¤çš„è¯·æ±‚ */
        &#125; else if (request.equals(MessageType.ORDER_DISHES)) &#123;
            ServerUtils.orderDishes(message, toSend, oos);
        /* æ¥æ”¶åˆ°è¿”å›è´¦å•åˆ—è¡¨çš„è¯·æ±‚ */
        &#125; else if (request.equals(MessageType.SHOW_ALL_BILLS)) &#123;
            ServerUtils.showBills(toSend, oos);
        /* æ¥æ”¶åˆ°æ£€æŸ¥è´¦å•çš„è¯·æ±‚ */
        &#125; else if (request.equals(MessageType.CHECK_BILLS)) &#123;
            ServerUtils.checkBills(message, toSend, oos);
        /* æ¥æ”¶åˆ°ç»“è´¦çš„è¯·æ±‚ */
        &#125; else if (request.equals(MessageType.FINISH_BILLS)) &#123;
            ServerUtils.finishBills(message, toSend, oos);
        /* æ¥æ”¶åˆ°ç™»å‡ºçš„è¯·æ±‚ */
        &#125; else if (request.equals(MessageType.LOGOUT)) &#123;
            System.out.println(targetIP + &quot; ç™»å‡º &quot; + loginData.getName() + LocalDateTime.now());
            running = false;
            closeAll();
        &#125;
    &#125;
&#125;JAVA
</code></pre>
<h6><span id="serverutilsjava">ServerUtils.java</span></h6><blockquote>
<p>æœåŠ¡ç«¯è¿›ç¨‹æ–¹æ³•åŒ…ã€‚ç”± <em>RunningServer.java</em> è°ƒç”¨</p>
<p>è¯¥åŒ…å®ç°ï¼šç›‘å¬å®¢æˆ·ç«¯æ•°æ®åŒ…ã€å‘é€æ•°æ®åŒ…ã€å¤„ç†ï¼ˆå„ç§ï¼‰å®¢æˆ·ç«¯è¯·æ±‚</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.server;

import com.melody.wmt.common.Message;
import com.melody.wmt.common.MessageType;
import com.melody.wmt.sql.*;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.List;

/**
 * @author Melody
 * @version 1.0
 */
public class ServerUtils &#123;
    /* ç›‘å¬å®¢æˆ·ç«¯å‘é€çš„æ•°æ®åŒ… */
    public static Message receiveMessage(ObjectInputStream ois) &#123;
        try &#123;
            Message message = (Message) ois.readObject();
            return message;
        &#125; catch (Exception e) &#123;
            System.out.println(e);
            return null;
        &#125;
    &#125;
    
    /* å‘é€ç™»å½•å¤±è´¥å›æ‰§ã€‚è¿™ä¸ªæ–¹æ³•å…¶å®å¯ä»¥ä¼˜åŒ–æ‰ */
    public static boolean sendRejection(String target, ObjectOutputStream oos) &#123;
        Message message = new Message(Server.serverIP, target, MessageType.REJECT, null);
        try &#123;
            oos.writeObject(message);
            oos.flush();
            return true;
        &#125; catch (IOException e) &#123;
            System.out.println(e);
            return false;
        &#125;
    &#125;
    
    /* æ£€æŸ¥ç”¨æˆ·ä¿¡æ¯ã€‚å®é™…ä¸Šå°±æ˜¯æ£€æŸ¥ç”¨æˆ·å */
    public static boolean checkUser(String user, LoginData loginData) &#123;
        if (user == null) &#123;
            return false;
        &#125;
        String[] toCheck = user.split(&quot;\t&quot;);
        if (toCheck[0].equals(loginData.getName())) &#123;
            return new LoginDAO().checkLogin(toCheck[0], toCheck[1]) != null;
        &#125; else &#123;
            return false;
        &#125;
    &#125;
    
    /* æ£€æŸ¥ç™»å½•ä¿¡æ¯ã€‚ç™»å½•æˆåŠŸåˆ™è¿”å›ä»æ•°æ®åº“å¾—åˆ°çš„ç™»å½•ä¿¡æ¯åŒ…ï¼Œå¦åˆ™è¿”å› null */
    public static LoginData checkLogin(Message message) &#123;
        if (message == null) &#123;
            return null;
        &#125;
        String word = message.getWord();
        if (word == null || !word.equals(MessageType.LOGIN)) &#123;
            return null;
        &#125;
        try &#123;
            word = (String) message.getObject();
        &#125; catch (Exception e) &#123;
            System.out.println(e);
            return null;
        &#125;
        String[] data = word.split(&quot;\t&quot;);
        if (data.length != 2) &#123;
            return null;
        &#125;
        return new LoginDAO().checkLogin(data[0], data[1]);
    &#125;
    
    /* å‘é€æ•°æ®åŒ…ç»™å®¢æˆ·ç«¯ã€‚å¾ˆå¤šæ–¹æ³•ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¹Ÿä¼šåˆ·æ–°æ•°æ®åŒ…æ—¶é—´æˆ³ */
    public static void sendMessage(Message toSend, ObjectOutputStream oos) &#123;
        try &#123;
            Thread.currentThread().sleep(300);	//äººä¸ºåŠ å…¥ 0.3 ç§’å‘é€å»¶è¿Ÿ
            toSend.setTimeStamp();				//åˆ·æ–°æ•°æ®åŒ…æ—¶é—´æˆ³
            oos.writeObject(toSend);
            oos.flush();
        &#125; catch (Exception e) &#123;
            System.out.println(e);
        &#125;
    &#125;
    
    /* è¿”å›é¤æ¡Œåˆ—è¡¨ */
    public static void showTables(Message toSend, ObjectOutputStream oos) &#123;
        /* è°ƒç”¨æ–¹æ³•å¾—åˆ°é¤æ¡Œåˆ—è¡¨ */
        List&lt;TableData&gt; tableData = new TableDAO().queryAll();
        /* å°†é¤æ¡Œåˆ—è¡¨è½¬åŒ–æˆå­—ç¬¦ä¸²ã€‚å‘é€æ—¶åªå‘é€è¿™ä¸ªå­—ç¬¦ä¸² */
        StringBuilder sb = new StringBuilder();
        for (TableData data : tableData) &#123;
            sb.append(data);
            sb.append(&quot;\n&quot;);
        &#125;
        toSend.setObject(sb.toString());
        /* è®¾ç½®æ•°æ®åŒ…æ ‡è¯†ä¸ºè¯·æ±‚é€šè¿‡ */
        toSend.setWord(MessageType.ACCEPT);
        /* å‘é€æ•°æ®åŒ… */
        sendMessage(toSend, oos);
    &#125;
    
    /* æ£€æŸ¥é¤æ¡Œ
    â€¦â€¦è¿™æ˜¯å› ä¸ºï¼šç”¨æˆ·ç‚¹é¤ã€é¢„å®šé¤æ¡Œç­‰åœºåˆï¼Œéœ€è¦éªŒè¯è¾“å…¥çš„é¤æ¡Œä¿¡æ¯ */
    public static void checkTable(Message receive, Message toSend, ObjectOutputStream oos) &#123;
        try &#123;
            /* æ£€æŸ¥ç”¨æˆ·è¯·æ±‚çš„é¤æ¡Œå· */
            int table = Integer.parseInt(((String) receive.getObject()).split(&quot;\t&quot;)[2]);
            TableData tableData = new TableDAO().queryTable(table);
            /* ä¸‹é¢æ˜¯æ ¹æ®è¿”å›ç»“æœï¼Œä¸ºæ•°æ®åŒ…æ·»åŠ æ ‡è¯†è¯­å¥ï¼Œå¹¶è£…å…¥æŸ¥åˆ°çš„é¤æ¡Œæ•°æ® */
            if (tableData == null) &#123;
                toSend.setWord(MessageType.TABLE_NOT_EXIST);
            &#125; else if (tableData.getOrder().equals(&quot;ä¸å¯ç”¨&quot;)) &#123;
                toSend.setObject(tableData);
                toSend.setWord(MessageType.TABLE_NOT_AVAILABLE);
            &#125; else if (tableData.getOrder().equals(&quot;å·²é¢„å®š&quot;)) &#123;
                toSend.setObject(tableData);
                toSend.setWord(MessageType.TABLE_OCCUPIED);
            &#125; else if (tableData.getOrder().equals(&quot;ç”¨é¤&quot;)) &#123;
                toSend.setObject(tableData);
                toSend.setWord(MessageType.TABLE_DINNING);
            &#125; else if (tableData.getOrder().equals(&quot;ç©º&quot;)) &#123;
                toSend.setObject(tableData);
                toSend.setWord(MessageType.TABLE_AVAILABLE);
            &#125; else &#123;
                toSend.setWord(MessageType.REJECT);
            &#125;
        /* å‘ç”Ÿä»»ä½•å¼‚å¸¸çš„åœºåˆï¼Œè®¾ç½®æ‹’ç»è¯·æ±‚çš„æ ‡è¯†è¯­å¥ */
        &#125; catch (Exception e) &#123;
            toSend.setWord(MessageType.REJECT);
        /* æœ€ç»ˆä¸€å®šå‘é€æ•°æ®åŒ… */
        &#125; finally &#123;
            sendMessage(toSend, oos);
        &#125;
    &#125;
    
    /* é¢„å®šé¤æ¡Œ */
    public static void orderTable(Message receive, Message toSend, ObjectOutputStream oos) &#123;
        try &#123;
            /* å‰é¢è¯´è¿‡ã€‚æ¥æ”¶æ•°æ®åŒ…å«æœ‰ä¸€æ¡è¢« \t åˆ†éš”ä¸ºä¸åŒéƒ¨åˆ†çš„è¯­å¥ã€‚
            è¿™é‡Œï¼šç¬¬ä¸‰éƒ¨åˆ†ä»£è¡¨é¤æ¡Œå·ï¼Œç¬¬å››éƒ¨åˆ†ä»£è¡¨é¡¾å®¢åï¼Œç¬¬äº”éƒ¨åˆ†ä»£è¡¨é¡¾å®¢ç”µè¯*/
            String[] mess = ((String) receive.getObject()).split(&quot;\t&quot;);
            int table = Integer.parseInt(mess[2]);
            String customerName = mess[3];
            String call = mess[4];
            CustomerDAO customerDAO = new CustomerDAO();
            /* æ ¹æ®æ¥æ”¶çš„é¡¾å®¢ä¿¡æ¯ï¼ˆå§“åã€ç”µè¯ï¼‰å¯¹æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰è¿™ä¸ªäºº
            è¿™é‡Œï¼Œcustomer &gt; 0 çš„åœºåˆä»£è¡¨æœ‰è¿™ä¸ªäºº */
            int customer = customerDAO.searchCustomer(customerName, call);
            /* æ²¡æœ‰è¿™ä¸ªä¿¡æ¯çš„åœºåˆï¼Œåˆ›å»ºè¿™ä¸ªé¡¾å®¢ä¿¡æ¯ */
            if (customer &lt; 0) &#123;
                customerDAO.createCustomer(customerName, call);
                customer = customerDAO.searchCustomer(customerName, call);
            &#125;
            /* é€šå¸¸åˆ°è¿™é‡Œä¸ä¼šå‡ºç°æŸ¥æ— æ­¤äººçš„æƒ…å†µã€‚å¦‚æœå‡ºç°ï¼Œè¯´æ˜åˆ›å»ºä¿¡æ¯å¤±è´¥ */
            if (customer &lt; 0) &#123;
                throw new RuntimeException();
            &#125;
            /* åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬è¿›è¡Œé¢„å®šé¤æ¡Œæ“ä½œã€‚è¿”å› true è¡¨ç¤ºæˆåŠŸ */
            if (new TableDAO().orderTable(table, customer)) &#123;
                toSend.setWord(MessageType.ACCEPT);
            &#125; else &#123;
                toSend.setWord(MessageType.REJECT);
            &#125;
        /* å‡ºç°ä»»ä½•é—®é¢˜ï¼Œæˆ‘ä»¬è®¾ç½®è¯·æ±‚æ‹’ç»æ ‡è¯†ç¬¦ */
        &#125; catch (Exception e) &#123;
            toSend.setWord(MessageType.REJECT);
        /* æœ€ç»ˆä¸€å®šå‘é€æ•°æ®åŒ… */
        &#125; finally &#123;
            sendMessage(toSend, oos);
        &#125;
    &#125;
    
    /* è¿”å›èœå•åˆ—è¡¨ */
    public static void showDishes(Message toSend, ObjectOutputStream oos) &#123;
        try &#123;
            /* é¦–å…ˆè·å–èœå•åˆ—è¡¨ */
            List&lt;DishesData&gt; dishes = new DishesDAO().getDishes();
            /* æ¥ä¸‹æ¥ï¼ŒæŠŠèœå•åˆ—è¡¨è½¬åŒ–ä¸ºå­—ç¬¦ä¸² */
            StringBuilder staple = new StringBuilder();
            StringBuilder mainDishes = new StringBuilder();
            StringBuilder coldDishes = new StringBuilder();
            StringBuilder beverage = new StringBuilder();
            StringBuilder soup = new StringBuilder();
            StringBuilder sweetmeats = new StringBuilder();
            for (DishesData d : dishes) &#123;
                if (d.getAvailable().equals(&quot;n&quot;)) &#123;
                    continue;
                &#125;
                String spec = d.getSpecies();
                if (spec.equals(&quot;ä¸»é£Ÿ&quot;)) &#123;
                    staple.append(d);
                    staple.append(&quot;\n&quot;);
                &#125; else if (spec.equals(&quot;ç”œç‚¹&quot;)) &#123;
                    sweetmeats.append(d);
                    sweetmeats.append(&quot;\n&quot;);
                &#125; else if (spec.equals(&quot;æ±¤å“&quot;)) &#123;
                    soup.append(d);
                    soup.append(&quot;\n&quot;);
                &#125; else if (spec.equals(&quot;å‡‰èœ&quot;)) &#123;
                    coldDishes.append(d);
                    coldDishes.append(&quot;\n&quot;);
                &#125; else if (spec.equals(&quot;é¥®æ–™&quot;)) &#123;
                    beverage.append(d);
                    beverage.append(&quot;\n&quot;);
                &#125; else if (spec.equals(&quot;ä¸»èœ&quot;)) &#123;
                    mainDishes.append(d);
                    mainDishes.append(&quot;\n&quot;);
                &#125;
            &#125;
            /* åˆå¹¶å­—ç¬¦ä¸²ï¼Œä»¥ ### é—´éš”ä¸åŒç§ç±» */
            String allDishes = String.join(&quot;###&quot;, staple, mainDishes, coldDishes, soup, sweetmeats, beverage);
            /* è£…å¡«æ•°æ®åŒ… */
            toSend.setWord(MessageType.ACCEPT);
            toSend.setObject(allDishes);
        /* å‡ºäº†é—®é¢˜å°±è®¾ç½®æ‹’ç»è¯·æ±‚æ ‡è¯†ç¬¦ */
        &#125; catch (Exception e) &#123;
            toSend.setWord(MessageType.REJECT);
        /* æœ€ç»ˆä¸€å®šå‘é€æ•°æ®åŒ… */
        &#125; finally &#123;
            sendMessage(toSend, oos);
        &#125;
    &#125;
    
    /* æ£€æŸ¥èœå•ã€‚å’Œæ£€æŸ¥é¤æ¡Œæ˜¯ä¸€ä¸ªé“ç† */
    public static void checkDishes(Message receive, Message toSend, ObjectOutputStream oos) &#123;
        try &#123;
            /* å‰é¢è¯´è¿‡ã€‚æ¥æ”¶æ•°æ®åŒ…å«æœ‰ä¸€æ¡è¢« \t åˆ†éš”ä¸ºä¸åŒéƒ¨åˆ†çš„è¯­å¥ã€‚
            è¿™é‡Œï¼šç¬¬ä¸‰éƒ¨åˆ†ä»£è¡¨æŸ¥è¯¢èœå“çš„ ID */
            String[] mess = ((String) receive.getObject()).split(&quot;\t&quot;);
            int id = Integer.parseInt(mess[2]);
            Object o = new DishesDAO().checkDishes(id);
            if (o == null) &#123;
                toSend.setWord(MessageType.NOT_FOUND);
            &#125; else if (!(o instanceof DishesData)) &#123;
                throw new RuntimeException();
            &#125; else &#123;
                toSend.setWord(MessageType.ACCEPT);
                toSend.setObject(o.toString());
            &#125;
        /* å‡ºç°ä»»ä½•é—®é¢˜å°±è®¾ç½®è¯·æ±‚æ‹’ç»æ ‡è¯†ç¬¦ */
        &#125; catch (RuntimeException e) &#123;
            toSend.setWord(MessageType.REJECT);
        /* æœ€ç»ˆä¸€å®šå‘é€æ•°æ®åŒ… */
        &#125; finally &#123;
            sendMessage(toSend, oos);
        &#125;
    &#125;
    
    /* ç‚¹é¤ */
    public static void orderDishes(Message receive, Message toSend, ObjectOutputStream oos) &#123;
        try &#123;
            /* å‰é¢è¯´è¿‡â€¦â€¦åæ­£å‰é¢è¯´è¿‡è¿™ä¸ª String çš„äº‹ï¼
            è¿™é‡Œï¼šç¬¬ä¸‰éƒ¨åˆ†æ˜¯èœå“ IDï¼Œç¬¬å››éƒ¨åˆ†æ˜¯æ•°é‡ï¼Œ
                ç¬¬äº”éƒ¨åˆ†æ˜¯æ¡Œå·ï¼Œç¬¬å…­éƒ¨åˆ†æ˜¯é¡¾å®¢å· */
            String[] mess = ((String) receive.getObject()).split(&quot;\t&quot;);
            int dishes = Integer.parseInt(mess[2]);
            /* æ£€æŸ¥ä¸€ä¸‹èœå“æ˜¯ä¸æ˜¯æ­£ç¡® */
            /* è¿™é‡Œæœ‰ä¸€å¤„ç–å¿½ã€‚åº”è¯¥ä¸€å¹¶æ£€æŸ¥æ˜¯å¦èœå“å¯ç”¨ï¼ˆavailableï¼‰ */
            Object o = new DishesDAO().checkDishes(dishes);
            if (!(o instanceof DishesData)) &#123;
                throw new RuntimeException();
            &#125;
            int num = Integer.parseInt(mess[3]);
            int table = Integer.parseInt(mess[4]);
            int customer = Integer.parseInt(mess[5]);
            /* å°è¯•ç‚¹é¤ */
            if (new BillDAO().order(dishes, num, table, customer)) &#123;
                new TableDAO().updateTable(table, 2);
                toSend.setWord(MessageType.ACCEPT);
            &#125; else &#123;
                toSend.setWord(MessageType.REJECT);
            &#125;
        /* å‡ºç°ä»»ä½•é—®é¢˜å°±è®¾ç½®è¯·æ±‚æ‹’ç»æ ‡è¯†ç¬¦ */
        &#125; catch (RuntimeException e) &#123;
            toSend.setWord(MessageType.REJECT);
        /* æœ€ç»ˆä¸€å®šå‘é€æ•°æ®åŒ… */
        &#125; finally &#123;
            sendMessage(toSend, oos);
        &#125;
    &#125;
    
    /* è¿”å›è´¦å•åˆ—è¡¨ */
    public static void showBills(Message toSend, ObjectOutputStream oos) &#123;
        try &#123;
            /* å’Œä¹‹å‰çš„æ–¹æ³•ä¸€æ ·ã€‚è¿™é‡Œæˆ‘ä»¬å‘é€çš„æ˜¯æ‹¼æ¥èµ·æ¥çš„å­—ç¬¦ä¸² */
            List&lt;DetailBillData&gt; billData = new BillDAO().queryBills();
            StringBuilder finished = new StringBuilder();
            StringBuilder unfinished = new StringBuilder();
            for (DetailBillData d : billData) &#123;
                if (d.getClear().equals(&quot;n&quot;)) &#123;
                    unfinished.append(d);
                    unfinished.append(&quot;\n&quot;);
                &#125; else &#123;
                    finished.append(d);
                    finished.append(&quot;\n&quot;);
                &#125;
            &#125;
            toSend.setWord(MessageType.ACCEPT);
            toSend.setObject(String.join(&quot;###&quot;, finished, unfinished));
        /* å‡ºç°ä»»ä½•é—®é¢˜å°±è®¾ç½®è¯·æ±‚æ‹’ç»æ ‡è¯†ç¬¦ */
        &#125; catch (Exception e) &#123;
            toSend.setWord(MessageType.REJECT);
        /* æœ€ç»ˆä¸€å®šå‘é€æ•°æ®åŒ… */
        &#125; finally &#123;
            sendMessage(toSend, oos);
        &#125;
    &#125;
    
    /* æ£€æŸ¥è®¢å• */
    public static void checkBills(Message receive, Message toSend, ObjectOutputStream oos) &#123;
        try &#123;
            /* â€¦â€¦è¿™é‡Œï¼šç¬¬ä¸‰éƒ¨åˆ†æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚T è¡¨ç¤ºæŒ‰æ¡Œå·æŸ¥æ‰¾
                    ç¬¬å››éƒ¨åˆ†æ˜¯åºå·ã€‚æŒ‰æ¡Œå·æŸ¥æ‰¾çš„è¯ï¼Œå°±ä»£è¡¨æ¡Œå·
                    ç¬¬äº”éƒ¨åˆ†æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼å¥å­ã€‚true è¡¨ç¤ºæŸ¥è¯¢å·²ä»˜è®¢å•ï¼Œ
                        false æ˜¯æœªä»˜è®¢å•ã€‚ä¸ºç©ºè¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰è®¢å• */
            String[] mess = ((String) receive.getObject()).split(&quot;\t&quot;);
            List&lt;DetailBillData&gt; billData = null;
            StringBuilder sb = new StringBuilder();
            if (mess[2].equals(&quot;t&quot;) || mess[2].equals(&quot;T&quot;)) &#123;
                Boolean clear;
                if (mess.length &lt; 5) &#123;
                    clear = null;
                &#125; else if (mess[4].equals(&quot;true&quot;)) &#123;
                    clear = true;
                &#125; else if (mess[4].equals(&quot;false&quot;)) &#123;
                    clear = false;
                &#125; else &#123;
                    clear = null;
                &#125;
                billData = new BillDAO().queryBillsByTable(Integer.parseInt(mess[3]), clear);
            &#125;
            /* åŒæ ·çš„ï¼Œè¿˜æ˜¯è¿”å›å­—ç¬¦ä¸² */
            for (DetailBillData data : billData) &#123;
                sb.append(billData);
                sb.append(&quot;\n&quot;);
            &#125;
            toSend.setObject(sb.toString());
            toSend.setWord(MessageType.ACCEPT);
        /* å‡ºç°ä»»ä½•é—®é¢˜å°±è®¾ç½®è¯·æ±‚æ‹’ç»æ ‡è¯†ç¬¦ */
        &#125; catch (Exception e) &#123;
            toSend.setWord(MessageType.REJECT);
        /* æœ€ç»ˆä¸€å®šå‘é€æ•°æ®åŒ… */
        &#125; finally &#123;
            sendMessage(toSend, oos);
        &#125;
    &#125;
    
    /* ç»“ç®—è®¢å• */
    public static void finishBills(Message receive, Message toSend, ObjectOutputStream oos) &#123;
        try &#123;
            /* ç¬¬ä¸‰ä½æ˜¯æ¡Œå·ï¼Œç¬¬å››ä½æ˜¯ç»“ç®—æ–¹æ³• */ 
            String[] mess = ((String) receive.getObject()).split(&quot;\t&quot;);
            int table = Integer.parseInt(mess[2]);
            int way = Integer.parseInt(mess[3]);
            /* ä¸å…‰æ›´æ–°è®¢å•ä¿¡æ¯ï¼Œä¹Ÿè¦æŠŠæŒ‡å®šé¤æ¡Œé‡ç½®ä¸ºç©º */
            boolean finish = new BillDAO().finishBill(table, way) &gt; 0 &amp;&amp; new TableDAO().clearTable(table);
            toSend.setWord(finish ? MessageType.ACCEPT : MessageType.REJECT);
        /* å‡ºç°ä»»ä½•é—®é¢˜å°±è®¾ç½®è¯·æ±‚æ‹’ç»æ ‡è¯†ç¬¦ */
        &#125; catch (Exception e) &#123;
            toSend.setWord(MessageType.REJECT);
        /* æœ€ç»ˆä¸€å®šå‘é€æ•°æ®åŒ… */
        &#125; finally &#123;
            sendMessage(toSend, oos);
        &#125;
    &#125;
&#125;JAVA
</code></pre>
<h5><span id="commelodywmtsql">com.melody.wmt.sql</span></h5><h6><span id="wanminsqlproperties">WanMinSQL.properties</span></h6><blockquote>
<p>æ•°æ®åº“é…ç½®æ–‡ä»¶</p>
<p>é‡Œé¢çš„å¯†ç å¡«è‡ªå·±çš„ã€‚å¦å¤–ï¼Œå…¶å®ä¸Šä¸€ç¯‡ç¬”è®°é‡Œæ•…æ„æ¼çš„å¯†ç æ˜¯å‡çš„ã€‚</p>
</blockquote>
<pre><code class="properties">driverClassName=com.mysql.cj.jdbc.Driver
url=jdbc:mysql://localhost:3306/wan_min
username=root
password=******
initialSize=10
minIdle=5
maxActive=50
maxWait=5000JAVA
</code></pre>
<h6><span id="basicdaojava">BasicDAO.java</span></h6><blockquote>
<p><em><strong>â€”â€”è¯¦è§ [[23.9 BasicDAO](<a target="_blank" rel="noopener" href="https://i-melody.github.io/2022/02/20/Java/%E5%85%A5%E9%97%A8%E9%98%B6%E6%AE%B5/23">https://i-melody.github.io/2022/02/20/Java/å…¥é—¨é˜¶æ®µ/23</a> JDBC å’Œæ•°æ®åº“è¿æ¥æ± &#x2F;#23-9-BasicDAO)]</strong></em></p>
<p>ä»£ç å’Œä¸Šé¢è¯´çš„æ˜¯ä¸€æ ·çš„â€¦â€¦å¤§æ¦‚ï¼Ÿ</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.sql;

import org.apache.commons.dbutils.QueryRunner;
import org.apache.commons.dbutils.handlers.BeanHandler;
import org.apache.commons.dbutils.handlers.BeanListHandler;
import org.apache.commons.dbutils.handlers.ScalarHandler;

import java.sql.Connection;
import java.sql.SQLException;
import java.util.List;

/**
 * @author Melody
 * @version 1.0
 */
public class BasicDAO&lt;T&gt; &#123;
    private QueryRunner queryRunner = new QueryRunner();

    public int update(String sql, Object... parameters)&#123;
        Connection connection = null;
        try &#123;
            connection = JDBCUtil.connect();
            return queryRunner.update(connection, sql, parameters);
        &#125; catch (SQLException e) &#123;
            throw new RuntimeException(e);
        &#125; finally &#123;
            JDBCUtil.close(connection, null, null);
        &#125;
    &#125;

    public List&lt;T&gt; queryMulti(Class&lt;T&gt; tClass, String sql, Object... parameters) &#123;
        Connection connection = null;
        try &#123;
            connection = JDBCUtil.connect();
            return queryRunner.query(connection, sql, new BeanListHandler&lt;&gt;(tClass), parameters);
        &#125; catch (SQLException e) &#123;
            throw new RuntimeException(e);
        &#125; finally &#123;
            JDBCUtil.close(connection, null, null);
        &#125;
    &#125;

    public T querySingle(Class&lt;T&gt; tClass, String sql, Object... parameters) &#123;
        Connection connection = null;
        try &#123;
            connection = JDBCUtil.connect();
            return queryRunner.query(connection, sql, new BeanHandler&lt;&gt;(tClass), parameters);
        &#125; catch (SQLException e) &#123;
            throw new RuntimeException(e);
        &#125; finally &#123;
            JDBCUtil.close(connection, null, null);
        &#125;
    &#125;

    public Object queryScalar(String sql, Object... parameters) &#123;
        Connection connection = null;
        try &#123;
            connection = JDBCUtil.connect();
            return queryRunner.query(connection, sql, new ScalarHandler&lt;&gt;(), parameters);
        &#125; catch (SQLException e) &#123;
            throw new RuntimeException(e);
        &#125; finally &#123;
            JDBCUtil.close(connection, null, null);
        &#125;
    &#125;
&#125;JAVA
</code></pre>
<h6><span id="jdbcutiljava">JDBCUtil.java</span></h6><blockquote>
<p><em><strong>â€”â€”è§ [[23.7.2 Druidï¼ˆå¾·é²ä¼Šï¼‰è¿æ¥æ± ](<a target="_blank" rel="noopener" href="https://i-melody.github.io/2022/02/20/Java/%E5%85%A5%E9%97%A8%E9%98%B6%E6%AE%B5/23">https://i-melody.github.io/2022/02/20/Java/å…¥é—¨é˜¶æ®µ/23</a> JDBC å’Œæ•°æ®åº“è¿æ¥æ± &#x2F;#23-7-2-Druidï¼ˆå¾·é²ä¼Šï¼‰è¿æ¥æ± ) ]</strong></em></p>
</blockquote>
<pre><code class="java">package com.melody.wmt.sql;

import com.alibaba.druid.pool.DruidDataSourceFactory;

import javax.sql.DataSource;
import java.io.FileReader;
import java.io.IOException;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Properties;

/**
 * @author Melody
 * @version 1.0
 */
public class JDBCUtil &#123;
    private static DataSource dataSource = null;

    static &#123;
        Properties properties = new Properties();
        try &#123;
            properties.load(new FileReader(&quot;src\\com\\melody\\wmt\\sql\\WanMinSQL.properties&quot;));
            dataSource = DruidDataSourceFactory.createDataSource(properties);
        &#125; catch (Exception e) &#123;
            new RuntimeException(e);
        &#125;
    &#125;

    public static Connection connect() throws SQLException &#123;
        return dataSource.getConnection();
    &#125;

    public static void close(Connection c, Statement s, ResultSet r) &#123;
        try &#123;
            if (c != null) &#123;
                c.close();
            &#125;
            if (r != null) &#123;
                r.close();
            &#125;
            if (s != null) &#123;
                s.close();
            &#125;
        &#125; catch (SQLException e) &#123;
            throw new RuntimeException(e);
        &#125;
    &#125;
&#125;JAVA
</code></pre>
<h6><span id="tabledaojava-tabledatajava">TableDAO.javaã€TableData.java</span></h6><blockquote>
<p>å¯¹åº”æ•°æ®åº“çš„ <em>table</em> è¡¨</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.sql;

import java.util.List;

/**
 * @author Melody
 * @version 1.0
 */
public class TableDAO extends BasicDAO&#123;
    /* è¿”å›å…¨éƒ¨çš„é¤æ¡Œå¯¹è±¡ */
    public List&lt;TableData&gt; queryAll()&#123;
        String sql = &quot;select * from `table`&quot;;
        List&lt;TableData&gt; list = queryMulti(TableData.class, sql);
        return list;
    &#125;
    
    /* è¿”å› ID æŒ‡å®šçš„é¤æ¡Œå¯¹è±¡ã€‚æ²¡æ‰¾åˆ°çš„åœºåˆè¿”å› null */
    public TableData queryTable(int id) &#123;
        String sql = &quot;select * from `table` where `id` = ?&quot;;
        TableData tableData = null;
        try &#123;
            tableData = (TableData) querySingle(TableData.class, sql, id);
        &#125; catch (Exception e) &#123;
            return null;
        &#125;
        return tableData;
    &#125;
    
    /* è®¾ç½®æŒ‡å®š ID çš„é¤æ¡Œå¯¹è±¡çš„ order å’Œ customer */
    public boolean orderTable(int id, int customer) &#123;
        TableData tableData = queryTable(id);
        if (!tableData.getOrder().equals(&quot;ç©º&quot;))&#123;
            return false;
        &#125;
        String sql = &quot;update `table` set `order` = &#39;å·²é¢„å®š&#39;, `customer` = ? where `id` = ?&quot;;
        int update = update(sql, customer, id);
        return update &gt; 0;
    &#125;
    
    /* æ›´æ–°æŒ‡å®š ID é¤æ¡Œå¯¹è±¡çš„ order çŠ¶æ€ã€‚ä¸€èˆ¬æ˜¯æŠŠ å·²é¢„å®š çŠ¶æ€æ”¹ä¸º ç”¨é¤ */
    public boolean updateTable(int id, int n) &#123;
        String sql = &quot;update `table` set `order` = ? where `id` = ?&quot;;
        String order = null;
        switch (n)&#123;
            case 1:
                order = &quot;å·²é¢„å®š&quot;;
                break;
            case 2:
                order = &quot;ç”¨é¤&quot;;
                break;
            case 3:
                order = &quot;ç©º&quot;;
                break;
            case 4:
                order = &quot;ä¸å¯ç”¨&quot;;
                break;
            default:
                return false;
        &#125;
        return update(sql, order, id) &gt; 0;
    &#125;
    
    /* æ¸…ç†æŒ‡å®š ID çš„é¤æ¡Œã€‚é€šå¸¸æ˜¯ç»“è´¦åè°ƒç”¨è¿™ä¸ªæ–¹æ³• */
    public boolean clearTable(int table) &#123;
        String sql = &quot;update `table` set `order` = &#39;ç©º&#39;, `customer` = null where `id` = ?&quot;;
        return update(sql, table) &gt; 0;
    &#125;
&#125;JAVA
package com.melody.wmt.sql;

import java.io.Serializable;

/**
 * @author Melody
 * @version 1.0
 */
public class TableData implements Serializable &#123;
    private int id;
    private String order;
    private int customer;
    private int seat;

    public TableData() &#123;
    &#125;

    public TableData(int id, String order, int customer, int seat) &#123;
        this.id = id;
        this.order = order;
        this.customer = customer;
        this.seat = seat;
    &#125;
    
    /* çœç•¥äº† getter å’Œ setterã€‚å®é™…ä»£ç é‡Œæ˜¯æœ‰çš„ */

    @Override
    public String toString() &#123;
        return id + &quot;\t&quot; + seat + &quot;\t&quot; + order + &quot;\t&quot; + (customer == 0 ? &quot;-&quot; : customer);
    &#125;
&#125;JAVA
</code></pre>
<h6><span id="logindaojava-logindatajava">LoginDAO.javaã€LoginData.java</span></h6><blockquote>
<p>å¯¹åº”æ•°æ®åº“çš„ <em>Login</em> è¡¨</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.sql;

/**
 * @author Melody
 * @version 1.0
 */
public class LoginDAO extends BasicDAO&#123;
    /* è¿”å›æŒ‡å®š name å’Œ password çš„å¯¹è±¡ã€‚æ²¡æœ‰åŒ¹é…é¡¹åˆ™è¿”å› null */
    public LoginData checkLogin(String name, String password)&#123;
        try &#123;
            /* è¿™é‡Œä½“ç°å‡ºï¼Œå¯†ç æ˜¯ç”± md5 æ–¹æ³•åŠ å¯†çš„ */
            String sql = &quot;select * from login where name = ? and password = md5(?)&quot;;
            LoginData loginData = (LoginData) querySingle(LoginData.class, sql, name, password);
            return loginData;
        &#125; catch (Exception e) &#123;
            return null;
        &#125;
    &#125;
&#125;JAVA
public class LoginData implements Serializable &#123;
    private int id;
    private String name;
    private String password;

    public LoginData()&#123;&#125;

    public LoginData(int id, String name, String password) &#123;
        this.id = id;
        this.name = name;
        this.password = password;
    &#125;
    
    /* çœç•¥äº† getter å’Œ setterã€‚å®é™…ä»£ç é‡Œæ˜¯æœ‰çš„ */

&#125;JAVA
</code></pre>
<h6><span id="dishesdaojava-dishesdatajava">DishesDAO.javaã€DishesData.java</span></h6><blockquote>
<p>å¯¹åº”æ•°æ®åº“çš„ <em>Dishes</em> è¡¨</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.sql;

import java.util.List;

/**
 * @author Melody
 * @version 1.0
 */
public class DishesDAO extends BasicDAO&#123;
    /* è¿”å›æ‰€æœ‰èœå• */
    public List&lt;DishesData&gt; getDishes() &#123;
        String sql = &quot;select * from `dishes`&quot;;
        return queryMulti(DishesData.class, sql);
    &#125;	
    
    /* è¿”å› ID æŒ‡å®šçš„èœå•ã€‚æ²¡æœ‰åˆ™è¿”å› null */
    public Object checkDishes(int id) &#123;
        String sql = &quot;select * from `dishes` where `id` = ?&quot;;
        return querySingle(DishesData.class, sql, id);
    &#125;
&#125;JAVA
public class DishesData &#123;
    private int id;
    private String name;
    private int price;
    private String species;
    private String available;

    public DishesData()&#123;&#125;

    public DishesData(int id, String name, int price, String species, String available) &#123;
        this.id = id;
        this.name = name;
        this.price = price;
        this.species = species;
        this.available = available;
    &#125;
    
    /* çœç•¥äº† getter å’Œ setterã€‚å®é™…ä»£ç é‡Œæ˜¯æœ‰çš„ */

    @Override
    public String toString() &#123;
        return id + &quot;\t&quot; + name + &quot;\t&quot; + price;
    &#125;
&#125;JAVA
</code></pre>
<h6><span id="customerdaojava-customerdatajava">CustomerDAO.javaã€CustomerData.java</span></h6><blockquote>
<p>å¯¹åº”æ•°æ®åº“çš„ <em>Customer</em> è¡¨</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.sql;

/**
 * @author Melody
 * @version 1.0
 */
public class CustomerDAO extends BasicDAO &#123;
    /* è¿”å› name å’Œ call æŒ‡å®šçš„é¡¾å®¢ä¿¡æ¯ã€‚æ²¡æœ‰åˆ™è¿”å› null */
    public int searchCustomer(String name, String call) &#123;
        String sql = &quot;select * from customer where `name` = ? and `call` = ?&quot;;
        Object o = querySingle(CustomerData.class, sql, name, call);
        return o == null ? -1 : ((CustomerData) o).getId();
    &#125;
    
    /* åˆ›å»ºé¡¾å®¢ä¿¡æ¯ï¼Œä¿¡æ¯åŒ…å« name å’Œ call */
    public boolean createCustomer(String name, String call) &#123;
        String sql = &quot;insert into customer (`name`, `call`) values(?, ?)&quot;;
        int update = update(sql, name, call);
        return update &gt; 0;
    &#125;
&#125;JAVA
package com.melody.wmt.sql;

/**
 * @author Melody
 * @version 1.0
 */
public class CustomerData &#123;
    private int id;
    private String name;
    private String card_id;
    private String call;

    public CustomerData()&#123;&#125;

    public CustomerData(int id, String name, String card_id, String call) &#123;
        this.id = id;
        this.name = name;
        this.card_id = card_id;
        this.call = call;
    &#125;
    
    /* çœç•¥äº† getter å’Œ setterã€‚å®é™…ä»£ç é‡Œæ˜¯æœ‰çš„ */

&#125;JAVA
</code></pre>
<h6><span id="billdaojava-billdatajava-detailbilldatajava">BillDAO.javaã€BillData.javaã€DetailBillData.java</span></h6><blockquote>
<p>å¯¹åº”æ•°æ®åº“çš„ <em>Bill</em> è¡¨ï¼Œ<em>Detail_Bill</em> è§†å›¾</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.sql;

import java.util.List;

/**
 * @author Melody
 * @version 1.0
 */
public class BillDAO extends BasicDAO &#123;
    /* è®¢é¤ã€‚å½¢å‚æ˜¯ é¤å“å·ã€æ•°é‡ã€æ¡Œå·ã€é¡¾å®¢å·ã€‚æˆåŠŸçš„åœºåˆè¿”å› true */
    public boolean order(int dishes, int num, int table, int customer) &#123;
        String sql = &quot;insert into `bill` (`dishes`, `num`, `table`, `customer`) values(?, ?, ?, ?)&quot;;
        int update = update(sql, dishes, num, table, customer);
        return update &gt; 0;
    &#125;
    
    /* è¿”å›è´¦å•åˆ—è¡¨ */
    public List&lt;DetailBillData&gt; queryBills() &#123;
        String sql = &quot;select * from detail_bill&quot;;
        return (List&lt;DetailBillData&gt;) queryMulti(DetailBillData.class, sql);
    &#125;
    
    /* è¿”å›ç‰¹å®šæ¡Œå·çš„å¸å•åˆ—è¡¨
    Boolean ä¸º true åˆ™è¿”å›æœªä»˜è´¦å•ï¼›false è¿”å›å·²ç»“è´¦å•ï¼›null è¿”å›å…¨éƒ¨ */
    public List&lt;DetailBillData&gt; queryBillsByTable(int table, Boolean clear) &#123;
        String sql;
        if (clear == null) &#123;
            sql = &quot;select * from detail_bill where `table` = ?&quot;;
        &#125; else &#123;
            sql = &quot;select * from detail_bill where `table` = ? and &quot; + (clear ? &quot;&quot; : &quot;not&quot;) + &quot; `clear` = &#39;n&#39;&quot;;
        &#125;
        return (List&lt;DetailBillData&gt;) queryMulti(DetailBillData.class, sql, table);
    &#125;
    
    /* å°†æŒ‡å®šæ¡Œå·çš„æ‰€æœ‰æœªä»˜è´¦å•ç»“ç®—ï¼Œå…¶ç»“ç®—æ–¹å¼ä¸º way æŒ‡å®šçš„æ–¹å¼ */
    public int finishBill(int table, int way) &#123;
        String clear;
        if (way == 1) &#123;
            clear = &quot;y&quot;;
        &#125; else if (way == 2) &#123;
            clear = &quot;alipay&quot;;
        &#125; else if (way == 3) &#123;
            clear = &quot;wc_pay&quot;;
        &#125; else &#123;
            throw new RuntimeException();
        &#125;
        String sql = &quot;update bill set `clear` = ? where `table` = ? and `clear` = &#39;n&#39;&quot;;
        return update(sql, clear, table);
    &#125;
&#125;JAVA
public class BillData &#123;
    private int id;
    private Date date;
    private int customer;
    private int table;
    private int num;
    private String clear;
    private int dishes;

    public BillData() &#123;
    &#125;

    public BillData(int id, Date date, int customer, int table, int num, String clear, int dishes) &#123;
        this.id = id;
        this.date = date;
        this.customer = customer;
        this.table = table;
        this.num = num;
        this.clear = clear;
        this.dishes = dishes;
    &#125;

    /* çœç•¥äº† getter å’Œ setterã€‚å®é™…ä»£ç é‡Œæ˜¯æœ‰çš„ */

    @Override
    public String toString() &#123;
        return id + &quot;\t&quot; + customer + &quot;\t&quot; + table + &quot;\t&quot; + num + &quot;\t&quot; + clear + &quot;\t&quot; + dishes + &quot;\t&quot; + date;
    &#125;
&#125;JAVA
public class DetailBillData &#123;
    private String name;
    private String call;
    private int table;
    private String dishes;
    private int num;
    private Date date;
    private String clear;

    public DetailBillData() &#123;
    &#125;

    public DetailBillData(String name, String call, int table, String dishes, int num, Date date, String clear) &#123;
        this.name = name;
        this.call = call;
        this.table = table;
        this.dishes = dishes;
        this.num = num;
        this.date = date;
        this.clear = clear;
    &#125;

    /* çœç•¥äº† getter å’Œ setterã€‚å®é™…ä»£ç é‡Œæ˜¯æœ‰çš„ */

    @Override
    public String toString() &#123;
        return name + &quot;\t&quot; + call + &quot;\t&quot; + table + &quot;\t&quot; + dishes + &quot;\t&quot; + num + &quot;\t&quot; + date + &quot;\t&quot; + clear;
    &#125;
&#125;JAVA
</code></pre>
<h4><span id="å®¢æˆ·ç«¯ç®¡ç†éƒ¨åˆ†">å®¢æˆ·ç«¯ï¼ˆç®¡ç†ï¼‰éƒ¨åˆ†</span></h4><h5><span id="commelodywmtclient">com.melody.wmt.client;</span></h5><h6><span id="clinetjava">Clinet.java</span></h6><blockquote>
<p>å®¢æˆ·ç«¯ç¨‹åºä¸»ä½“</p>
<p>è¯¥åŒ…å®ç°ï¼šç™»å½•ç•Œé¢ã€èœå•ç•Œé¢ã€é€‰æ‹©èœå•</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.client;

import com.melody.wmt.sql.LoginData;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.Scanner;

/**
 * @author Melody
 * @version 1.0
 */
public class Client &#123;
    public static String IP;						//è‡ªå·±çš„ IP
    public static String ServerIP = &quot;192.168.3.16&quot;;	//æœåŠ¡ç«¯ IP
    private static Scanner scanner = new Scanner(System.in);
    private Socket socket;
    private ObjectInputStream ois;					//è¾“å…¥æµ
    private ObjectOutputStream oos;					//è¾“å‡ºæµ
                                //ä»¥ä¸Šä¸‰ä¸ªå±æ€§ä¼šåœ¨ connect() æ–¹æ³•ä¸­è¢«èµ‹å€¼
    public final MenuUtility menuUtility = new MenuUtility(this);
                                //æ–¹æ³•ç±»å¯¹è±¡ï¼Œä¼ å…¥å½¢å‚ thisï¼Œå½¢æˆäº†äº’ç›¸æŒæœ‰çš„ç»“æ„
    public final Listening listening = new Listening(this);
                                //ç›‘å¬ç±»å¯¹è±¡ï¼Œä¼ å…¥å½¢å‚ thisï¼Œå½¢æˆäº†äº’ç›¸æŒæœ‰çš„ç»“æ„
    public LoginData loginData = null;				
                                //ç”¨æˆ·æ•°æ®ã€‚ç™»é™†åæœåŠ¡ç«¯ä¼šå‘é€ä¸€ä¸ªè¯¥ç±»å¯¹è±¡è¿‡æ¥
    public boolean skipMenu = false;
                                //è·³è¿‡èœå•æ˜¾ç¤ºã€‚è¯¥å±æ€§æ²¡æœ‰æŠ•å…¥ä½¿ç”¨
    
    /* å¤šæ­¤ä¸€ä¸¾åœ°åˆå§‹åŒ–è‡ªå·±çš„ IP åœ°å€ã€‚å…¶å®å¯ä»¥ç›´æ¥å†™ã€‚ */
    static &#123;
        try &#123;
            IP = InetAddress.getLocalHost().getHostAddress();
        &#125; catch (UnknownHostException e) &#123;
            System.out.println(e);
            IP = &quot;192.168.3.16&quot;;
        &#125;
    &#125;

    /* å±•ç¤ºä¸»èœå• */
    public void mainMenu() &#123;
        char read;
        while (true) &#123;
            System.out.println(&quot;====================================&quot;);
            System.out.println(&quot;\t\t1. ç™» å½• ç³» ç»Ÿ&quot;);
            System.out.println(&quot;\t\t9. é€€ å‡º ç³» ç»Ÿ&quot;);
            System.out.print(&quot;è¯·é€‰æ‹©ï¼š&quot;);
            read = scanner.next().charAt(0);
            System.out.println();
            System.out.println(&quot;------------------------------------&quot;);
            switch (read) &#123;
                case &#39;1&#39;:
                    /* è¿™é‡Œä¼šå…ˆå»ºç«‹è¿æ¥ connect()ï¼Œç„¶åè°ƒç”¨ç™»å½•æ–¹æ³• login() */
                    if (connect() &amp;&amp; menuUtility.login()) &#123;
                        try &#123;
                            menu_1();
                        &#125; catch (Exception e) &#123;
                            System.out.println(e);
                            /* æœ‰ä»»ä½•é—®é¢˜ä¼šæ‰§è¡Œ closeAll()ï¼Œå³å…³é—­ä¸€åˆ‡æµ */
                            closeAll();
                        &#125;
                    &#125;
                    closeAll();
                    break;
                case &#39;9&#39;:
                    if (menuUtility.out()) &#123;
                        return;
                    &#125;
                    break;
                default:
                    System.out.println(&quot;è¾“å…¥é”™è¯¯ã€‚&quot;);
                    break;
            &#125;
        &#125;
    &#125;
    
    /* å»ºç«‹è¿æ¥ */
    public boolean connect() &#123;
        try &#123;
            socket = new Socket(ServerIP, 9000);
            oos = new ObjectOutputStream(socket.getOutputStream());
            ois = new ObjectInputStream(socket.getInputStream());
            new Thread(listening).start();
            return true;
        &#125; catch (IOException e) &#123;
            System.out.println(e);
            closeAll();
            return false;
        &#125;
    &#125;
    
    /* å…³é—­æ‰€æœ‰æµã€‚é€šå¸¸æ˜¯ç™»å‡ºã€æ–­çº¿æˆ–æŠ¥é”™åæ‰§è¡Œè¿™ä¸ªæ–¹æ³• */
    public void closeAll() &#123;
        try &#123;
            if (ois != null) &#123;
                ois.close();
            &#125;
            if (oos != null) &#123;
                oos.close();
            &#125;
            if (socket != null) &#123;
                socket.close();
            &#125;
            listening.listening = false;
        &#125; catch (IOException e) &#123;
            System.out.println(e);
        &#125;
    &#125;
    
    /* æ˜¾ç¤ºï¼ˆç™»å½•ï¼‰èœå•ã€‚è¿™ä¸ªç±»åªæ˜¯åœ¨å±å¹•ä¸Šè¾“å‡ºå­—ç¬¦ */
    public void showMenu_1() &#123;
        /* è®¾ç½®äº†è·³è¿‡èœå•æ˜¾ç¤ºçš„åœºåˆï¼Œä»…ä¸€æ¬¡èœå•ä¸æ˜¾ç¤º */
        if (skipMenu)&#123;
            skipMenu = false;
            return;
        &#125;
        System.out.println(&quot;================&quot; + loginData.getName() + &quot;================&quot;);
        System.out.println(&quot;\t\t1. é¤ æ¡Œ çŠ¶ æ€&quot;);
        System.out.println(&quot;\t\t2. é¢„ å®š é¤ æ¡Œ&quot;);
        System.out.println(&quot;\t\t3. èœ å•&quot;);
        System.out.println(&quot;\t\t4. ç‚¹ é¤&quot;);
        System.out.println(&quot;\t\t5. è´¦ å•&quot;);
        System.out.println(&quot;\t\t6. ç»“ è´¦&quot;);
        System.out.println(&quot;\t\t9. ç™» å‡º ç³» ç»Ÿ&quot;);
    &#125;
    
    /* æ ¹æ®èœå•é€‰æ‹©æ‰§è¡Œçš„åŠŸèƒ½ */
    public void menu_1() &#123;
        char read;
        while (true) &#123;
            /* æ˜¾ç¤ºèœå•ã€‚è®¾ç½®è·³è¿‡çš„åœºåˆä»…ä¸€æ¬¡èœå•ä¸æ˜¾ç¤º */
            showMenu_1();
            System.out.print(&quot;è¯·é€‰æ‹©ï¼š&quot;);
            read = scanner.next().charAt(0);
            System.out.println(&quot;------------------------------------&quot;);
            switch (read) &#123;
                case &#39;1&#39;:
                    menuUtility.showTables();	//å±•ç¤ºé¤æ¡Œåˆ—è¡¨
                    break;
                case &#39;2&#39;:
                    menuUtility.orderTable();	//é¢„å®šé¤æ¡Œ
                    break;
                case &#39;3&#39;:
                    menuUtility.showList();		//å±•ç¤ºèœå•åˆ—è¡¨
                    break;
                case &#39;4&#39;:
                    menuUtility.orderDishes();	//è®¢é¤
                    break;
                case &#39;5&#39;:
                    menuUtility.showBill();		//å±•ç¤ºè´¦å•åˆ—è¡¨
                    break;
                case &#39;6&#39;:
                    menuUtility.payBill();		//ç»“è´¦
                    break;
                case &#39;9&#39;:
                    if (menuUtility.logout()) &#123;	//ç™»å‡º
                        return;
                    &#125;
                    break;
                default:
                    System.out.println(&quot;è¾“å…¥é”™è¯¯ã€‚&quot;);
                    break;
            &#125;
        &#125;
    &#125;

    public Socket getSocket() &#123;
        return socket;
    &#125;

    public ObjectInputStream getOis() &#123;
        return ois;
    &#125;

    public ObjectOutputStream getOos() &#123;
        return oos;
    &#125;
    
    /* æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚è¿™ä¸ªæ–¹æ³•ç”¨äºæŠ›å‡ºå¼‚å¸¸ï¼ˆå¬å›ä¸€å¸­è¯â€¦â€¦ï¼‰ */
    public void throwException(String s) &#123;
        throw new RuntimeException(s);
    &#125;
&#125;JAVA
</code></pre>
<h6><span id="listeningjava">Listening.java</span></h6><blockquote>
<p>ç›‘å¬æœåŠ¡ç«¯å‘é€æ•°æ®åŒ…çš„çº¿ç¨‹</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.client;

import com.melody.wmt.common.Message;


/**
 * @author Melody
 * @version 1.0
 */
public class Listening implements Runnable&#123;
    private Client client;				//å’Œä¸»ç¨‹åºç›¸äº’æŒæœ‰ï¼Œä¾¿äºè°ƒç”¨
    public Message message;				//æ¥æ”¶çš„æ•°æ®åŒ…
    public boolean listening = true;	//ç›‘å¬ä¸­ã€‚false ä¼šåœæ­¢çº¿ç¨‹
    public boolean received = false;	//æ”¶åˆ°æ–‡ä»¶ã€‚
                            //è¿™æ˜¯å®ç°æŸä¸ªæ–¹æ³•çš„è¿‡æ¸¡åŠæ³•ï¼Œä¼¼ä¹å·²ç»å¯ä»¥å¼ƒç”¨

    public Listening(Client client) &#123;
        this.client = client;
    &#125;

    @Override
    public void run() &#123;
        listening = true;
        while (listening)&#123;
            try &#123;
                Object o = client.getOis().readObject();
                if (o == null)&#123;
                    continue;
                &#125;
                message = (Message) o;
                received = true;
            &#125;catch (Exception e) &#123;
                client.throwException(&quot;ç›‘å¬å¼‚å¸¸&quot; + e);
            &#125;
        &#125;
        System.out.println(&quot;ç›‘å¬åœæ­¢&quot;);
    &#125;
&#125;JAVA
</code></pre>
<h6><span id="menuutilityjava">MenuUtility.java</span></h6><blockquote>
<p>å®¢æˆ·ç«¯ç¨‹åºçš„æ–¹æ³•åŒ…</p>
<p>è¯¥åŒ…å®ç°ï¼šâ€¦â€¦å¤§éƒ¨åˆ†åŠŸèƒ½</p>
</blockquote>
<pre><code class="java">package com.melody.wmt.client;

import com.melody.wmt.common.Message;
import com.melody.wmt.common.MessageType;
import com.melody.wmt.sql.LoginData;
import com.melody.wmt.sql.TableData;

import java.io.IOException;
import java.util.Scanner;

/**
 * @author Melody
 * @version 1.0
 */
public class MenuUtility &#123;
    private Scanner scanner = new Scanner(System.in);
    private Client client;				//å’Œä¸»ç¨‹åºäº’ç›¸æŒæœ‰ï¼Œæ–¹ä¾¿è°ƒç”¨
    private String userData = null;		//å†…å®¹æ˜¯ï¼š&quot;ç”¨æˆ·å\tå¯†ç &quot;ã€‚
                            //æ¯ä¸ªå‘é€çš„æ•°æ®åŒ…çš„ Object å¼€å¤´éƒ½æ˜¯è¿™ä¸ª

    public MenuUtility(Client client) &#123;
        this.client = client;
    &#125;
    
    /* å‘é€æ•°æ®åŒ…ï¼Œå¹¶è¿”å›æ¥æ”¶çš„æ•°æ®åŒ… */
    /* é€šå¸¸ä¼šè¿”å›æ¥æ”¶åˆ°çš„æ•°æ®åŒ…ã€‚ä¹Ÿå¯èƒ½è¿”å› null ä»£è¡¨å¤±è´¥ */
    public Message sendAndReceive(Message message) &#123;
        /* å‘é€åŒ…ä¸èƒ½ä¸º nullã€‚åŸºæœ¬ä¸Šä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µ */
        if (message == null) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šä¼ é€’ç©ºåŒ…&quot;);
            return null;
        &#125;
        /* åˆ·æ–°æ•°æ®åŒ…æ—¶é—´æˆ³ */
        message.setTimeStamp();
        /* æ¸…ç©ºç›‘å¬è¿›ç¨‹é‡Œå·²æœ‰çš„æ•°æ® */
        client.listening.received = false;
        client.listening.message = null;
        /* æ¥æ”¶æ•°æ®åŒ…å¯¹è±¡ */
        Message receive = null;
        try &#123;
            /* å‘é€æ•°æ®åŒ… */
            client.getOos().writeObject(message);
            /* æ ‡è®°æ­¤æ—¶çš„æ—¶é—´ */
            long time = System.currentTimeMillis();
            int n = 0;
            /* åœ¨æŒ‡å®šæ—¶é—´å†…æŒç»­è¯•å›¾æ¥æ”¶æœåŠ¡ç«¯æ•°æ®åŒ… */
            /* ç»æµ‹è¯•ï¼Œåœ¨ while(true) ä¸­å¦‚æœåªæœ‰å•ä¸€çš„ if è¯­å¥ï¼Œ
                é‚£ä¹ˆè¯¥ if è¯­å¥æ¡ä»¶ï¼ˆæˆ–ä¸»ä½“ï¼‰åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚
                è¿™ä¼šé€ æˆå®¢æˆ·ç«¯æ¥æ”¶ä¸åˆ°æœåŠ¡ç«¯æ•°æ®åŒ…ã€‚
                å› æ­¤ï¼ŒåŠ å…¥äº†æ— å…³ç´§è¦çš„å°åŠ¨ç”»ï¼Œç¡®ä¿ if è¯­å¥æ€»ä¼šé‡å¤æ‰§è¡Œã€‚*/
            while (true) &#123;
                n++;
                System.out.print(&quot;\r&quot;);
                /* if è¯­å¥ä¸­çš„æ‰æ˜¯ä¸»ä½“
                    æ¥æ”¶åˆ°æ•°æ®åŒ…æˆ–è€…ç­‰å¾… 5 ç§’ä»¥ä¸Šåï¼Œæ‹¿å–æ•°æ®åŒ…å¹¶è·³å‡ºè¯¥å¾ªç¯ */
                if (System.currentTimeMillis() - time &gt;= 5000 | client.listening.received) &#123;
                    receive = client.listening.message;
                    break;
                &#125;
                /* ä¸‹é¢æ˜¯ä¸€ä¸ªæ—‹è½¬çº¿æ¡çš„å°åŠ¨ç”»ã€‚
                    ç”±äºä¸Šé¢çš„ \r å­˜åœ¨ï¼Œè¯¥åŠ¨ç”»åœ¨ç¨‹åºç»§ç»­åä¼šè¢«å…¶ä»–å­—ç¬¦è¦†ç›– */
                switch (n % 4) &#123;
                    case 1:
                        System.out.print(&quot;|&quot;);
                        break;
                    case 2:
                        System.out.print(&quot;/&quot;);
                        break;
                    case 3:
                        System.out.print(&quot;-&quot;);
                        break;
                    default:
                        System.out.print(&quot;\\&quot;);
                        break;
                &#125;
            &#125;
            return receive;
        /* æœ‰ä»»ä½•å¼‚å¸¸åˆ™è¿”å› null */
        &#125; catch (IOException e) &#123;
            System.out.println(e);
            return null;
        &#125;
    &#125;

    /* å®ç°ç™»å½•éªŒè¯ */
    public boolean login() &#123;
        System.out.print(&quot;è¯·è¾“å…¥ç”¨æˆ·åï¼š&quot;);
        String user = scanner.next();
        System.out.print(&quot;è¯·è¾“å…¥å¯†ç ï¼š&quot;);
        String pw = scanner.next();
        System.out.println();
        /* è¿™å¥å­—ç¬¦ä¸²ä¼šè¢«é‡å¤ä½¿ç”¨ */
        userData = (user + &quot;\t&quot; + pw);
        /* å‘é€æ•°æ®åŒ…ã€‚è¿™é‡Œå†™å¾—æ¯”è¾ƒæŒ¤ï¼Œåé¢æˆ‘éƒ½åˆ†å¼€å†™äº† */
        Message receive = sendAndReceive(new Message(Client.IP, Client.ServerIP, MessageType.LOGIN, userData));
        /* æ ¹æ®è¿”å›åŒ…åšå‡ºç›¸åº”æç¤º */
        if (receive == null) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœåŠ¡å™¨æ— å“åº”&quot;);
            return false;
        &#125;
        String reply = receive.getWord();
        if (reply.equals(MessageType.LOGIN_USER_NOT_EXIST)) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šç”¨æˆ·åä¸å­˜åœ¨&quot;);
        &#125; else if (reply.equals(MessageType.LOGIN_WRONG_PW)) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šå¯†ç é”™è¯¯&quot;);
        &#125; else if (reply.equals(MessageType.ACCEPT)) &#123;
            try &#123;
                client.loginData = (LoginData) receive.getObject();
            &#125; catch (Exception e) &#123;
                System.out.println(&quot;æœªçŸ¥é”™è¯¯&quot;);
                return false;
            &#125;
            System.out.println(&quot;ç™»å½•æˆåŠŸ&quot;);
        &#125;
        /* è¿”å›å€¼ã€‚true è¡¨ç¤ºç™»é™†æˆåŠŸ */
        return receive.getWord().equals(MessageType.ACCEPT);
    &#125;
    
    /* é€€å‡ºç¡®è®¤ã€‚è¿™æ˜¯æœªç™»å½•æ—¶ï¼ˆå³ï¼Œç™»é™†ç•Œé¢ï¼‰çš„é€€å‡ºæ–¹æ³• */
    public boolean out() &#123;
        System.out.print(&quot;ç¡®å®šé€€å‡ºå—ï¼Ÿï¼ˆY/Nï¼‰&quot;);
        char answer = scanner.next().charAt(0);
        return answer == &#39;Y&#39; || answer == &#39;y&#39;;
    &#125;
    
    /* å±•ç¤ºé¤æ¡Œåˆ—è¡¨ */
    public boolean showTables() &#123;
        /* å‘é€è¯·æ±‚ï¼Œæ¥æ”¶æœåŠ¡ç«¯è¿”å›çš„æ•°æ®åŒ… */
        Message message = new Message(Client.IP, Client.ServerIP, MessageType.SHOW_TABLES, userData);
        Message receive = sendAndReceive(message);
        /* æ ¹æ®è¿”å›åŒ…çš„ä¸åŒä½œå‡ºååº” */
        if (receive == null) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœåŠ¡å™¨æ— å“åº”&quot;);
            return false;
        &#125;
        String r = receive.getWord();
        if (r.equals(MessageType.REJECT)) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœåŠ¡å™¨æ‹’ç»äº†è¯·æ±‚&quot;);
            return false;
        &#125; else if (r.equals(MessageType.ACCEPT)) &#123;
            System.out.println(&quot;ID\tåº§æ•°\tçŠ¶æ€\té¡¾å®¢&quot;);
            System.out.println(receive.getObject());
            return true;
        &#125; else &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœªçŸ¥çš„å›æ‰§&quot; + r);
            return false;
        &#125;
    &#125;
    
    /* æ£€æŸ¥é¤æ¡ŒçŠ¶æ€ */
    /* needï¼š1ä¸å¯ç”¨ï¼›2ä¸å­˜åœ¨ï¼›3å ç”¨æœªç‚¹é¤ï¼›4å ç”¨å·²ç‚¹é¤ï¼›5æœªå ç”¨ï¼›6å ç”¨
        æ ¹æ®éœ€è¦çš„é¤æ¡ŒçŠ¶æ€ need çš„ä¸åŒï¼Œæœ‰ä¸åŒçš„è¿”å›æ–¹æ³•*/
    public TableData checkTable(int tableID, int need) &#123;
        /* å‘é€éªŒè¯é¤æ¡Œè¯·æ±‚ï¼Œæ¥æ”¶è¿”å›åŒ… */
        Message message = new Message(client.IP, client.ServerIP, MessageType.CHECK_TABLE, userData + &quot;\t&quot; + tableID);
        Message receive = sendAndReceive(message);
        /* æ ¹æ®è¿”å›åŒ…åšå‡ºä¸åŒååº” */
        if (receive == null) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœåŠ¡å™¨æ— å“åº”&quot;);
            return null;
        &#125;
        /* å¦‚æœ need å’Œè¿”å›ç»“æœåŒ¹é…ï¼Œgive å€¼ä¼šä¸º true */
        boolean give = false;
        if (receive.getWord().equals(MessageType.REJECT)) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šè¯·æ±‚è¢«æ‹’ç»&quot;);
        &#125; else if (receive.getWord().equals(MessageType.TABLE_NOT_AVAILABLE)) &#123;
            give = need == 1;
            System.out.print(give ? &quot;&quot; : &quot;é¤æ¡Œä¸å¯ç”¨\n&quot;);
        &#125; else if (receive.getWord().equals(MessageType.TABLE_NOT_EXIST)) &#123;
            give = need == 2;
            System.out.print(give ? &quot;&quot; : &quot;é¤æ¡Œä¸å­˜åœ¨\n&quot;);
        &#125; else if (receive.getWord().equals(MessageType.TABLE_OCCUPIED)) &#123;
            give = need == 3 || need == 6;
            System.out.print(give ? &quot;&quot; : &quot;é¤æ¡Œè¢«å ç”¨ï¼ˆæœªç‚¹é¤ï¼‰\n&quot;);
        &#125; else if (receive.getWord().equals(MessageType.TABLE_DINNING)) &#123;
            give = need == 4 || need == 6;
            System.out.print(give ? &quot;&quot; : &quot;é¤æ¡Œè¢«å ç”¨ï¼ˆå·²ç‚¹é¤ï¼‰\n&quot;);
        &#125; else if (receive.getWord().equals(MessageType.TABLE_AVAILABLE)) &#123;
            give = need == 5;
            System.out.print(give ? &quot;&quot; : &quot;é¤æ¡Œä¸ºç©º\n&quot;);
        &#125; else &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœªçŸ¥é”™è¯¯&quot;);
        &#125;
        try &#123;
            /* åªæœ‰åŒ¹é…çš„ç»“æœæ‰ä¼šè¿”å›é¤æ¡Œæ•°æ® */
            return give ? (TableData) receive.getObject() : null;
        &#125; catch (Exception e) &#123;
            return null;
        &#125;
    &#125;
    
    /* é¢„å®šé¤æ¡Œ */
    public void orderTable() &#123;
        /* é¦–å…ˆä¼šè°ƒç”¨ä¸€æ¬¡å±•ç¤ºé¤æ¡Œçš„æ–¹æ³• */
        showTables();
        /* è¾“å…¥é¤æ¡Œå· */
        System.out.println(&quot;------------------------------------&quot;);
        System.out.print(&quot;è¯·è¾“å…¥é¢„å®šçš„é¤æ¡Œå·ç ï¼ˆ-1å–æ¶ˆï¼‰ï¼š&quot;);
        int tableID = 0;
        try &#123;
            tableID = Integer.parseInt(scanner.next());
            if (tableID == -1) &#123;
                return;
            &#125; else if (tableID &lt;= 0) &#123;
                throw new RuntimeException();
            &#125;
        &#125; catch (Exception e) &#123;
            System.out.println(&quot;è¾“å…¥é”™è¯¯ã€‚&quot;);
            return;
        &#125;
        /* æ£€æŸ¥ä¸€ä¸‹ä¸Šé¢è¾“å…¥çš„é¤æ¡Œæ˜¯å¦æ­£ç¡®ã€‚è¿™æ—¶çš„æ­£ç¡®æŒ‡çš„æ˜¯é¤æ¡Œä¸ºç©º */
        TableData tableData = checkTable(tableID, 5);
        if (tableData == null) &#123;
            return;
        &#125;
        System.out.print(&quot;è¯·è¾“å…¥é¢„å®šäººåå­—ï¼š&quot;);
        String name = scanner.next();
        System.out.println(&quot;è¯·è¾“å…¥é¢„å®šäººç”µè¯ï¼š&quot;);
        String call = scanner.next();
        System.out.println(&quot;è¯·ç¡®è®¤é¢„å®šä¿¡æ¯ï¼š&quot;);
        System.out.println(&quot;æ¡Œå·ï¼š&quot; + tableData.getId() + &quot;\tåº§æ•°ï¼š&quot; + tableData.getSeat() + &quot;\té¢„å®šäººï¼š&quot; + name + &quot;\tç”µè¯ï¼š&quot; + call);
        System.out.print(&quot;ç¡®å®šå—ï¼Ÿï¼ˆY/Nï¼‰ï¼š&quot;);
        char confirm = scanner.next().charAt(0);
        if (confirm != &#39;Y&#39; &amp;&amp; confirm != &#39;y&#39;) &#123;
            return;
        &#125;
        /* å‘é€è¯·æ±‚é¢„å®šé¤æ¡Œã€‚å‰é¢çš„é¡¾å®¢å¯¹è±¡ä¸å­˜åœ¨çš„è¯ï¼ŒæœåŠ¡ç«¯ä¼šè‡ªåŠ¨åˆ›å»ºæ–°çš„å¯¹è±¡ */
        Message message = new Message(client.IP, client.ServerIP, MessageType.ORDER_TABLE, userData + &quot;\t&quot; + tableID + &quot;\t&quot; + name + &quot;\t&quot; + call);
        Message receive = sendAndReceive(message);
        if (receive.getWord().equals(MessageType.ACCEPT)) &#123;
            System.out.println(&quot;é¢„å®šæˆåŠŸï¼&quot;);
        &#125; else &#123;
            System.out.println(&quot;é¢„å®šå¤±è´¥&quot;);
        &#125;
    &#125;
    
    /* å±•ç¤ºèœå• */
    public void showList() &#123;
        /* å‘é€å±•ç¤ºèœå•çš„è¯·æ±‚ */
        Message message = new Message(Client.IP, Client.ServerIP, MessageType.SHOW_DISHES, userData);
        Message receive = sendAndReceive(message);
        if (receive == null) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœåŠ¡å™¨æ— å“åº”&quot;);
            return;
        &#125; else if (!receive.getWord().equals(MessageType.ACCEPT)) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šè¯·æ±‚è¢«æ‹’ç»&quot;);
            return;
        &#125;
        /* æ­¤æ—¶æ‹¿åˆ°äº†èœå•ã€‚è¯¥èœå•çš„ä¸åŒç±»åˆ«æ˜¯ç”± ### åˆ†å‰²çš„ã€‚æˆ‘ä»¬å†å°†å…¶åˆ†å¼€ */
        String[] dishes;
        try &#123;
            dishes = ((String) receive.getObject()).split(&quot;###&quot;);
        &#125; catch (Exception e) &#123;
            System.out.println(&quot;æœªçŸ¥é”™è¯¯&quot;);
            return;
        &#125;
        char in;
        /* è¿™å…¶å®åˆæ˜¯ä¸€çº§èœå•äº†ã€‚ç›´åˆ°é€‰æ‹© 9 å‰ï¼Œè¯¥èœå•ä¼šä¸€ç›´å¾ªç¯ */
        while (true) &#123;
            System.out.println(&quot;---------------------------------------&quot;);
            System.out.println(&quot;\t\tè¯·é€‰æ‹©è¦æŸ¥çœ‹çš„ç±»åˆ«&quot;);
            System.out.println(&quot;\t\t1. ä¸»  é£Ÿ&quot;);
            System.out.println(&quot;\t\t2. ä¸»  èœ&quot;);
            System.out.println(&quot;\t\t3. å‡‰  èœ&quot;);
            System.out.println(&quot;\t\t4. æ±¤  å“&quot;);
            System.out.println(&quot;\t\t5. ç”œ  ç‚¹&quot;);
            System.out.println(&quot;\t\t6. é¥®  æ–™&quot;);
            System.out.println(&quot;\t\t7. ç‚¹  é¤&quot;);
            System.out.println(&quot;\t\t9. è¿”  å›&quot;);
            System.out.print(&quot;è¯·è¾“å…¥ï¼š&quot;);
            in = scanner.next().charAt(0);
            System.out.println(&quot;---------------------------------------&quot;);
            switch (in) &#123;
                case &#39;1&#39;:
                    System.out.println(&quot;------------ä¸»  é£Ÿ------------&quot;);
                    System.out.println(&quot;ID\tåç§°  \tä»·æ ¼&quot;);
                    System.out.println(dishes[0]);
                    break;
                case &#39;2&#39;:
                    System.out.println(&quot;------------ä¸»  èœ------------&quot;);
                    System.out.println(&quot;ID\tåç§°  \tä»·æ ¼&quot;);
                    System.out.println(dishes[1]);
                    break;
                case &#39;3&#39;:
                    System.out.println(&quot;------------å‡‰  èœ------------&quot;);
                    System.out.println(&quot;ID\tåç§°  \tä»·æ ¼&quot;);
                    System.out.println(dishes[2]);
                    break;
                case &#39;4&#39;:
                    System.out.println(&quot;------------æ±¤  å“------------&quot;);
                    System.out.println(&quot;ID\tåç§°  \tä»·æ ¼&quot;);
                    System.out.println(dishes[3]);
                    break;
                case &#39;5&#39;:
                    System.out.println(&quot;------------ç”œ  ç‚¹------------&quot;);
                    System.out.println(&quot;ID\tåç§°  \tä»·æ ¼&quot;);
                    System.out.println(dishes[4]);
                    break;
                case &#39;6&#39;:
                    System.out.println(&quot;------------é¥®  æ–™------------&quot;);
                    System.out.println(&quot;ID\tåç§°  \tä»·æ ¼&quot;);
                    System.out.println(dishes[5]);
                    break;
                case &#39;7&#39;:
                    /* è¿™æ—¶è°ƒç”¨è®¢é¤çš„æ–¹æ³• */
                    orderDishes();
                    break;
                case &#39;9&#39;:
                    return;
                default:
                    System.out.println(&quot;è¾“å…¥é”™è¯¯&quot;);
                    break;
            &#125;
        &#125;
    &#125;
    
    /* è®¢é¤ */
    public void orderDishes() &#123;
        System.out.println(&quot;è¯·è¾“å…¥èœå“ç¼–å·ï¼ˆæ•°å­—ï¼Œ-1è¿”å›ï¼‰ï¼š&quot;);
        int dish;
        try &#123;
            dish = Integer.parseInt(scanner.next());
        &#125; catch (Exception e) &#123;
            System.out.println(&quot;è¾“å…¥é”™è¯¯&quot;);
            return;
        &#125;
        if (dish &lt; 0) &#123;
            return;
        &#125;
        /* æ£€æŸ¥è¾“å…¥çš„é¤å“ä¿¡æ¯ã€‚è¿™é‡ŒæŠŠä¸€éƒ¨åˆ†ä»£ç å°è£…æˆäº†ä¸€ä¸ªæ–°æ–¹æ³•
            â€¦â€¦è¿™æ˜¯å› ä¸ºæµ‹è¯•å‘ç°ï¼Œä¸è¿™æ ·åšä¼šå¯¼è‡´å†…å­˜æ•°æ®ä¸æ›´æ–°ï¼Œæ¥æ”¶åˆ°çš„è¿”å›åŒ…æ€»æ˜¯ä¸å˜ */
        String dishDetail = orderDishesPart1(dish);
        if (dishDetail == null) &#123;
            return;
        &#125;
        System.out.println(&quot;è¯·è¾“å…¥æ•°é‡ï¼ˆæ•°å­—ï¼Œ-1è¿”å›ï¼‰ï¼š&quot;);
        int num;
        try &#123;
            num = Integer.parseInt(scanner.next());
        &#125; catch (Exception e) &#123;
            System.out.println(&quot;è¾“å…¥é”™è¯¯&quot;);
            return;
        &#125;
        if (num &lt; 0) &#123;
            return;
        &#125;
        System.out.println(&quot;è¯·è¾“å…¥è®¢é¤æ¡Œå·ï¼ˆæ•°å­—ï¼Œ-1è¿”å›ï¼‰ï¼š&quot;);
        int table;
        try &#123;
            table = Integer.parseInt(scanner.next());
        &#125; catch (Exception e) &#123;
            System.out.println(&quot;è¾“å…¥é”™è¯¯&quot;);
            return;
        &#125;
        if (table &lt; 0) &#123;
            return;
        &#125;
        /* æ£€æŸ¥ä¸€ä¸‹é¤æ¡Œä¿¡æ¯ã€‚è¿™é‡Œï¼Œæ­£ç¡®çš„çŠ¶æ€æ˜¯&#39;å·²å ç”¨&#39; */
        TableData tableData = checkTable(table, 6);
        if (tableData == null) &#123;
            return;
        &#125;
        /* å±•ç¤ºä¸€ä¸‹ä¿¡æ¯ */
        System.out.println(&quot;ID\tåç§°  \tä»·æ ¼ \tæ•°é‡\tæ¡Œå·&quot;);
        System.out.println(dishDetail + &quot;\t&quot; + num + &quot;\t&quot; + tableData.getId());
        System.out.print(&quot;ç¡®å®šå—ï¼Ÿï¼ˆY/Nï¼‰ï¼š&quot;);
        char confirm = scanner.next().charAt(0);
        if (confirm != &#39;Y&#39; &amp;&amp; confirm != &#39;y&#39;) &#123;
            return;
        &#125;
        /* å‘é€è®¢é¤è¯·æ±‚ */
        Message message = new Message(Client.IP, Client.ServerIP, MessageType.ORDER_DISHES, null);
        message.setObject(userData + &quot;\t&quot; + dish + &quot;\t&quot; + num + &quot;\t&quot; + table + &quot;\t&quot; + tableData.getCustomer());
        Message receive = sendAndReceive(message);
        if (receive == null) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœåŠ¡å™¨æ— å“åº”&quot;);
        &#125; else if (receive.getWord().equals(MessageType.REJECT)) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šè¯·æ±‚è¢«æ‹’ç»&quot;);
        &#125; else if (receive.getWord().equals(MessageType.ACCEPT)) &#123;
            System.out.println(&quot;é¢„å®šæˆåŠŸ&quot;);
        &#125;
    &#125;
    
    /* è®¢é¤æ–¹æ³•ä¸­ï¼Œå°éƒ¨åˆ†ä»£ç å°è£…æˆäº†è¿™ä¸ªæ–¹æ³• */
    /* å¦‚æ­¤åšæ˜¯å› ä¸ºæµ‹è¯•å‘ç°ï¼Œä¸è¿™æ ·åšä¼šå¯¼è‡´å†…å­˜æ•°æ®ä¸æ›´æ–°ï¼Œ
        æ¥æ”¶åˆ°çš„æœåŠ¡ç«¯è¿”å›åŒ…å†…å®¹æ€»æ˜¯å’Œæ–¹æ³•ä¸­ç¬¬ä¸€æ¬¡æ¥æ”¶çš„è¿”å›åŒ…å†…å®¹ä¸€æ ·ã€‚
        æµ‹è¯•è¿‡å¾ˆå¤šæ¬¡ï¼Œé—®é¢˜å°±æ˜¯å‡ºåœ¨è¿™é‡Œã€‚è§£å†³æ–¹æ³•å°±æ˜¯è¿™æ ·ã€‚
        è¿™æ ·ï¼Œè¿™ä¸ªæ–¹æ³•æ‰§è¡Œå®Œæ¯•åï¼Œä¼¼ä¹ä¼šåˆ·æ–°å†…å­˜ã€‚å¯èƒ½è¿™å°±æ˜¯åƒåœ¾å¤„ç†æœºåˆ¶å§ */
    public String orderDishesPart1(int dish) &#123;
        Message message = new Message(Client.IP, Client.ServerIP, MessageType.CHECK_DISHES, userData + &quot;\t&quot; + dish);
        Message receive1 = sendAndReceive(message);
        if (receive1 == null) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœåŠ¡å™¨æ— å“åº”&quot;);
            return null;
        &#125; else if (!receive1.getWord().equals(MessageType.ACCEPT)) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šè¯·æ±‚è¢«æ‹’ç»&quot;);
            return null;
        &#125;
        System.out.println(&quot;ID\tåç§°  \tä»·æ ¼&quot;);
        String dishDetail = receive1.getObject().toString();
        System.out.println(dishDetail);
        return dishDetail;
    &#125;

    /* å±•ç¤ºè´¦å•åˆ—è¡¨ */
    public void showBill() &#123;
        /* å‘é€è¯·æ±‚ */
        Message message = new Message(Client.IP, Client.ServerIP, MessageType.SHOW_ALL_BILLS, userData);
        Message receive = sendAndReceive(message);
        if (receive == null) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœåŠ¡å™¨æ— å“åº”&quot;);
            return;
        &#125; else if (receive.getWord().equals(MessageType.REJECT)) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šè¯·æ±‚è¢«æ‹’ç»&quot;);
            return;
        &#125;
        /* åŒæ ·çš„ï¼Œè´¦å•åˆ—è¡¨ä¹Ÿæ˜¯ä»¥ ### åˆ†éš”çš„ */
        String[] bills;
        try &#123;
            bills = ((String) receive.getObject()).split(&quot;###&quot;);
        &#125; catch (Exception e) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœªçŸ¥é”™è¯¯&quot;);
            return;
        &#125;
        /* å¦ä¸€ä¸ªå°èœå•ã€‚é€‰æ‹© 9 å‰ä¼šä¸€ç›´å¾ªç¯ */
        while (true) &#123;
            System.out.println(&quot;---------------------------------------&quot;);
            System.out.println(&quot;\t\tè¯·é€‰æ‹©è¦æŸ¥çœ‹çš„ç±»åˆ«&quot;);
            System.out.println(&quot;\t\t1. å·²å®Œæˆè´¦å•&quot;);
            System.out.println(&quot;\t\t2. æœªå®Œæˆè´¦å•&quot;);
            System.out.println(&quot;\t\t9. è¿”  å›&quot;);
            System.out.print(&quot;è¯·è¾“å…¥ï¼š&quot;);
            char in = scanner.next().charAt(0);
            System.out.println(&quot;---------------------------------------&quot;);
//            System.out.println(&quot;å§“å \tç”µè¯  \tæ¡Œå·\tèœå   \tæ•°é‡\tæ—¥æœŸ          \tç»“ç®—çŠ¶æ€&quot;);
            switch (in) &#123;
                case &#39;1&#39;:
                    System.out.println(bills[0].length() == 0 ? &quot;---æ— ---&quot; : bills[0]);
                    break;
                case &#39;2&#39;:
                    System.out.println((bills.length &lt; 2 || bills[1].length() == 0) ? &quot;---æ— ---&quot; : bills[1]);
                    break;
                case &#39;9&#39;:
                    return;
                default:
                    System.out.println(&quot;è¾“å…¥é”™è¯¯&quot;);
                    break;
            &#125;
        &#125;
    &#125;
    
    /* æŒ‰æ¡Œå·æ£€æŸ¥è´¦å• */
    public String checkBillByTable(int table) &#123;
        /* å‘é€è¯·æ±‚
            ç‰¹åˆ«ä¸€æï¼šåé¢çš„ &quot;\t&quot; + &#39;t&#39; + &quot;\t&quot; + table + &quot;\t&quot; + &quot;true&quot; 
            ä»£è¡¨ æŒ‰æ¡Œå·æŸ¥è¯¢(t)ï¼Œå·ç æ˜¯ tableï¼Œå±•ç¤ºæœªç»“è´¦è´¦å•(true) */
        Message message = new Message(Client.IP, Client.ServerIP, MessageType.CHECK_BILLS, userData + &quot;\t&quot; + &#39;t&#39; + &quot;\t&quot; + table + &quot;\t&quot; + &quot;true&quot;);
        Message receive = sendAndReceive(message);
        if (receive == null) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœåŠ¡å™¨æ— å“åº”&quot;);
            return null;
        &#125; else if (receive.getWord().equals(MessageType.ACCEPT)) &#123;
            return receive.getObject().toString();
        &#125; else if (receive.getWord().equals(MessageType.REJECT)) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šè¯·æ±‚è¢«æ‹’ç»&quot;);
            return null;
        &#125; else &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœªçŸ¥é”™è¯¯&quot;);
            return null;
        &#125;
    &#125;
    
    /* ç»“è´¦ */
    public void payBill() &#123;
        showTables();
        System.out.print(&quot;è¯·è¾“å…¥ç»“è´¦çš„æ¡Œå·ï¼ˆ-1è¿”å›ï¼‰ï¼š&quot;);
        int table = 0;
        try &#123;
            table = Integer.parseInt(scanner.next());
        &#125; catch (Exception e) &#123;
            System.out.println(&quot;è¾“å…¥é”™è¯¯&quot;);
        &#125;
        if (table &lt; 0) &#123;
            return;
        &#125;
        /* æ£€æŸ¥ä¸€ä¸‹æ¡Œå· */
        TableData tableData = checkTable(table, 4);
        if (tableData == null) &#123;
            return;
        &#125;
        /* æ£€æŸ¥å¹¶å±•ç¤ºé‚£ä¸ªæ¡Œå·çš„æœªç»“è´¦å• */
        String s = checkBillByTable(table);
        if (s == null) &#123;
            return;
        &#125;
        System.out.println(s);
        System.out.println(&quot;è¯·ç¡®è®¤ä»¥ä¸Šä¿¡æ¯ï¼ˆY/Nï¼‰ï¼š&quot;);
        char confirm = scanner.next().charAt(0);
        if (confirm != &#39;Y&#39; &amp;&amp; confirm != &#39;y&#39;)&#123;
            return;
        &#125;
        System.out.println(&quot;è¯·è¾“å…¥ç»“ç®—æ–¹å¼ï¼ˆ1ç°é‡‘ï¼›2æ”¯ä»˜å®ï¼›3å¾®ä¿¡ï¼›-1è¿”å›ï¼‰ï¼š&quot;);
        int way = -1;
        try &#123;
            way = Integer.parseInt(scanner.next());
            if (way &lt; -1 || way &gt; 3)&#123;
                throw new RuntimeException();
            &#125;
        &#125; catch (Exception e) &#123;
            System.out.println(&quot;è¾“å…¥é”™è¯¯&quot;);
        &#125;
        if (way == -1) &#123;
            return;
        &#125;
        /* å‘é€ç»“è´¦è¯·æ±‚ */
        Message message = new Message(Client.IP, Client.ServerIP, MessageType.FINISH_BILLS, userData + &quot;\t&quot; +  table + &quot;\t&quot; + way);
        Message receive = sendAndReceive(message);
        if (receive == null) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šæœåŠ¡å™¨æ— å“åº”&quot;);
        &#125; else if (receive.getWord().equals(MessageType.REJECT)) &#123;
            System.out.println(&quot;é”™è¯¯ï¼šè¯·æ±‚è¢«æ‹’ç»&quot;);
        &#125; else if (receive.getWord().equals(MessageType.ACCEPT)) &#123;
            System.out.println(&quot;ç»“ç®—æˆåŠŸ&quot;);
        &#125;
    &#125;
    
    /* ç™»å‡º */
    public boolean logout() &#123;
        System.out.print(&quot;ç¡®å®šç™»å‡ºå—ï¼Ÿï¼ˆY/Nï¼‰ï¼š&quot;);
        char confirm;
        try &#123;
            confirm = scanner.next().charAt(0);
            if (confirm != &#39;y&#39; &amp;&amp; confirm != &#39;Y&#39;)&#123;
                return false;
            &#125;
            Message message = new Message(Client.IP, Client.ServerIP, MessageType.LOGOUT, userData);
            client.getOos().writeObject(message);
            return true;
        &#125; catch (IOException e) &#123;
            System.out.println(&quot;ä¼ è¾“å¼‚å¸¸&quot;);
            return true;
        &#125;
    &#125;
&#125;
</code></pre>

      
       <hr><span style="font-style: italic;color: gray;"> è½¬è½½è¯·æ³¨æ˜æ¥æºï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥é‚®ä»¶è‡³ jaytp@qq.com </span>
    </div>
</article>







    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    Â©2016-2020 Yelog
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*è®¿é—®æ•°é‡*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    
	
<span id="timeDate">è½½å…¥å¤©æ•°...</span><span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>

  var now = new Date(); 
  function createtime() { 
    var grt= new Date("03/08/2020 16:44:00");//æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´ 
    now.setTime(now.getTime()+250); 
    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
    if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
    mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
    snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
    document.getElementById("timeDate").innerHTML = "æœ¬ç«™å·²å®‰å…¨è¿è¡Œ "+dnum+" å¤© "; 
    document.getElementById("times").innerHTML = hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’"; 
  } 
  setInterval("createtime()",250);

</script>





<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 18px 3px 15px 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*åˆ—è¡¨æ ·å¼*/
    
    #post .pjax article .article-entry>ol, #post .pjax article .article-entry>ul, #post .pjax article>ol, #post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    #post .pjax article .article-entry li>ol, #post .pjax article .article-entry li>ul,#post .pjax article li>ol, #post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    #post .pjax article .article-entry>ol>li, #post .pjax article .article-entry>ul>li,#post .pjax article>ol>li, #post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    #post .pjax article .article-entry li>ol>li, #post .pjax article .article-entry li>ul>li,#post .pjax article li>ol>li, #post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    

    
</style>














<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<div class="aplayer"

    data-id="9126522781"

    data-server="netease"

    data-type="playlist"

    data-fixed="true"

    data-autoplay="false"

    data-loop="all"

    data-order="random"

    data-preload="auto"

    data-volume="0.7"

    data-mutex="true"

>
</div>
<script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>

<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>

<script>
(function() {

  var arr = new Array();
  var $tags = $('.post-tags').children('a');
  $tags.each(function() {
    arr.push($(this).html())
  })
  if (arr.indexOf("å›¾é›†") !== -1) {

    $('.hj_img').each(function() {
      $(this).wrap('<a class="fancybox" data-fancybox="gallery" href="' + $(this).prop("src") + '"></a>'); 
    })
    //åˆå§‹åŒ–fancyboxï¼Œpaddingè®¾ä¸º0ï¼Œloopè®¾ä¸ºfalse
    $('.fancybox').fancybox({
      padding: 0,
      loop: false
    });
  }
})();
</script>

<!-- // æ–‡å­— -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/shehuizhuyi.js"></script>
<!-- // çˆ±å¿ƒ -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/love.js"></script>
<!-- // æŒ‰é”®å±è”½ éœ€è¦jQuery -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/noSomeKey.js"></script>


</html>
